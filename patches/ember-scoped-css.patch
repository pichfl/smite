diff --git a/dist/cjs/index.cjs b/dist/cjs/index.cjs
index 403de12df5bf1aab1a5f6dc59151e38437c5f54e..baa5a987d97e5c09421e121216b0e12b3b78ea60 100644
--- a/dist/cjs/index.cjs
+++ b/dist/cjs/index.cjs
@@ -45,6 +45,7 @@ var import_path = __toESM(require("path"), 1);
 var import_node_assert = __toESM(require("node:assert"), 1);
 var import_node_fs = __toESM(require("node:fs"), 1);
 var import_node_path = __toESM(require("node:path"), 1);
+var import_package_up = require("package-up");
 
 // src/lib/path/hash-from-module-path.js
 var import_blueimp_md5 = __toESM(require("blueimp-md5"), 1);
@@ -67,7 +68,6 @@ var EMBROIDER_3_REWRITTEN_APP_ASSETS = `${EMBROIDER_3_REWRITTEN_APP_PATH}/assets
 var EMBROIDER_3_REWRITTEN_PACKAGES = `${EMBROIDER_DIR}/rewritten-packages`;
 var IRRELEVANT_PATHS = ["node_modules/.pnpm"];
 var UNSUPPORTED_DIRECTORIES = /* @__PURE__ */ new Set(["tests"]);
-var CWD = process.cwd();
 function cssPathFor(fileName) {
   let withoutExt = withoutExtension(fileName);
   let cssPath = withoutExt + ".css";
@@ -162,8 +162,7 @@ function getSeen(sourcePath) {
     }
   }
 }
-function findWorkspacePath(sourcePath, options) {
-  let cwd = options?.cwd ?? CWD;
+function findWorkspacePath(sourcePath) {
   if (sourcePath.includes(EMBROIDER_3_REWRITTEN_APP_PATH)) {
     sourcePath = sourcePath.split(EMBROIDER_3_REWRITTEN_APP_PATH)[0];
   }
@@ -179,7 +178,7 @@ function findWorkspacePath(sourcePath, options) {
   if (isWorkspace) {
     return sourcePath;
   }
-  const packageJsonPath = findPackageJsonUp(sourcePath, { cwd });
+  const packageJsonPath = (0, import_package_up.packageUpSync)({ cwd: sourcePath });
   if (!packageJsonPath) {
     throw new Error(`Could not determine project for ${sourcePath}`);
   }
@@ -187,22 +186,6 @@ function findWorkspacePath(sourcePath, options) {
   SEEN.add(workspacePath);
   return workspacePath;
 }
-function findPackageJsonUp(startPath, options) {
-  let cwd = options?.cwd ?? CWD;
-  let parts = startPath.split("/");
-  for (let i = parts.length - 1; i > 1; i--) {
-    let toCheck = parts.slice(0, i).join("/");
-    let packageJson = import_node_path.default.join(toCheck, "package.json");
-    let exists = import_node_fs.default.existsSync(packageJson);
-    if (exists) {
-      return packageJson;
-    }
-    if (toCheck === cwd) {
-      break;
-    }
-  }
-  return null;
-}
 var MANIFEST_CACHE = /* @__PURE__ */ new Map();
 function moduleName(sourcePath) {
   const workspace = findWorkspacePath(sourcePath);
@@ -818,4 +801,4 @@ function createPlugin(config) {
   scopedCssUnplugin,
   templatePlugin
 });
-//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc3JjL2J1aWxkL2luZGV4LmpzIiwgIi4uLy4uL3NyYy9idWlsZC9iYWJlbC1wbHVnaW4uanMiLCAiLi4vLi4vc3JjL2xpYi9wYXRoL3V0aWxzLmpzIiwgIi4uLy4uL3NyYy9saWIvcGF0aC9oYXNoLWZyb20tbW9kdWxlLXBhdGguanMiLCAiLi4vLi4vc3JjL2xpYi9wYXRoL2hhc2gtZnJvbS1hYnNvbHV0ZS1wYXRoLmpzIiwgIi4uLy4uL3NyYy9idWlsZC9zY29wZWQtY3NzLXVucGx1Z2luLmpzIiwgIi4uLy4uL3NyYy9saWIvZ2V0Q2xhc3Nlc1RhZ3NGcm9tQ3NzLmpzIiwgIi4uLy4uL3NyYy9saWIvaXNJbnNpZGVHbG9iYWwuanMiLCAiLi4vLi4vc3JjL2xpYi9yZXBsYWNlSGJzSW5Kcy5qcyIsICIuLi8uLi9zcmMvbGliL3Jld3JpdGVDc3MuanMiLCAiLi4vLi4vc3JjL2xpYi9yZXdyaXRlSGJzLmpzIiwgIi4uLy4uL3NyYy9saWIvcmVuYW1lQ2xhc3MuanMiLCAiLi4vLi4vc3JjL2xpYi9jc3MvdXRpbHMuanMiLCAiLi4vLi4vc3JjL2xpYi9wYXRoL3RlbXBsYXRlLXRyYW5zZm9ybS1wYXRocy5qcyIsICIuLi8uLi9zcmMvYnVpbGQvdGVtcGxhdGUtcGx1Z2luLmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJleHBvcnQgeyBkZWZhdWx0IGFzIGJhYmVsUGx1Z2luIH0gZnJvbSAnLi9iYWJlbC1wbHVnaW4uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBzY29wZWRDc3NVbnBsdWdpbiB9IGZyb20gJy4vc2NvcGVkLWNzcy11bnBsdWdpbi5qcyc7XG5leHBvcnQgeyBjcmVhdGVQbHVnaW4gYXMgdGVtcGxhdGVQbHVnaW4gfSBmcm9tICcuL3RlbXBsYXRlLXBsdWdpbi5qcyc7XG4iLCAiaW1wb3J0IHsgSW1wb3J0VXRpbCB9IGZyb20gJ2JhYmVsLWltcG9ydC11dGlsJztcbmltcG9ydCB7IGV4aXN0c1N5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQgbm9kZVBhdGggZnJvbSAncGF0aCc7XG5cbmltcG9ydCB7IGNzc1BhdGhGb3IsIGlzUmVsZXZhbnRGaWxlIH0gZnJvbSAnLi4vbGliL3BhdGgvdXRpbHMuanMnO1xuXG5mdW5jdGlvbiBfaXNSZWxldmFudEZpbGUoc3RhdGUsIGN3ZCkge1xuICBsZXQgZmlsZU5hbWUgPSBzdGF0ZS5maWxlLm9wdHMuZmlsZW5hbWU7XG4gIGxldCBhZGRpdGlvbmFsUm9vdHMgPSBzdGF0ZS5vcHRzPy5hZGRpdGlvbmFsUm9vdHM7XG5cbiAgcmV0dXJuIGlzUmVsZXZhbnRGaWxlKGZpbGVOYW1lLCB7XG4gICAgYWRkaXRpb25hbFJvb3RzLFxuICAgIGN3ZCxcbiAgfSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHthbnl9IGVudiAtIGJhYmVsIHBsdWdpbiBlbnYsIGVudi50eXBlcyBpcyBtb3N0IGNvbW1vbmx5IHVzZWQgKGVzcCBpbiBUUylcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gdGhlIG9wdGlvbnMgZm9yIHNjb3BlZC1jc3MgLS0gdGhpcyBpcyBhbHNvIGF2YWlsYWJsZSBpbiBlYWNoIHZpc2l0b3IncyBzdGF0ZS5vcHRzXG4gKiBAcGFyYW0ge3N0cmluZ30gd29ya2luZ0RpcmVjdG9yeVxuICovXG5leHBvcnQgZGVmYXVsdCAoZW52LCBvcHRpb25zLCB3b3JraW5nRGlyZWN0b3J5KSA9PiB7XG4gIC8qKlxuICAgKiBUaGlzIGJhYmVsIHBsdWdpbiBkb2VzIHRocmVlIHRoaW5nczpcbiAgICogLSByZW1vdmVzIHRoZSBpbXBvcnQgb2Ygc2NvcGVkQ2xhc3MsIGlmIGl0IGV4aXN0c1xuICAgKiAgIC0gaWYgc2NvcGVkQ2xhc3Mgd2FzIGltcG9ydGVkLCBpdCBpcyByZW1vdmVkIGZyb20gYW55IGNvbXBvbmVudCdzIFwic2NvcGUgYmFnXCJcbiAgICogICAgICh0aGUgc2NvcGUgYmFnIGJlaW5nIGEgbG93LWxldmVsIG9iamVjdCB1c2VkIGZvciBwYXNzaW5nIHdoYXQgaXMgXCJpbiBzY29wZVwiIGZvciBhIGNvbXBvbmVudClcbiAgICogLSBhZGRzIGFuIGltcG9ydCB0byB0aGUgQ1NTIGZpbGUsIGlmIGl0IGV4aXN0c1xuICAgKi9cbiAgcmV0dXJuIHtcbiAgICB2aXNpdG9yOiB7XG4gICAgICBQcm9ncmFtOiB7XG4gICAgICAgIGVudGVyKHBhdGgsIHN0YXRlKSB7XG4gICAgICAgICAgaWYgKCFfaXNSZWxldmFudEZpbGUoc3RhdGUsIHdvcmtpbmdEaXJlY3RvcnkpKSB7XG4gICAgICAgICAgICBzdGF0ZS5jYW5Ta2lwID0gdHJ1ZTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHN0YXRlLmltcG9ydFV0aWwgPSBuZXcgSW1wb3J0VXRpbChlbnYsIHBhdGgpO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIEltcG9ydERlY2xhcmF0aW9uKHBhdGgsIHN0YXRlKSB7XG4gICAgICAgIGlmIChzdGF0ZS5jYW5Ta2lwKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhdGgubm9kZS5zb3VyY2UudmFsdWUgPT09ICdlbWJlci1zY29wZWQtY3NzJykge1xuICAgICAgICAgIGxldCBzcGVjaWZpZXIgPSBwYXRoLm5vZGUuc3BlY2lmaWVycy5maW5kKFxuICAgICAgICAgICAgKHgpID0+IHguaW1wb3J0ZWQubmFtZSA9PT0gJ3Njb3BlZENsYXNzJyxcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgaWYgKHNwZWNpZmllcikge1xuICAgICAgICAgICAgc3RhdGUuZmlsZS5vcHRzLmltcG9ydGVkU2NvcGVkQ2xhc3MgPSBzcGVjaWZpZXIubG9jYWwubmFtZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc3BlY2lmaWVyLmxvY2FsLm5hbWUgIT09ICdzY29wZWRDbGFzcycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgYFRoZSBzY29wZWRDbGFzcyBpbXBvcnQgaXMgYSBwc3VlZG8taGVscGVyLCBhbmQgbWF5IG5vdCBiZSByZW5hbWVkIGFzIGl0IGlzIHJlbW92ZWQgYXQgYnVpbGQgdGltZS5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBwYXRoLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBPbmx5IGluIHN0cmljdCBtb2RlLCBkbyB3ZSBjYXJlIGFib3V0IHJlbW9uaW5nIHRoZSBzY29wZSBiYWcgcmVmZXJlbmNlXG4gICAgICAgKi9cbiAgICAgIE9iamVjdFByb3BlcnR5KHBhdGgsIHN0YXRlKSB7XG4gICAgICAgIGlmICghc3RhdGUuZmlsZS5vcHRzPy5pbXBvcnRlZFNjb3BlZENsYXNzKSByZXR1cm47XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHBhdGgubm9kZS52YWx1ZS50eXBlID09PSAnSWRlbnRpZmllcicgJiZcbiAgICAgICAgICBwYXRoLm5vZGUudmFsdWUubmFtZSA9PT0gc3RhdGUuZmlsZS5vcHRzPy5pbXBvcnRlZFNjb3BlZENsYXNzXG4gICAgICAgICkge1xuICAgICAgICAgIHBhdGgucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIElmIHRoZXJlIGlzIGEgQ1NTIGZpbGUsIEFORCBhIGNvcnJlc3BvbmRpbmcgdGVtcGxhdGUsXG4gICAgICAgKiB3ZSBjYW4gaW1wb3J0IHRoZSBDU1MgdG8gdGhlbiBkZWZlciB0byB0aGUgQ1NTIGxvYWRlclxuICAgICAgICogb3Igb3RoZXIgQ1NTIHByb2Nlc3NpbmcgdG8gaGFuZGxlIHRoZSBwb3N0Zml4aW5nXG4gICAgICAgKi9cbiAgICAgIENhbGxFeHByZXNzaW9uKHBhdGgsIHN0YXRlKSB7XG4gICAgICAgIGlmIChzdGF0ZS5jYW5Ta2lwKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgbm9kZSA9IHBhdGgubm9kZTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgbm9kZS5jYWxsZWUubmFtZSA9PT0gJ3ByZWNvbXBpbGVUZW1wbGF0ZScgfHxcbiAgICAgICAgICBub2RlLmNhbGxlZS5uYW1lID09PSAnaGJzJyB8fFxuICAgICAgICAgIG5vZGUuY2FsbGVlLm5hbWUgPT09ICdjcmVhdGVUZW1wbGF0ZUZhY3RvcnknXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID1cbiAgICAgICAgICAgIHN0YXRlLmZpbGUub3B0cy5zb3VyY2VGaWxlTmFtZSB8fCBzdGF0ZS5maWxlLm9wdHMuZmlsZW5hbWU7XG5cbiAgICAgICAgICBsZXQgY3NzUGF0aCA9IGNzc1BhdGhGb3IoZmlsZU5hbWUpO1xuXG4gICAgICAgICAgaWYgKGV4aXN0c1N5bmMoY3NzUGF0aCkpIHtcbiAgICAgICAgICAgIGxldCBiYXNlQ1NTID0gbm9kZVBhdGguYmFzZW5hbWUoY3NzUGF0aCk7XG5cbiAgICAgICAgICAgIHN0YXRlLmltcG9ydFV0aWwuaW1wb3J0Rm9yU2lkZUVmZmVjdChgLi8ke2Jhc2VDU1N9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0sXG4gIH07XG59O1xuIiwgImltcG9ydCBhc3NlcnQgZnJvbSAnbm9kZTphc3NlcnQnO1xuaW1wb3J0IGZzU3luYyBmcm9tICdub2RlOmZzJztcbmltcG9ydCBwYXRoIGZyb20gJ25vZGU6cGF0aCc7XG5cbmltcG9ydCB7IGhhc2hGcm9tQWJzb2x1dGVQYXRoIH0gZnJvbSAnLi9oYXNoLWZyb20tYWJzb2x1dGUtcGF0aC5qcyc7XG5pbXBvcnQgeyBoYXNoRnJvbU1vZHVsZVBhdGggfSBmcm9tICcuL2hhc2gtZnJvbS1tb2R1bGUtcGF0aC5qcyc7XG5cbmV4cG9ydCB7IGhhc2hGcm9tQWJzb2x1dGVQYXRoIH0gZnJvbSAnLi9oYXNoLWZyb20tYWJzb2x1dGUtcGF0aC5qcyc7XG5leHBvcnQgeyBoYXNoRnJvbU1vZHVsZVBhdGggfSBmcm9tICcuL2hhc2gtZnJvbS1tb2R1bGUtcGF0aC5qcyc7XG5cbmNvbnN0IEVNQlJPSURFUl9ESVIgPSAnbm9kZV9tb2R1bGVzLy5lbWJyb2lkZXInO1xuY29uc3QgRU1CUk9JREVSXzNfUkVXUklUVEVOX0FQUF9QQVRIID0gYCR7RU1CUk9JREVSX0RJUn0vcmV3cml0dGVuLWFwcGA7XG5jb25zdCBFTUJST0lERVJfM19SRVdSSVRURU5fQVBQX0FTU0VUUyA9IGAke0VNQlJPSURFUl8zX1JFV1JJVFRFTl9BUFBfUEFUSH0vYXNzZXRzYDtcbmNvbnN0IEVNQlJPSURFUl8zX1JFV1JJVFRFTl9QQUNLQUdFUyA9IGAke0VNQlJPSURFUl9ESVJ9L3Jld3JpdHRlbi1wYWNrYWdlc2A7XG5jb25zdCBJUlJFTEVWQU5UX1BBVEhTID0gWydub2RlX21vZHVsZXMvLnBucG0nXTtcbmNvbnN0IFVOU1VQUE9SVEVEX0RJUkVDVE9SSUVTID0gbmV3IFNldChbJ3Rlc3RzJ10pO1xuXG5jb25zdCBDV0QgPSBwcm9jZXNzLmN3ZCgpO1xuXG4vKipcbiAqIFJlZ2FyZGxlc3Mgb2Ygd2hhdCB0aGUgZmlsZVBhdGggZm9ybWF0IGlzLFxuICogdGhpcyB3aWxsIHRyeSB0byByZXR1cm4gdGhlIGNvcnJlY3QgcG9zdGZpeC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZVBhdGhcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNoRnJvbShmaWxlUGF0aCkge1xuICBpZiAoZmlsZVBhdGguc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgcmV0dXJuIGhhc2hGcm9tQWJzb2x1dGVQYXRoKGZpbGVQYXRoKTtcbiAgfVxuXG4gIHJldHVybiBoYXNoRnJvbU1vZHVsZVBhdGgoZmlsZVBhdGgpO1xufVxuXG4vKipcbiAqIEJhc2VkIG9uIGVtYmVyJ3MgY29tcG9uZW50IGxvY2F0aW9uIGNvbnZlbnRpb25zLFxuICogdGhpcyBmdW5jdGlvbiB3aWxsIHByb3ZpZGUgYSBwYXRoIGZvciB3aGVyZSB3ZVxuICogZXhwZWN0IHRoZSBDU1MgdG8gbGl2ZS5cbiAqXG4gKiBGb3IgY28tbG9jYXRlZCBzdHJ1Y3R1cmU6XG4gKiAgIC0gY29tcG9uZW50cy9teS1jb21wb25lbnQuaGJzXG4gKiAgIC0gY29tcG9uZW50cy9teS1jb21wb25lbnQuY3NzXG4gKlxuICogRm9yIG5lc3RlZCBjby1sb2NhdGVkIHN0cnVjdHVyZVxuICogICAtIGNvbXBvbmVudHMvbXktY29tcG9uZW50L2Zvby5oYnNcbiAqICAgLSBjb21wb25lbnRzL215LWNvbXBvbmVudC9mb28uY3NzXG4gKlxuICogRm9yIFBvZHMgcm91dGVzIHN0cnVjdHVyZVxuICogICAtIHJvdXRlcy9teS1yb3V0ZS90ZW1wbGF0ZS57aGJzLGpzfVxuICogICAtIHJvdXRlcy9teS1yb3V0ZS9zdHlsZXMuY3NzXG4gKlxuICogRGVsaWJlcmF0ZWx5IG5vdCBzdXBwb3J0ZWQ6XG4gKiAgIC0gY29tcG9uZW50cyB3LyBwb2RzIC0tIHRoaXMgaXMgZGVwcmVjYXRlZCBpbiA1LjEwXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGZpbGVOYW1lIC0gdGhlIGhicywganMsIGdqcywgZ3RzIG9yIHdoYXRldmVyIGNvLWxvY2F0ZWQgcGF0aC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IC0gZXhwZWN0ZWQgY3NzIHBhdGhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNzc1BhdGhGb3IoZmlsZU5hbWUpIHtcbiAgbGV0IHdpdGhvdXRFeHQgPSB3aXRob3V0RXh0ZW5zaW9uKGZpbGVOYW1lKTtcbiAgbGV0IGNzc1BhdGggPSB3aXRob3V0RXh0ICsgJy5jc3MnO1xuXG4gIGlmIChpc1BvZChmaWxlTmFtZSkpIHtcbiAgICBjc3NQYXRoID0gZmlsZU5hbWVcbiAgICAgIC5yZXBsYWNlKC90ZW1wbGF0ZVxcLmpzJC8sICdzdHlsZXMuY3NzJylcbiAgICAgIC5yZXBsYWNlKC90ZW1wbGF0ZVxcLmhicy8sICdzdHlsZXMuY3NzJyk7XG4gIH1cblxuICByZXR1cm4gY3NzUGF0aDtcbn1cblxuLyoqXG4gKiBOb3RlIHRoYXQgY29tcG9uZW50cyBpbiB0aGUgXCJwb2RzXCIgY29udmVudGlvbiB3aWxsXG4gKiBuZXZlciBiZSBzdXBwb3J0ZWQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGZpbGVQYXRoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BvZFRlbXBsYXRlKGZpbGVQYXRoKSB7XG4gIGlmIChmaWxlUGF0aC5pbmNsdWRlcygnL2NvbXBvbmVudHMvJykpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gZmlsZVBhdGguZW5kc1dpdGgoJ3RlbXBsYXRlLmpzJykgfHwgZmlsZVBhdGguZW5kc1dpdGgoJ3RlbXBsYXRlLmhicycpO1xufVxuXG4vKipcbiAqIE5vdGUgdGhhdCBjb21wb25lbnRzIGluIHRoZSBcInBvZHNcIiBjb252ZW50aW9uIHdpbGxcbiAqIG5ldmVyIGJlIHN1cHBvcnRlZC5cbiAqXG4gKiBDaGVja3MgaWYgYSBmaWxlIGVuZHMgd2l0aFxuICogLSB0ZW1wbGF0ZS5qc1xuICogLSB0ZW1wbGF0ZS5oYnNcbiAqIC0gc3R5bGVzLmNzc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlUGF0aFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNQb2QoZmlsZVBhdGgpIHtcbiAgaWYgKGZpbGVQYXRoLmluY2x1ZGVzKCcvY29tcG9uZW50cy8nKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChpc1BvZFRlbXBsYXRlKGZpbGVQYXRoKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGZpbGVQYXRoLmVuZHNXaXRoKCdzdHlsZXMuY3NzJyk7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlUGF0aFxuICogQHJldHVybnMgdGhlIHNhbWUgcGF0aCwgYnV0IHdpdGhvdXQgdGhlIGV4dGVuc2lvblxuICovXG5leHBvcnQgZnVuY3Rpb24gd2l0aG91dEV4dGVuc2lvbihmaWxlUGF0aCkge1xuICBsZXQgcGFyc2VkID0gcGF0aC5wYXJzZShmaWxlUGF0aCk7XG5cbiAgcmV0dXJuIHBhdGguam9pbihwYXJzZWQuZGlyLCBwYXJzZWQubmFtZSk7XG59XG5cbi8qKlxuICogRXhhbXBsZXMgZm9yIGZpbGVOYW1lXG4gKiAtIGFic29sdXRlIG9uLWRpc2sgcGF0aFxuICogLSBpbiB3ZWJwYWNrXG4gKiAgIC0gVVJMLWFic29sdXRlIHBhdGgsIHN0YXJ0aW5nIHdpdGggL1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlTmFtZVxuICogQHBhcmFtIHt7IGFkZGl0aW9uYWxSb290cz86IHN0cmluZ1tdOyBjd2Q6IHN0cmluZyB9fSBvcHRpb25zXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNSZWxldmFudEZpbGUoZmlsZU5hbWUsIHsgYWRkaXRpb25hbFJvb3RzLCBjd2QgfSkge1xuICBpZiAoZmlsZU5hbWUuc3RhcnRzV2l0aCgnL0BlbWJyb2lkZXInKSkgcmV0dXJuIGZhbHNlO1xuICBpZiAoSVJSRUxFVkFOVF9QQVRIUy5zb21lKChpKSA9PiBmaWxlTmFtZS5pbmNsdWRlcyhpKSkpIHJldHVybiBmYWxzZTtcblxuICBpZiAoZmlsZU5hbWUuaW5jbHVkZXMoJy9ub2RlX21vZHVsZXMvJykpIHtcbiAgICAvLyBpZiBhIGZpbGUgaXMgbm90IHRoZSBlbWJyb2lkZXIgY2FjaGUgZGlyZWN0b3J5XG4gICAgLy8gYW5kIGlzIGluIG5vZGVfbW9kdWxlcywgc2tpcCBpdC5cbiAgICBpZiAoIWZpbGVOYW1lLmluY2x1ZGVzKEVNQlJPSURFUl9ESVIpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gcmV3cml0dGVuIHBhY2thZ2VzIHNob3VsZCBoYXZlIGFscmVhZHkgYmVlbiBwcm9jZXNzZWQgYXQgdGhlaXIgb3duXG4gICAgLy8gcHVibGlzaCB0aW1lXG4gICAgaWYgKGZpbGVOYW1lLmluY2x1ZGVzKEVNQlJPSURFUl8zX1JFV1JJVFRFTl9QQUNLQUdFUykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBUaGVzZSBhcmUgYWxyZWFkeSB0aGUgYnVuZGxlZCBmaWxlcy5cbiAgICBpZiAoZmlsZU5hbWUuaW5jbHVkZXMoRU1CUk9JREVSXzNfUkVXUklUVEVOX0FQUF9BU1NFVFMpKSB7XG4gICAgICAvLyBub3Qgc3VwcG9ydGVkLCBuZXZlciB3aWxsIGJlXG4gICAgICBpZiAoZmlsZU5hbWUuZW5kc1dpdGgoYCR7RU1CUk9JREVSXzNfUkVXUklUVEVOX0FQUF9BU1NFVFN9L3Rlc3RzLmpzYCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBJZGVhbGx5LCB3ZSBuZXZlciBnZXQgaGVyZSAtLSBpbmRpY2F0ZXMgd2UncmUgbm90IGZpbHRlcmluZyBlZmZlY3RpdmVseSBpbiBiYWJlbFxuICAgICAgLy8gTk9URTogaWYgd2UgZ2V0IGhlcmUsIHdlJ3JlIHRyeWluZyB0byBvcGVyYXRlIG9uIGEgZmlsZSB0b28gbGF0ZS5cbiAgICAgIC8vICAgICAgIHdlIG5lZWQgU2NvcGVkQ1NTIHRvIG9wZXJhdGUgYXMgY2xvc2UgdG8gb3JpZ2luYWwgc291cmNlIGFzIHBvc3NpYmxlIC0tIG5vdCBvdXRwdXQgZmlsZXMuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgbGV0IHdvcmtzcGFjZSA9IGZpbmRXb3Jrc3BhY2VQYXRoKGZpbGVOYW1lKTtcblxuICBhc3NlcnQoY3dkLCBgY3dkIHdhcyBub3QgcGFzc2VkIHRvIGlzUmVsZXZhbnRGaWxlYCk7XG5cbiAgbGV0IG91cldvcmtzcGFjZSA9IGZpbmRXb3Jrc3BhY2VQYXRoKGN3ZCk7XG5cbiAgaWYgKHdvcmtzcGFjZSAhPT0gb3VyV29ya3NwYWNlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgbGV0IGxvY2FsID0gZmlsZU5hbWUucmVwbGFjZSh3b3Jrc3BhY2UsICcnKTtcbiAgbGV0IFssIC4uLnBhcnRzXSA9IGxvY2FsLnNwbGl0KCcvJykuZmlsdGVyKEJvb2xlYW4pO1xuXG4gIGlmIChVTlNVUFBPUlRFRF9ESVJFQ1RPUklFUy5oYXMocGFydHNbMF0pKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vc3RseSBwb2RzIHN1cHBvcnQuXG4gICAqIGZvbGtzIG5lZWQgdG8gb3B0IGluIHRvIHBvZHMgKHJvdXRlcyksIGJlY2F1c2UgZXZlcnkgcG9kcyBhcHAgY2FuIGJlIGNvbmZpZ3VyZWQgZGlmZmVyZW50bHlcbiAgICovXG4gIGxldCByb290cyA9IFsnL2NvbXBvbmVudHMvJywgJy90ZW1wbGF0ZXMvJywgLi4uKGFkZGl0aW9uYWxSb290cyB8fCBbXSldO1xuXG4gIGlmICghcm9vdHMuc29tZSgocm9vdCkgPT4gZmlsZU5hbWUuaW5jbHVkZXMocm9vdCkpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYWNrYWdlU2NvcGVkUGF0aFRvTW9kdWxlUGF0aChwYWNrYWdlU2NvcGVkUGF0aCkge1xuICAvKipcbiAgICogKkJ5IGNvbnZlbnRpb24qLCBgc3JjYCBpcyBvbWl0dGVkIGZyb20gY29tcG9uZW50IHBhdGhzLlxuICAgKiBXZSBjYW4gcmVmbGVjdCB0aGUgc2FtZSBiZWhhdmlvciBieSByZXBsYWNpbmcgc3JjL1xuICAgKiB3aXRoIGFuIGVtcHR5IHN0cmluZy5cbiAgICpcbiAgICogQ1NTIGlzbid0IGVtaXR0ZWQgYXMgYSBjby1sb2NhdGVkIG1vZHVsZSwgYnV0XG4gICAqIHRvIGtlZXAgY29udmVudGlvbnMgY29uc2lzdGVudCBhY3Jvc3MgbGFuZ3VhZ2VzLFxuICAgKiB3ZSBjYW4gcHJldGVuZCBpdCBpcy5cbiAgICpcbiAgICogQW55IGN1c3RvbWl6YXRpb24gYmV5b25kIHJlbW92aW5nIGBzcmNgIGFuZCBgYXBwYCBpcyBwb3RlbnRpYWxseSBjb25mdXNpbmcuXG4gICAqIElmIHdlIG5lZWQgZnVydGhlciBjdXN0b21pemF0aW9ucywgd2UnbGwgd2FudCB0byBtYXRjaCBvbiBgZXhwb3J0c2AgaW4gdGhlXG4gICAqIGNvcnJlc3BvbmRpbmcgcGFja2FnZS5qc29uXG4gICAqL1xuICBsZXQgcGFja2FnZVJlbGF0aXZlID0gcGFja2FnZVNjb3BlZFBhdGgucmVwbGFjZSgvXlxcL3NyY1xcLy8sICcvJyk7XG5cbiAgbGV0IHBhcnNlZCA9IHBhdGgucGFyc2UocGFja2FnZVJlbGF0aXZlKTtcblxuICBpZiAoaXNQb2QocGFja2FnZVJlbGF0aXZlKSkge1xuICAgIC8qKlxuICAgICAqIEZvciBwb2RzLCB3ZSBjaG9wIG9mZiB0aGUgd2hvbGUgZmlsZSwgYW5kIHVzZSB0aGUgZGlyIG5hbWUgYXMgdGhlIFwibW9kdWxlUGF0aFwiXG4gICAgICovXG4gICAgcmV0dXJuIHBhcnNlZC5kaXI7XG4gIH1cblxuICAvKipcbiAgICogSWYgYW4gZXh0ZW5zaW9uIGlzIHBhc3NlZCwgcmVtb3ZlIGl0LlxuICAgKiBXaGVuIHVzaW5nIHBhY2thZ2VycywgZm9sa3MgYXJlIHVzZWQgdG8gbm90IGhhdmluZyB0byBzcGVjaWZ5IGV4dGVuc2lvbnMgZm9yIGZpbGVzLlxuICAgKiBTaW5jZSB3ZSBkb24ndCBldmVuIGVtaXQgY3NzIGZpbGVzIGNvLWxvY2F0ZWQgdG8gZWFjaCBtb2R1bGUsXG4gICAqIHRoaXMgaGVscHMgdXMgbm90IGNvbnZleSBhIGxpZSB0aGF0IGEgZmlsZSBtYXkgZXhpc3QgaW4gYXQgcnVudGltZS5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUgYDxtb2R1bGUtbmFtZT4vY29tcG9uZW50cy9idXR0b25gLlxuICAgKiBJdCBkb2Vzbid0IG1hdHRlciB3aGF0IHRoZSBleHRlbnNpb24gaXMsIGJlY2F1c2UgeW91IGNhbiBvbmx5IGhhdmUgb25lIGNzcyBmaWxlXG4gICAqIGZvciB0aGUgYnV0dG9uIG1vZHVsZSBhbnl3YXkuXG4gICAqL1xuICBsZXQgbG9jYWxQYWNrYWdlclN0eWxlUGF0aCA9IHBhdGguam9pbihwYXJzZWQuZGlyLCBwYXJzZWQubmFtZSk7XG5cbiAgcmV0dXJuIGxvY2FsUGFja2FnZXJTdHlsZVBhdGg7XG59XG5cbi8qKlxuICogcmV0dXJucyB0aGUgYXBwLW1vZHVsZSBwYXRoIG9mIHRoZSBzb3VyY2UgZmlsZVxuICpcbiAqIFRoaXMgYXNzdW1lcyBub3JtYWwgZW1iZXIgYXBwIGNvbnZlbnRpb25zXG4gKlxuICogd2hpY2ggaXMgYDxwYWNrYWdlLmpzb24jbmFtZT4vcGF0aC10by1maWxlYFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwUGF0aChzb3VyY2VQYXRoKSB7XG4gIGxldCB3b3Jrc3BhY2VQYXRoID0gZmluZFdvcmtzcGFjZVBhdGgoc291cmNlUGF0aCk7XG4gIGxldCBuYW1lID0gbW9kdWxlTmFtZShzb3VyY2VQYXRoKTtcblxuICAvKipcbiAgICogIFVuZGVyIGVtYnJvaWRlciBidWlsZHMsIHRoZSBzcGVjLWNvbXBsaWFudCB2ZXJzaW9uIG9mIHRoZSBhcHBcbiAgICogaGFzIGFsbCB0aGUgZmlsZXMgdW5kZXIgYSBmb2xkZXIgd2hpY2ggcmVwcmVzZW50cyB0aGUgcGFja2FnZSBuYW1lLFxuICAgKiByYXRoZXIgdGhhbiBcImFwcFwiLlxuICAgKi9cbiAgbGV0IHBhY2thZ2VSZWxhdGl2ZSA9IHNvdXJjZVBhdGgucmVwbGFjZSh3b3Jrc3BhY2VQYXRoLCAnJyk7XG5cbiAgLyoqXG4gICAqIEJ1dCB3ZSBhbHNvIGRvbid0IHdhbnQgJ2FwcCcgLS0gd2hpY2ggaXMgcHJlc2VudCBpbiB0aGUgdjEgYWRkb24gcGlwZWxpbmVcbiAgICovXG4gIHBhY2thZ2VSZWxhdGl2ZSA9IHBhY2thZ2VSZWxhdGl2ZS5yZXBsYWNlKGAvYXBwL2AsIGAvYCk7XG5cbiAgLyoqXG4gICAqIGFsc28gYWxzbywgd2Uga25vdyB0aGF0IHRoZSByZS13cml0dGVuIGFwcCBzdHJ1Y3R1cmUgaW4gZW1icm9pZGVyQHYzXG4gICAqIGlzIGV4dHJhbmVvdXMsIGFuZCB3ZSBjYW4gY29sbGFwc2UgaXRcbiAgICovXG4gIHBhY2thZ2VSZWxhdGl2ZSA9IHBhY2thZ2VSZWxhdGl2ZS5yZXBsYWNlKFxuICAgIGAke0VNQlJPSURFUl8zX1JFV1JJVFRFTl9BUFBfUEFUSH0vYCxcbiAgICAnLycsXG4gICk7XG5cbiAgbGV0IGxvY2FsUGFja2FnZXJTdHlsZVBhdGggPSBwYWNrYWdlU2NvcGVkUGF0aFRvTW9kdWxlUGF0aChwYWNrYWdlUmVsYXRpdmUpO1xuXG4gIHJldHVybiBgJHtuYW1lfSR7bG9jYWxQYWNrYWdlclN0eWxlUGF0aH1gO1xufVxuXG4vKipcbiAqIFRvIGF2b2lkIGhpdHRpbmcgdGhlIGZpbGVzeXNldG0sIHdlJ2xsIHN0b3JlIGFsbCBmb3VuZFxuICogcHJvamVjdCBwYXRocyBiZXJlLCBzbyB3ZSBjYW4sIGluIG1lbW9yeSxcbiAqIGdldCB0aGUgZm9sZGVyIHdoZXJlIGEgcGFja2FnZS5qc29uIGV4aXN0cywgcmF0aGVyIHRoYW5cbiAqIGhpdCB0aGUgZmlsZSBzeXN0ZW0gZXZlcnkgdGltZS5cbiAqL1xuY29uc3QgU0VFTiA9IG5ldyBTZXQoKTtcblxuZnVuY3Rpb24gZ2V0U2Vlbihzb3VyY2VQYXRoKSB7XG4gIGlmIChTRUVOLmhhcyhzb3VyY2VQYXRoKSkgcmV0dXJuIHNvdXJjZVBhdGg7XG5cbiAgbGV0IHBhcnRzID0gc291cmNlUGF0aC5zcGxpdCgnLycpO1xuXG4gIGZvciAobGV0IGkgPSBwYXJ0cy5sZW5ndGggLSAxOyBpID4gMTsgaS0tKSB7XG4gICAgbGV0IHRvQ2hlY2sgPSBwYXJ0cy5zbGljZSgwLCBpKS5qb2luKCcvJyk7XG5cbiAgICBsZXQgc2VlbiA9IFNFRU4uaGFzKHRvQ2hlY2spO1xuXG4gICAgaWYgKHNlZW4pIHtcbiAgICAgIHJldHVybiB0b0NoZWNrO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZFdvcmtzcGFjZVBhdGgoc291cmNlUGF0aCwgb3B0aW9ucykge1xuICBsZXQgY3dkID0gb3B0aW9ucz8uY3dkID8/IENXRDtcblxuICBpZiAoc291cmNlUGF0aC5pbmNsdWRlcyhFTUJST0lERVJfM19SRVdSSVRURU5fQVBQX1BBVEgpKSB7XG4gICAgc291cmNlUGF0aCA9IHNvdXJjZVBhdGguc3BsaXQoRU1CUk9JREVSXzNfUkVXUklUVEVOX0FQUF9QQVRIKVswXTtcbiAgfVxuXG4gIGlmIChzb3VyY2VQYXRoLmVuZHNXaXRoKCcvJykpIHtcbiAgICBzb3VyY2VQYXRoID0gc291cmNlUGF0aC5yZXBsYWNlKC9cXC8kLywgJycpO1xuICB9XG5cbiAgbGV0IHNlZW4gPSBnZXRTZWVuKHNvdXJjZVBhdGgpO1xuXG4gIGlmIChzZWVuKSB7XG4gICAgcmV0dXJuIHNlZW47XG4gIH1cblxuICBsZXQgY2FuZGlkYXRlUGF0aCA9IHBhdGguam9pbihzb3VyY2VQYXRoLCAncGFja2FnZS5qc29uJyk7XG5cbiAgY29uc3QgaXNXb3Jrc3BhY2UgPSBmc1N5bmMuZXhpc3RzU3luYyhjYW5kaWRhdGVQYXRoKTtcblxuICBpZiAoaXNXb3Jrc3BhY2UpIHtcbiAgICByZXR1cm4gc291cmNlUGF0aDtcbiAgfVxuXG4gIGNvbnN0IHBhY2thZ2VKc29uUGF0aCA9IGZpbmRQYWNrYWdlSnNvblVwKHNvdXJjZVBhdGgsIHsgY3dkIH0pO1xuXG4gIGlmICghcGFja2FnZUpzb25QYXRoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZGV0ZXJtaW5lIHByb2plY3QgZm9yICR7c291cmNlUGF0aH1gKTtcbiAgfVxuXG4gIGNvbnN0IHdvcmtzcGFjZVBhdGggPSBwYXRoLmRpcm5hbWUocGFja2FnZUpzb25QYXRoKTtcblxuICBTRUVOLmFkZCh3b3Jrc3BhY2VQYXRoKTtcblxuICByZXR1cm4gd29ya3NwYWNlUGF0aDtcbn1cblxuZnVuY3Rpb24gZmluZFBhY2thZ2VKc29uVXAoc3RhcnRQYXRoLCBvcHRpb25zKSB7XG4gIGxldCBjd2QgPSBvcHRpb25zPy5jd2QgPz8gQ1dEO1xuICBsZXQgcGFydHMgPSBzdGFydFBhdGguc3BsaXQoJy8nKTtcblxuICBmb3IgKGxldCBpID0gcGFydHMubGVuZ3RoIC0gMTsgaSA+IDE7IGktLSkge1xuICAgIGxldCB0b0NoZWNrID0gcGFydHMuc2xpY2UoMCwgaSkuam9pbignLycpO1xuXG4gICAgbGV0IHBhY2thZ2VKc29uID0gcGF0aC5qb2luKHRvQ2hlY2ssICdwYWNrYWdlLmpzb24nKTtcbiAgICBsZXQgZXhpc3RzID0gZnNTeW5jLmV4aXN0c1N5bmMocGFja2FnZUpzb24pO1xuXG4gICAgaWYgKGV4aXN0cykge1xuICAgICAgcmV0dXJuIHBhY2thZ2VKc29uO1xuICAgIH1cblxuICAgIC8vIERvbid0IHRyYXZlcnNlIGFsbCB0aGUgd2F5IHRvIHRoZSByb290IG9mIHRoZSBmaWxlIHN5c3RlbS5cbiAgICBpZiAodG9DaGVjayA9PT0gY3dkKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuY29uc3QgTUFOSUZFU1RfQ0FDSEUgPSBuZXcgTWFwKCk7XG5cbi8qKlxuICogV2lsbCByZXR1cm4gdGhlIHBhY2thZ2UuanNvbiNuYW1lLCBvciBjb25maWcvZW52aXJvbm1lbnQjbW91ZGxlUHJlZml4IChpZiB2MSBhcHApXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHNvdXJjZVBhdGhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1vZHVsZU5hbWUoc291cmNlUGF0aCkge1xuICBjb25zdCB3b3Jrc3BhY2UgPSBmaW5kV29ya3NwYWNlUGF0aChzb3VyY2VQYXRoKTtcbiAgY29uc3QgbWFuaWZlc3QgPSBnZXRNYW5pZmVzdCh3b3Jrc3BhY2UpO1xuXG4gIGlmIChtYW5pZmVzdFsnZW1iZXItYWRkb24nXSkge1xuICAgIC8qKlxuICAgICAqIExpYnJhcmllcyBhcmUgbm90IGFsbG93ZWQgdG8gY3VzdG9taXplIHRoZWlyIG1vZHVsZSBuYW1lXG4gICAgICogdG8gYmUgZGlmZmVyZW50IGZyb20gdGhlaXIgcGFja2FnZSBuYW1lLlxuICAgICAqXG4gICAgICogKEl0J3MgYWxzbyBib25rZXJzIHRoYXQgdGhpcyBpcyBhbGxvd2VkIGZvciB2MSBhcHBzKVxuICAgICAqL1xuICAgIHJldHVybiBtYW5pZmVzdC5uYW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvciB2MSBhcHBzLCB3ZSBuZWVkIHRvIHJlZmVyZW5jZSB0aGUgY29uZmlnL2Vudmlyb25tZW50LmpzIGZpbGVcbiAgICogdG8gc2VlIGlmIHRoZSBtb2R1bGVQcmVmaXggc2V0dGluZyBkaWZmZXJzIGZyb20gbWFuaWZlc3QubmFtZTtcbiAgICovXG4gIGxldCBlbnZpcm9ubWVudEpTID0gcGF0aC5qb2luKHdvcmtzcGFjZSwgJ2NvbmZpZy9lbnZpcm9ubWVudC5qcycpO1xuXG4gIC8qKlxuICAgKiBOT1RFOiB0aGUgZW52aXJvbm1lbnQuanMgaXMgYSBjb21tb25KUyBmaWxlLCBzbyB3ZSBjYW4gc3luY2hyb25vdXNseSByZXF1aXJlIGl0XG4gICAqXG4gICAqIFRPRE86IGlmIHdlIGhhdmUgaXNzdWVzIHdpdGggbG9hZGluZyB0aGlzIGZpbGUgbGF0ZXIgd2Ugc2hvdWxkIHByb2JhYmx5IGp1c3QgcnVuIGpzY29kZXNoaWZ0IG9uIGl0XG4gICAqICAgICAgIGJ1dCB0aGF0IGNvdWxkIGFsbG93IHVzIHRvIGJlIGJyaXR0bGUgaW4gZGlmZmVyZW50IHdheXMsIGxpa2UgaWYgZm9sa3Mgc3RyYXkgZnJvbSB0aGUgd2F5IHRoZVxuICAgKiAgICAgICBmaWxlIGlzIGxhaWQgb3V0IGZyb20gdGhlIGJsdWVwcmludCBkZWZhdWx0cy5cbiAgICovXG4gIGlmIChmc1N5bmMuZXhpc3RzU3luYyhlbnZpcm9ubWVudEpTKSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZiAtLSB0aGlzIGV4aXN0c1xuICAgIGNvbnN0IGVudkZuID0gcmVxdWlyZShlbnZpcm9ubWVudEpTKTtcbiAgICBjb25zdCBlbnYgPSBlbnZGbignZW1iZXItc2NvcGVkLWNzcycpO1xuXG4gICAgcmV0dXJuIGVudi5tb2R1bGVQcmVmaXggfHwgbWFuaWZlc3QubmFtZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGYWxsYmFjayB0byB0aGUgdHJ1ZVx1MjEyMiBtb2R1bGVcdTIxMjIgbmFtZS5cbiAgICovXG4gIHJldHVybiBtYW5pZmVzdC5uYW1lO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB3b3Jrc3BhY2VcbiAqL1xuZnVuY3Rpb24gZ2V0TWFuaWZlc3Qod29ya3NwYWNlKSB7XG4gIGxldCBleGlzdGluZyA9IE1BTklGRVNUX0NBQ0hFLmdldCh3b3Jrc3BhY2UpO1xuXG4gIGlmIChleGlzdGluZykge1xuICAgIHJldHVybiBleGlzdGluZztcbiAgfVxuXG4gIGxldCBidWZmZXIgPSBmc1N5bmMucmVhZEZpbGVTeW5jKHBhdGguam9pbih3b3Jrc3BhY2UsICdwYWNrYWdlLmpzb24nKSk7XG4gIGxldCBjb250ZW50ID0gYnVmZmVyLnRvU3RyaW5nKCk7XG4gIGxldCBqc29uID0gSlNPTi5wYXJzZShjb250ZW50KTtcblxuICBNQU5JRkVTVF9DQUNIRS5zZXQod29ya3NwYWNlLCBqc29uKTtcblxuICByZXR1cm4ganNvbjtcbn1cbiIsICJpbXBvcnQgbWQ1IGZyb20gJ2JsdWVpbXAtbWQ1JztcblxuLyoqXG4gKiBUaGUgaW50ZW50IG9mIHRoaXMgZnVuY3Rpb24gaXMgdG8gZ2VuZXJhdGUgdGhlIHN1ZmZpeC9wb3N0Zml4IGZvciB0aGVcbiAqIGNzcyBjbGFzc2VzLCBiYXNlZCBvbiB0aGUgbW9kdWxlLXNjb3BlZCBwYXRoIG5hbWUuXG4gKlxuICogZm9yIGV4YW1wbGUsXG4gKiAgICBoYXNoKCdteS1hcHAvY29tcG9uZW50cy9mb28nKVxuICogIGluc3RlYWQgb2ZcbiAqICAgIGhhc2goJ2FwcC9jb21wb25lbnRzL2ZvbycpXG4gKlxuICogICh1bmxlc3MgeW91ciBhcHAgbmFtZSBpcyAnYXBwJylcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbW9kdWxlUGF0aFxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc2gobW9kdWxlUGF0aCkge1xuICByZXR1cm4gJ2UnICsgbWQ1KG1vZHVsZVBhdGgpLnN1YnN0cmluZygwLCA4KTtcbn1cblxuXG5leHBvcnQgY29uc3QgaGFzaEZyb21Nb2R1bGVQYXRoID0gaGFzaDtcbiIsICJpbXBvcnQgeyBoYXNoIH0gZnJvbSAnLi9oYXNoLWZyb20tbW9kdWxlLXBhdGguanMnO1xuaW1wb3J0IHsgYXBwUGF0aCB9IGZyb20gJy4vdXRpbHMuanMnO1xuXG5leHBvcnQgeyBoYXNoIH0gZnJvbSAnLi9oYXNoLWZyb20tbW9kdWxlLXBhdGguanMnO1xuXG5leHBvcnQgZnVuY3Rpb24gaGFzaEZyb21BYnNvbHV0ZVBhdGgoYWJzb2x1dGVQYXRoKSB7XG4gIC8qKlxuICAgKiBUaGUgd2hvbGUgb2YgYGFwcFBhdGhgIHVsdGltYXRlbHkgdHJhbnNmb3JtcyB0aGUgYGFic29sdXRlUGF0aGBcbiAgICogaW50byB0aGUgZXhhY3Qgc3RyaW5nIHRoYXQgZm9sa3Mgd2lsbCBwYXNzIHRvIGByZWxhdGl2ZVBhdGhgXG4gICAqIGF0IHJ1bnRpbWUuXG4gICAqL1xuICBjb25zdCBtb2R1bGVQYXRoID0gYXBwUGF0aChhYnNvbHV0ZVBhdGgpO1xuICBjb25zdCBwb3N0Zml4ID0gaGFzaChtb2R1bGVQYXRoKTtcblxuICByZXR1cm4gcG9zdGZpeDtcbn1cbiIsICJpbXBvcnQgeyBleGlzdHNTeW5jIH0gZnJvbSAnbm9kZTpmcyc7XG5pbXBvcnQgeyByZWFkRmlsZSB9IGZyb20gJ25vZGU6ZnMvcHJvbWlzZXMnO1xuaW1wb3J0IHBhdGggZnJvbSAnbm9kZTpwYXRoJztcbmltcG9ydCBwcm9jZXNzIGZyb20gJ25vZGU6cHJvY2Vzcyc7XG5cbmltcG9ydCB7IGNyZWF0ZVVucGx1Z2luIH0gZnJvbSAndW5wbHVnaW4nO1xuXG5pbXBvcnQgZ2V0Q2xhc3Nlc1RhZ3NGcm9tQ3NzIGZyb20gJy4uL2xpYi9nZXRDbGFzc2VzVGFnc0Zyb21Dc3MuanMnO1xuaW1wb3J0IHsgaGFzaEZyb21BYnNvbHV0ZVBhdGggfSBmcm9tICcuLi9saWIvcGF0aC91dGlscy5qcyc7XG5pbXBvcnQgcmVwbGFjZUhic0luSnMgZnJvbSAnLi4vbGliL3JlcGxhY2VIYnNJbkpzLmpzJztcbmltcG9ydCByZXdyaXRlQ3NzIGZyb20gJy4uL2xpYi9yZXdyaXRlQ3NzLmpzJztcbmltcG9ydCByZXdyaXRlSGJzIGZyb20gJy4uL2xpYi9yZXdyaXRlSGJzLmpzJztcblxuZnVuY3Rpb24gaXNKc0ZpbGUoaWQpIHtcbiAgcmV0dXJuIChcbiAgICBpZC5lbmRzV2l0aCgnLmpzJykgfHxcbiAgICBpZC5lbmRzV2l0aCgnLnRzJykgfHxcbiAgICBpZC5lbmRzV2l0aCgnLmdqcycpIHx8XG4gICAgaWQuZW5kc1dpdGgoJy5ndHMnKVxuICApO1xufVxuXG5mdW5jdGlvbiBpc0hic0ZpbGUoaWQpIHtcbiAgcmV0dXJuIGlkLmVuZHNXaXRoKCcuaGJzJyk7XG59XG5cbmZ1bmN0aW9uIGlzQ3NzRmlsZShpZCkge1xuICByZXR1cm4gaWQuZW5kc1dpdGgoJy5jc3MnKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gdHJhbnNmb3JtSnNGaWxlKGNvZGUsIGlkKSB7XG4gIGNvbnN0IGNzc1BhdGggPSBpZC5lbmRzV2l0aCgnLmhicycpXG4gICAgPyBpZC5yZXBsYWNlKC9cXC5oYnMkLywgJy5jc3MnKVxuICAgIDogaWQucmVwbGFjZSgvKFxcLmhicyk/XFwuKGpzfHRzfGdqc3xndHMpJC8sICcuY3NzJyk7XG4gIGNvbnN0IGNzc0ZpbGVOYW1lID0gcGF0aC5iYXNlbmFtZShjc3NQYXRoKTtcblxuICBjb25zdCBjc3NFeGlzdHMgPSBleGlzdHNTeW5jKGNzc1BhdGgpO1xuICBsZXQgY3NzO1xuXG4gIGlmIChjc3NFeGlzdHMpIHtcbiAgICBjc3MgPSBhd2FpdCByZWFkRmlsZShjc3NQYXRoLCAndXRmOCcpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7XG4gICAgICBjb2RlLFxuICAgICAgbWFwOiBudWxsLFxuICAgIH07XG4gIH1cblxuICAvLyBhZGQgY3NzIGltcG9ydCBmb3IganMgYW5kIGdqcyBmaWxlc1xuICBjb2RlID0gYGltcG9ydCAnLi8ke2Nzc0ZpbGVOYW1lfSc7XFxuXFxuJHtjb2RlfWA7XG5cbiAgLy8gcmV3cml0ZSBoYnMgaW4ganMgaW4gY2FzZSBpdCBpcyBnanMgZmlsZSAoZm9yIGdqcyBmaWxlcyBoYnMgaXMgYWxyZWFkeSBpbiBqcyBmaWxlKVxuXG4gIGNvbnN0IHJld3JpdHRlbkNvZGUgPSByZXBsYWNlSGJzSW5Kcyhjb2RlLCAoaGJzLCBzY29wZWRDbGFzcykgPT4ge1xuICAgIGNvbnN0IHsgY2xhc3NlcywgdGFncyB9ID0gZ2V0Q2xhc3Nlc1RhZ3NGcm9tQ3NzKGNzcyk7XG4gICAgY29uc3QgcG9zdGZpeCA9IGhhc2hGcm9tQWJzb2x1dGVQYXRoKGNzc1BhdGgpO1xuICAgIGNvbnN0IHJld3JpdHRlbiA9IHJld3JpdGVIYnMoaGJzLCBjbGFzc2VzLCB0YWdzLCBwb3N0Zml4LCBzY29wZWRDbGFzcyk7XG5cbiAgICByZXR1cm4gcmV3cml0dGVuO1xuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGNvZGU6IHJld3JpdHRlbkNvZGUsXG4gICAgbWFwOiBudWxsLFxuICB9O1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1Dc3NGaWxlKGNvZGUsIGlkLCBsYXllck5hbWUpIHtcbiAgY29uc3QganNQYXRoID0gaWQucmVwbGFjZSgvXFwuY3NzJC8sICcuZ2pzJyk7XG4gIGNvbnN0IGd0c1BhdGggPSBpZC5yZXBsYWNlKC9cXC5jc3MkLywgJy5ndHMnKTtcbiAgY29uc3QgaGJzUGF0aCA9IGlkLnJlcGxhY2UoL1xcLmNzcyQvLCAnLmhicycpO1xuXG4gIGNvbnN0IGpzRXhpc3RzID0gZXhpc3RzU3luYyhqc1BhdGgpO1xuICBjb25zdCBndHNFeGlzdHMgPSBleGlzdHNTeW5jKGd0c1BhdGgpO1xuICBjb25zdCBoYnNFeGlzdHMgPSBleGlzdHNTeW5jKGhic1BhdGgpO1xuXG4gIGlmIChqc0V4aXN0cyB8fCBoYnNFeGlzdHMgfHwgZ3RzRXhpc3RzKSB7XG4gICAgY29uc3QgcG9zdGZpeCA9IGhhc2hGcm9tQWJzb2x1dGVQYXRoKGlkKTtcblxuICAgIGNvZGUgPSByZXdyaXRlQ3NzKGNvZGUsIHBvc3RmaXgsIHBhdGguYmFzZW5hbWUoaWQpLCBsYXllck5hbWUpO1xuICB9XG5cbiAgcmV0dXJuIGNvZGU7XG59XG5cbmZ1bmN0aW9uIGdhdGhlckNTU0ZpbGVzKGJ1bmRsZSkge1xuICBsZXQgY3NzRmlsZXMgPSBbXTtcblxuICBmb3IgKGxldCBhc3NldCBpbiBidW5kbGUpIHtcbiAgICBjb25zdCBjc3NBc3NldCA9IGFzc2V0LnJlcGxhY2UoJ2pzJywgJ2NzcycpO1xuXG4gICAgaWYgKCFhc3NldC5lbmRzV2l0aCgnanMnKSB8fCAhYnVuZGxlW2Nzc0Fzc2V0XSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKHByb2Nlc3MuZW52LmVudmlyb25tZW50ID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICBjc3NGaWxlcy5wdXNoKGJ1bmRsZVtjc3NBc3NldF0uc291cmNlKTtcbiAgICAgIGRlbGV0ZSBidW5kbGVbY3NzQXNzZXRdO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjc3NJbXBvcnQgPSBwYXRoLmJhc2VuYW1lKGFzc2V0LnJlcGxhY2UoJy5qcycsICcuY3NzJykpO1xuICAgICAgY29uc3QgaW1wb3J0TGluZSA9IGBpbXBvcnQgJy4vJHtjc3NJbXBvcnR9JztgO1xuXG4gICAgICBjb25zdCBjb2RlID0gYnVuZGxlW2Fzc2V0XS5jb2RlO1xuXG4gICAgICAvLyBhZGQgaW1wb3J0IHRvIGpzIGZpbGVzXG4gICAgICBpZiAoY29kZSAmJiBjb2RlLmluZGV4T2YoaW1wb3J0TGluZSkgPCAwKSB7XG4gICAgICAgIGJ1bmRsZVthc3NldF0uY29kZSA9IGAke2ltcG9ydExpbmV9XFxuYCArIGNvZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNzc0ZpbGVzO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVVbnBsdWdpbihcbiAgLyoqXG4gICAqIEB0eXBlZGVmIHtvYmplY3R9IE9wdGlvbnNcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtsYXllck5hbWVdIHRoZSBuYW1lIG9mIHRoZSBsYXllciB0byBwbGFjZSB0aGUgZ2VuZXJhdGVkIGNzcy4gRGVmYXVsdHMgdG8gXCJjb21wb25lbnRzXCJcbiAgICpcbiAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0aW9uc11cbiAgICovXG4gIChvcHRpb25zKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6ICdlbWJlci1zY29wZWQtY3NzLXVucGx1Z2luJyxcblxuICAgICAgZ2VuZXJhdGVCdW5kbGUoXywgYnVuZGxlKSB7XG4gICAgICAgIGxldCBjc3NGaWxlcyA9IGdhdGhlckNTU0ZpbGVzKGJ1bmRsZSk7XG5cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52LmVudmlyb25tZW50ID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgdGhpcy5lbWl0RmlsZSh7XG4gICAgICAgICAgICB0eXBlOiAnYXNzZXQnLFxuICAgICAgICAgICAgZmlsZU5hbWU6ICdzY29wZWQuY3NzJyxcbiAgICAgICAgICAgIHNvdXJjZTogY3NzRmlsZXMuam9pbignXFxuJyksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB2aXRlOiB7XG4gICAgICAgIGdlbmVyYXRlQnVuZGxlKCkge1xuICAgICAgICAgIC8qIGRlbGliZXJhdGVseSBkbyBub3RoaW5nICovXG4gICAgICAgIH0sXG4gICAgICAgIHRyYW5zZm9ybShjb2RlLCBqc1BhdGgpIHtcbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBIQlMgZmlsZXMgYXJlIGFjdHVhbGx5IEpTIGZpbGVzIHdpdGggYSBjYWxsIHRvIHByZWNvbXBpbGVUZW1wbGF0ZVxuICAgICAgICAgICAqL1xuICAgICAgICAgIGlmIChpc0hic0ZpbGUoanNQYXRoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUpzRmlsZShjb2RlLCBqc1BhdGgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaXNKc0ZpbGUoanNQYXRoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUpzRmlsZShjb2RlLCBqc1BhdGgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaXNDc3NGaWxlKGpzUGF0aCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2Zvcm1Dc3NGaWxlKGNvZGUsIGpzUGF0aCwgb3B0aW9ucz8ubGF5ZXJOYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9LFxuXG4gICAgICB0cmFuc2Zvcm0oY29kZSwganNQYXRoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIQlMgZmlsZXMgYXJlIGFjdHVhbGx5IEpTIGZpbGVzIHdpdGggYSBjYWxsIHRvIHByZWNvbXBpbGVUZW1wbGF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKGlzSGJzRmlsZShqc1BhdGgpKSB7XG4gICAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUpzRmlsZShjb2RlLCBqc1BhdGgpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzSnNGaWxlKGpzUGF0aCkpIHtcbiAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtSnNGaWxlKGNvZGUsIGpzUGF0aCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNDc3NGaWxlKGpzUGF0aCkpIHtcbiAgICAgICAgICBsZXQgY3NzID0gdHJhbnNmb3JtQ3NzRmlsZShjb2RlLCBqc1BhdGgsIG9wdGlvbnM/LmxheWVyTmFtZSk7XG5cbiAgICAgICAgICBjb25zdCBlbWl0dGVkRmlsZU5hbWUgPSBqc1BhdGgucmVwbGFjZShcbiAgICAgICAgICAgIHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnc3JjLycpLFxuICAgICAgICAgICAgJycsXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIHRoaXMuZW1pdEZpbGUoe1xuICAgICAgICAgICAgdHlwZTogJ2Fzc2V0JyxcbiAgICAgICAgICAgIGZpbGVOYW1lOiBlbWl0dGVkRmlsZU5hbWUsXG4gICAgICAgICAgICBzb3VyY2U6IGNzcyxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9O1xuICB9LFxuKTtcbiIsICJpbXBvcnQgcG9zdGNzcyBmcm9tICdwb3N0Y3NzJztcbmltcG9ydCBwYXJzZXIgZnJvbSAncG9zdGNzcy1zZWxlY3Rvci1wYXJzZXInO1xuXG5pbXBvcnQgaXNJbnNpZGVHbG9iYWwgZnJvbSAnLi9pc0luc2lkZUdsb2JhbC5qcyc7XG5cbmZ1bmN0aW9uIGdldENsYXNzZXNBbmRUYWdzKHNlbCwgY2xhc3NlcywgdGFncykge1xuICBjb25zdCB0cmFuc2Zvcm0gPSAoc2xzKSA9PiB7XG4gICAgc2xzLndhbGsoKHNlbGVjdG9yKSA9PiB7XG4gICAgICBpZiAoc2VsZWN0b3IudHlwZSA9PT0gJ2NsYXNzJyAmJiAhaXNJbnNpZGVHbG9iYWwoc2VsZWN0b3IpKSB7XG4gICAgICAgIGNsYXNzZXMuYWRkKHNlbGVjdG9yLnZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoc2VsZWN0b3IudHlwZSA9PT0gJ3RhZycgJiYgIWlzSW5zaWRlR2xvYmFsKHNlbGVjdG9yKSkge1xuICAgICAgICB0YWdzLmFkZChzZWxlY3Rvci52YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgcGFyc2VyKHRyYW5zZm9ybSkucHJvY2Vzc1N5bmMoc2VsKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Q2xhc3Nlc1RhZ3NGcm9tQ3NzKGNzcykge1xuICBjb25zdCBjbGFzc2VzID0gbmV3IFNldCgpO1xuICBjb25zdCB0YWdzID0gbmV3IFNldCgpO1xuXG4gIGNvbnN0IGFzdCA9IHBvc3Rjc3MucGFyc2UoY3NzKTtcblxuICBhc3Qud2Fsaygobm9kZSkgPT4ge1xuICAgIGlmIChub2RlLnR5cGUgPT09ICdydWxlJykge1xuICAgICAgZ2V0Q2xhc3Nlc0FuZFRhZ3Mobm9kZS5zZWxlY3RvciwgY2xhc3NlcywgdGFncyk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4geyBjbGFzc2VzLCB0YWdzIH07XG59XG5cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0luc2lkZUdsb2JhbChub2RlLCBmdW5jKSB7XG4gIGNvbnN0IHBhcmVudCA9IG5vZGUucGFyZW50O1xuXG4gIGlmICghcGFyZW50KSByZXR1cm4gZmFsc2U7XG4gIGlmIChwYXJlbnQudHlwZSA9PT0gJ3BzZXVkbycgJiYgcGFyZW50LnZhbHVlID09PSAnOmdsb2JhbCcpIHJldHVybiB0cnVlO1xuXG4gIHJldHVybiBpc0luc2lkZUdsb2JhbChwYXJlbnQsIGZ1bmMpO1xufVxuIiwgImltcG9ydCBiYWJlbFBhcnNlciBmcm9tICdAYmFiZWwvcGFyc2VyJztcbmltcG9ydCByZWNhc3QgZnJvbSAncmVjYXN0JztcblxuY29uc3QgcGFyc2VPcHRpb25zID0ge1xuICBwYXJzZXI6IHtcbiAgICBwYXJzZShzb3VyY2UpIHtcbiAgICAgIHJldHVybiBiYWJlbFBhcnNlci5wYXJzZShzb3VyY2UsIHtcbiAgICAgICAgc291cmNlVHlwZTogJ21vZHVsZScsXG4gICAgICAgIGFsbG93SW1wb3J0RXhwb3J0RXZlcnl3aGVyZTogdHJ1ZSxcbiAgICAgICAgdG9rZW5zOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfSxcbiAgfSxcbn07XG5cbmZ1bmN0aW9uIHJlbW92ZVNjb3BlQmFnUmVmZXJlbmNlKGFzdCwgc2NvcGVkQ2xhc3MpIHtcbiAgaWYgKCFzY29wZWRDbGFzcykgcmV0dXJuO1xuXG4gIHJlY2FzdC52aXNpdChhc3QsIHtcbiAgICB2aXNpdE9iamVjdFByb3BlcnR5KHBhdGgpIHtcbiAgICAgIGlmIChcbiAgICAgICAgcGF0aC5ub2RlLnZhbHVlLnR5cGUgPT09ICdJZGVudGlmaWVyJyAmJlxuICAgICAgICBwYXRoLm5vZGUudmFsdWUubmFtZSA9PT0gc2NvcGVkQ2xhc3NcbiAgICAgICkge1xuICAgICAgICBwYXRoLnBydW5lKCk7XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnRyYXZlcnNlKHBhdGgpO1xuICAgIH0sXG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoc2NyaXB0LCByZXBsYWNlRnVuY3Rpb24pIHtcbiAgY29uc3QgYXN0ID0gcmVjYXN0LnBhcnNlKHNjcmlwdCwgcGFyc2VPcHRpb25zKTtcbiAgbGV0IGltcG9ydGVkU2NvcGVkQ2xhc3M7XG5cbiAgcmVjYXN0LnZpc2l0KGFzdCwge1xuICAgIHZpc2l0SW1wb3J0RGVjbGFyYXRpb24ocGF0aCkge1xuICAgICAgaWYgKHBhdGgubm9kZS5zb3VyY2UudmFsdWUgPT09ICdlbWJlci1zY29wZWQtY3NzJykge1xuICAgICAgICBsZXQgc3BlY2lmaWVyID0gcGF0aC5ub2RlLnNwZWNpZmllcnMuZmluZChcbiAgICAgICAgICAoeCkgPT4geC5pbXBvcnRlZC5uYW1lID09PSAnc2NvcGVkQ2xhc3MnLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChzcGVjaWZpZXIpIHtcbiAgICAgICAgICBpbXBvcnRlZFNjb3BlZENsYXNzID0gc3BlY2lmaWVyLmxvY2FsLm5hbWU7XG4gICAgICAgIH1cblxuICAgICAgICBwYXRoLnBydW5lKCk7XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnRyYXZlcnNlKHBhdGgpO1xuICAgIH0sXG4gICAgdmlzaXRDYWxsRXhwcmVzc2lvbihwYXRoKSB7XG4gICAgICBjb25zdCBub2RlID0gcGF0aC5ub2RlO1xuXG4gICAgICBjb25zdCBzY29wZWRDbGFzcyA9IGltcG9ydGVkU2NvcGVkQ2xhc3MgPz8gJ3Njb3BlZC1jbGFzcyc7XG5cbiAgICAgIC8qKlxuICAgICAgICogX19HTElNTUVSX1RFTVBMQVRFIGlzIGZvciB1c2Ugd2l0aFxuICAgICAgICogaHR0cHM6Ly9naXRodWIuY29tL051bGxWb3hQb3B1bGkvcm9sbHVwLXBsdWdpbi1nbGltbWVyLXRlbXBsYXRlLXRhZy9cbiAgICAgICAqIHdoaWNoIHVzZXNcbiAgICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9lbWJlci10ZW1wbGF0ZS1pbXBvcnRzL2VtYmVyLXRlbXBsYXRlLWltcG9ydHMvXG4gICAgICAgKiBAdjMsIHdoaWNoIGlzIGtub3duIHRvIGhhdmUgYSBsb3Qgb2YgcGFyc2VyIGJ1Z3MuXG4gICAgICAgKlxuICAgICAgICogaW4gQGVtYnJvaWRlci9hZGRvbi1kZXZAdjQsIHdlIGhhdmUgbmF0aXZlIEdKUyBzdXBwb3J0XG4gICAgICAgKiBhbmQgd2UgZG9uJ3QgaW5saW5lIGNvLWxvY2F0ZWQgaGJzIGFuZCBKUyAob3IgcmF0aGVyLCBhIHJvbGx1cCBvcHRpbWl6YXRpb24gbGF0ZXIgZG9lcyBpdCBmb3IgdXMpLlxuICAgICAgICogSW5zdGVhZCwgd2UgaW1wb3J0LCB3aGljaCBsb29rcyBsaWtlIHRoaXM6XG4gICAgICAgKiBgYGBcbiAgICAgICAqIGltcG9ydCBURU1QTEFURSBmcm9tICcuL3RoZS1maWxlLmhicyc7XG4gICAgICAgKlxuICAgICAgICogLi4uXG4gICAgICAgKlxuICAgICAgICogc2V0Q29tcG9uZW50VGVtcGxhdGUoVEVNUExBVEUsIFgpO1xuICAgICAgICogYGBgXG4gICAgICAgKiBBbmQgd2UgZG9uJ3Qgd2FudCB0byBlbnRlciB0aGlzIGNvZGVwYXRoIChvciByYXRoZXIsIGl0IG5vLW9wcykuXG4gICAgICAgKiBfQlVUXywgYmVjYXVzZSB0aGlzIGZpbGUgaW1wb3J0cyB0aGUgaGJzIGZpbGUsIHdlJ2xsIGVuZCB1cCBoZXJlIGxhdGVyXG4gICAgICAgKiBhbmQgcmVhZHkgdG8gaGl0IHRoZSBgcHJlY29tcGlsZVRlbXBsYXRlYCBjb2RlcGF0aC5cbiAgICAgICAqL1xuICAgICAgaWYgKFxuICAgICAgICBub2RlLmNhbGxlZS5uYW1lID09PSAnX19HTElNTUVSX1RFTVBMQVRFJyB8fFxuICAgICAgICBub2RlLmNhbGxlZS5uYW1lID09PSAncHJlY29tcGlsZVRlbXBsYXRlJ1xuICAgICAgKSB7XG4gICAgICAgIGlmIChub2RlLmFyZ3VtZW50c1swXS50eXBlID09PSAnVGVtcGxhdGVMaXRlcmFsJykge1xuICAgICAgICAgIG5vZGUuYXJndW1lbnRzWzBdLnF1YXNpc1swXS52YWx1ZS5yYXcgPSByZXBsYWNlRnVuY3Rpb24oXG4gICAgICAgICAgICBub2RlLmFyZ3VtZW50c1swXS5xdWFzaXNbMF0udmFsdWUucmF3LFxuICAgICAgICAgICAgc2NvcGVkQ2xhc3MsXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBub2RlLmFyZ3VtZW50c1swXS50eXBlID09PSAnU3RyaW5nTGl0ZXJhbCcgfHxcbiAgICAgICAgICBub2RlLmFyZ3VtZW50c1swXS50eXBlID09PSAnTGl0ZXJhbCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgbm9kZS5hcmd1bWVudHNbMF0udmFsdWUgPSByZXBsYWNlRnVuY3Rpb24oXG4gICAgICAgICAgICBub2RlLmFyZ3VtZW50c1swXS52YWx1ZSxcbiAgICAgICAgICAgIHNjb3BlZENsYXNzLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaW1wb3J0ZWRTY29wZWRDbGFzcykge1xuICAgICAgICAgIHJlbW92ZVNjb3BlQmFnUmVmZXJlbmNlKHBhdGgsIHNjb3BlZENsYXNzKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLnRyYXZlcnNlKHBhdGgpO1xuICAgIH0sXG4gIH0pO1xuXG4gIHJldHVybiByZWNhc3QucHJpbnQoYXN0KS5jb2RlO1xufVxuIiwgImltcG9ydCBwb3N0Y3NzIGZyb20gJ3Bvc3Rjc3MnO1xuaW1wb3J0IHBhcnNlciBmcm9tICdwb3N0Y3NzLXNlbGVjdG9yLXBhcnNlcic7XG5cbmltcG9ydCBpc0luc2lkZUdsb2JhbCBmcm9tICcuL2lzSW5zaWRlR2xvYmFsLmpzJztcblxuZnVuY3Rpb24gcmV3cml0ZVNlbGVjdG9yKHNlbCwgcG9zdGZpeCkge1xuICBjb25zdCB0cmFuc2Zvcm0gPSAoc2VsZWN0b3JzKSA9PiB7XG4gICAgc2VsZWN0b3JzLndhbGsoKHNlbGVjdG9yKSA9PiB7XG4gICAgICBpZiAoc2VsZWN0b3IudHlwZSA9PT0gJ2NsYXNzJyAmJiAhaXNJbnNpZGVHbG9iYWwoc2VsZWN0b3IpKSB7XG4gICAgICAgIHNlbGVjdG9yLnZhbHVlICs9ICdfJyArIHBvc3RmaXg7XG4gICAgICB9IGVsc2UgaWYgKHNlbGVjdG9yLnR5cGUgPT09ICd0YWcnICYmICFpc0luc2lkZUdsb2JhbChzZWxlY3RvcikpIHtcbiAgICAgICAgc2VsZWN0b3IucmVwbGFjZVdpdGgoXG4gICAgICAgICAgcGFyc2VyLnRhZyh7IHZhbHVlOiBzZWxlY3Rvci52YWx1ZSB9KSxcbiAgICAgICAgICBwYXJzZXIuY2xhc3NOYW1lKHsgdmFsdWU6IHBvc3RmaXggfSksXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyByZW1vdmUgOmdsb2JhbFxuICAgIHNlbGVjdG9ycy53YWxrKChzZWxlY3RvcikgPT4ge1xuICAgICAgaWYgKHNlbGVjdG9yLnR5cGUgPT09ICdwc2V1ZG8nICYmIHNlbGVjdG9yLnZhbHVlID09PSAnOmdsb2JhbCcpIHtcbiAgICAgICAgc2VsZWN0b3IucmVwbGFjZVdpdGgoLi4uc2VsZWN0b3Iubm9kZXMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuICBjb25zdCB0cmFuc2Zvcm1lZCA9IHBhcnNlcih0cmFuc2Zvcm0pLnByb2Nlc3NTeW5jKHNlbCk7XG5cbiAgcmV0dXJuIHRyYW5zZm9ybWVkO1xufVxuXG5mdW5jdGlvbiBpc0luc2lkZUtleWZyYW1lcyhub2RlKSB7XG4gIGNvbnN0IHBhcmVudCA9IG5vZGUucGFyZW50O1xuXG4gIGlmICghcGFyZW50KSByZXR1cm4gZmFsc2U7XG4gIGlmIChwYXJlbnQudHlwZSA9PT0gJ2F0cnVsZScgJiYgcGFyZW50Lm5hbWUgPT09ICdrZXlmcmFtZXMnKSByZXR1cm4gdHJ1ZTtcblxuICByZXR1cm4gaXNJbnNpZGVLZXlmcmFtZXMocGFyZW50KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmV3cml0ZUNzcyhjc3MsIHBvc3RmaXgsIGZpbGVOYW1lLCBsYXllck5hbWUpIHtcbiAgY29uc3QgbGF5ZXJOYW1lV2l0aERlZmF1bHQgPSBsYXllck5hbWUgPz8gJ2NvbXBvbmVudHMnO1xuICBjb25zdCBhc3QgPSBwb3N0Y3NzLnBhcnNlKGNzcyk7XG5cbiAgYXN0LndhbGsoKG5vZGUpID0+IHtcbiAgICBpZiAobm9kZS50eXBlID09PSAncnVsZScgJiYgIWlzSW5zaWRlS2V5ZnJhbWVzKG5vZGUpKSB7XG4gICAgICBub2RlLnNlbGVjdG9yID0gcmV3cml0ZVNlbGVjdG9yKG5vZGUuc2VsZWN0b3IsIHBvc3RmaXgpO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3QgcmV3cml0dGVuQ3NzID0gYXN0LnRvU3RyaW5nKCk7XG5cbiAgaWYgKCFsYXllck5hbWVXaXRoRGVmYXVsdCkge1xuICAgIHJldHVybiBgLyogJHtmaWxlTmFtZX0gKi9cXG4ke3Jld3JpdHRlbkNzc31cXG5gO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICBgLyogJHtmaWxlTmFtZX0gKi9cXG5AbGF5ZXIgJHtsYXllck5hbWVXaXRoRGVmYXVsdH0ge1xcblxcbmAgK1xuICAgIHJld3JpdHRlbkNzcyArXG4gICAgJ1xcbn1cXG4nXG4gICk7XG59XG5cbiIsICJpbXBvcnQgcmVjYXN0IGZyb20gJ2VtYmVyLXRlbXBsYXRlLXJlY2FzdCc7XG5cbmltcG9ydCB7IHJlbmFtZUNsYXNzIH0gZnJvbSAnLi9yZW5hbWVDbGFzcy5qcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZVBsdWdpbih7IGNsYXNzZXMsIHRhZ3MsIHBvc3RmaXggfSkge1xuICBsZXQgc3RhY2sgPSBbXTtcbiAgLy8gc2NvcGVkLWNsYXNzIGlzIGEgZ2xvYmFsIHdlIGFsbG93IGluIGhic1xuICAvLyBzY29wZWRDbGFzcyBpcyBpbXBvcnRhYmxlLCBhbmQgd2UnbGwgZXJyb3IgaWYgc29tZW9uZSB0cmllcyB0byByZW5hbWUgaXRcbiAgbGV0IHNjb3BlZENsYXNzQ2FuZGlkYXRlcyA9IFsnc2NvcGVkLWNsYXNzJywgJ3Njb3BlZENsYXNzJ107XG5cbiAgZnVuY3Rpb24gaXNTY29wZWRDbGFzcyhzdHIpIHtcbiAgICBpZiAoIXN0cikgcmV0dXJuIGZhbHNlO1xuXG4gICAgcmV0dXJuIHNjb3BlZENsYXNzQ2FuZGlkYXRlcy5zb21lKChjYW5kaWRhdGUpID0+IGNhbmRpZGF0ZSA9PT0gc3RyKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgQXR0ck5vZGUobm9kZSkge1xuICAgICAgaWYgKG5vZGUubmFtZSA9PT0gJ2NsYXNzJykge1xuICAgICAgICBpZiAobm9kZS52YWx1ZS50eXBlID09PSAnVGV4dE5vZGUnICYmIG5vZGUudmFsdWUuY2hhcnMpIHtcbiAgICAgICAgICBjb25zdCByZW5hbWVkQ2xhc3MgPSByZW5hbWVDbGFzcyhub2RlLnZhbHVlLmNoYXJzLCBwb3N0Zml4LCBjbGFzc2VzKTtcblxuICAgICAgICAgIG5vZGUudmFsdWUuY2hhcnMgPSByZW5hbWVkQ2xhc3M7XG4gICAgICAgIH0gZWxzZSBpZiAobm9kZS52YWx1ZS50eXBlID09PSAnQ29uY2F0U3RhdGVtZW50Jykge1xuICAgICAgICAgIGZvciAobGV0IHBhcnQgb2Ygbm9kZS52YWx1ZS5wYXJ0cykge1xuICAgICAgICAgICAgaWYgKHBhcnQudHlwZSA9PT0gJ1RleHROb2RlJyAmJiBwYXJ0LmNoYXJzKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHJlbmFtZWRDbGFzcyA9IHJlbmFtZUNsYXNzKHBhcnQuY2hhcnMsIHBvc3RmaXgsIGNsYXNzZXMpO1xuXG4gICAgICAgICAgICAgIHBhcnQuY2hhcnMgPSByZW5hbWVkQ2xhc3M7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnQudHlwZSA9PT0gJ011c3RhY2hlU3RhdGVtZW50Jykge1xuICAgICAgICAgICAgICByZWNhc3QudHJhdmVyc2UocGFydCwge1xuICAgICAgICAgICAgICAgIFN0cmluZ0xpdGVyYWwobm9kZSkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgcmVuYW1lZENsYXNzID0gcmVuYW1lQ2xhc3MoXG4gICAgICAgICAgICAgICAgICAgIG5vZGUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHBvc3RmaXgsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzZXMsXG4gICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICBub2RlLnZhbHVlID0gcmVuYW1lZENsYXNzO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBFbGVtZW50Tm9kZShub2RlKSB7XG4gICAgICBpZiAodGFncy5oYXMobm9kZS50YWcpKSB7XG4gICAgICAgIC8vIGNoZWNrIGlmIGNsYXNzIGF0dHJpYnV0ZSBhbHJlYWR5IGV4aXN0c1xuICAgICAgICBjb25zdCBjbGFzc0F0dHIgPSBub2RlLmF0dHJpYnV0ZXMuZmluZCgoYXR0cikgPT4gYXR0ci5uYW1lID09PSAnY2xhc3MnKTtcblxuICAgICAgICBpZiAoY2xhc3NBdHRyKSB7XG4gICAgICAgICAgY2xhc3NBdHRyLnZhbHVlLmNoYXJzICs9ICcgJyArIHBvc3RmaXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gcHVzaCBjbGFzcyBhdHRyaWJ1dGVcbiAgICAgICAgICBub2RlLmF0dHJpYnV0ZXMucHVzaChcbiAgICAgICAgICAgIHJlY2FzdC5idWlsZGVycy5hdHRyKCdjbGFzcycsIHJlY2FzdC5idWlsZGVycy50ZXh0KHBvc3RmaXgpKSxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIEFsbDoge1xuICAgICAgZW50ZXIobm9kZSkge1xuICAgICAgICBzdGFjay5wdXNoKG5vZGUpO1xuICAgICAgfSxcbiAgICAgIGV4aXQoKSB7XG4gICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgfSxcbiAgICB9LFxuXG4gICAgTXVzdGFjaGVTdGF0ZW1lbnQobm9kZSkge1xuICAgICAgbGV0IGNzc0NsYXNzO1xuXG4gICAgICBpZiAoXG4gICAgICAgIGlzU2NvcGVkQ2xhc3MoZ2V0VmFsdWUobm9kZS5wYXRoKSkgJiZcbiAgICAgICAgbm9kZS5wYXJhbXM/Lmxlbmd0aCA9PT0gMSAmJlxuICAgICAgICBub2RlLnBhcmFtc1swXS50eXBlID09PSAnU3RyaW5nTGl0ZXJhbCdcbiAgICAgICkge1xuICAgICAgICBjc3NDbGFzcyA9IG5vZGUucGFyYW1zWzBdLnZhbHVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIGlzU2NvcGVkQ2xhc3MoZ2V0VmFsdWUobm9kZS5wYXRoPy5wYXRoKSkgJiZcbiAgICAgICAgbm9kZS5wYXRoPy5wYXJhbXM/Lmxlbmd0aCA9PT0gMSAmJlxuICAgICAgICBub2RlLnBhdGg/LnBhcmFtc1swXS50eXBlID09PSAnU3RyaW5nTGl0ZXJhbCdcbiAgICAgICkge1xuICAgICAgICBjc3NDbGFzcyA9IG5vZGUucGF0aC5wYXJhbXNbMF0udmFsdWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjc3NDbGFzcykge1xuICAgICAgICBjb25zdCB0ZXh0Tm9kZSA9IHJlY2FzdC5idWlsZGVycy50ZXh0KHJlbmFtZUNsYXNzKGNzc0NsYXNzLCBwb3N0Zml4KSk7XG4gICAgICAgIGNvbnN0IHBhcmVudCA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuXG4gICAgICAgIGlmIChwYXJlbnQudHlwZSA9PT0gJ0F0dHJOb2RlJykge1xuICAgICAgICAgIHBhcmVudC5xdW90ZVR5cGUgPSAnXCInO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRleHROb2RlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBTdWJFeHByZXNzaW9uKG5vZGUpIHtcbiAgICAgIGlmIChcbiAgICAgICAgaXNTY29wZWRDbGFzcyhnZXRWYWx1ZShub2RlLnBhdGgpKSAmJlxuICAgICAgICBub2RlLnBhcmFtcz8ubGVuZ3RoID09PSAxICYmXG4gICAgICAgIG5vZGUucGFyYW1zWzBdLnR5cGUgPT09ICdTdHJpbmdMaXRlcmFsJ1xuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IGNzc0NsYXNzID0gbm9kZS5wYXJhbXNbMF0udmFsdWU7XG4gICAgICAgIGNvbnN0IHRleHROb2RlID0gcmVjYXN0LmJ1aWxkZXJzLmxpdGVyYWwoXG4gICAgICAgICAgJ1N0cmluZ0xpdGVyYWwnLFxuICAgICAgICAgIHJlbmFtZUNsYXNzKGNzc0NsYXNzLCBwb3N0Zml4KSxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gdGV4dE5vZGU7XG4gICAgICB9XG4gICAgfSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0VmFsdWUocGF0aCkge1xuICBpZiAoIXBhdGgpIHJldHVybjtcblxuICBpZiAoJ3ZhbHVlJyBpbiBwYXRoKSB7XG4gICAgcmV0dXJuIHBhdGgudmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogRGVwcmVjYXRlZCBpbiBlbWJlciA1LjkrXG4gICAqIChzbyB3ZSB1c2UgdGhlIGFib3ZlIGZvciBuZXdlciBlbWJlcnMpXG4gICAqL1xuICByZXR1cm4gcGF0aC5vcmlnaW5hbDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmV3cml0ZUhicyhoYnMsIGNsYXNzZXMsIHRhZ3MsIHBvc3RmaXgpIHtcbiAgbGV0IGFzdCA9IHJlY2FzdC5wYXJzZShoYnMpO1xuXG4gIHJlY2FzdC50cmF2ZXJzZShhc3QsIHRlbXBsYXRlUGx1Z2luKHsgY2xhc3NlcywgdGFncywgcG9zdGZpeCB9KSk7XG5cbiAgbGV0IHJlc3VsdCA9IHJlY2FzdC5wcmludChhc3QpO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG4iLCAiLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZVxuICogQHBhcmFtIHtzdHJpbmd9IHBvc3RmaXhcbiAqIEBwYXJhbSB7U2V0PHN0cmluZz59IFtjbGFzc2VzSW5Dc3NdXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVuYW1lQ2xhc3MoY2xhc3NOYW1lLCBwb3N0Zml4LCBjbGFzc2VzSW5Dc3MpIHtcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZS5zcGxpdCgvXFxzKy8pO1xuICBjb25zdCByZW5hbWVkQ2xhc3NlcyA9IGNsYXNzZXNcbiAgICAuZmlsdGVyKChjKSA9PiBjKVxuICAgIC5tYXAoKGMpID0+IGMudHJpbSgpKVxuICAgIC5tYXAoKGMpID0+IHtcbiAgICAgIGlmICghY2xhc3Nlc0luQ3NzIHx8IGNsYXNzZXNJbkNzcy5oYXMoYykpIHtcbiAgICAgICAgaWYgKGMuZW5kc1dpdGgocG9zdGZpeCkpIHJldHVybiBjO1xuXG4gICAgICAgIHJldHVybiBjICsgJ18nICsgcG9zdGZpeDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGM7XG4gICAgfSlcbiAgICAuam9pbignICcpO1xuXG4gIGNvbnN0IHJlbmFtZWRXaXRoUHJlc2VydmVkU3BhY2VzID0gY2xhc3NOYW1lLnJlcGxhY2UoXG4gICAgY2xhc3NOYW1lLnRyaW1TdGFydCgpLnRyaW1FbmQoKSxcbiAgICByZW5hbWVkQ2xhc3NlcyxcbiAgKTtcblxuICByZXR1cm4gcmVuYW1lZFdpdGhQcmVzZXJ2ZWRTcGFjZXM7XG59XG4iLCAiaW1wb3J0IHsgZXhpc3RzU3luYywgcmVhZEZpbGVTeW5jIH0gZnJvbSAnZnMnO1xuXG5pbXBvcnQgZ2V0Q2xhc3Nlc1RhZ3NGcm9tQ3NzIGZyb20gJy4uL2dldENsYXNzZXNUYWdzRnJvbUNzcy5qcyc7XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGNzc1BhdGggcGF0aCB0byBhIENTUyBmaWxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDU1NJbmZvKGNzc1BhdGgpIHtcbiAgaWYgKCFleGlzdHNTeW5jKGNzc1BhdGgpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBsZXQgY3NzID0gcmVhZEZpbGVTeW5jKGNzc1BhdGgsICd1dGY4Jyk7XG4gIGxldCByZXN1bHQgPSBnZXRDbGFzc2VzVGFnc0Zyb21Dc3MoY3NzKTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuIiwgImltcG9ydCBwYXRoIGZyb20gJ25vZGU6cGF0aCc7XG5cbmltcG9ydCB7IGZpbmRXb3Jrc3BhY2VQYXRoLCBtb2R1bGVOYW1lIGFzIHByb2plY3ROYW1lIH0gZnJvbSAnLi91dGlscy5qcyc7XG5cbi8qKlxuICogdGVtcGxhdGUgcGx1Z2lucyBkbyBub3QgaGFuZCB1cyB0aGUgY29ycmVjdCBmaWxlIHBhdGguXG4gKiBhZGRpdGlvbmFsbHksIHdlIG1heSBub3QgYmUgYWJsZSB0byByZWx5IG9uIHRoaXMgZGF0YSBpbiB0aGUgZnV0dXJlLFxuICogc28gdGhpcyBmdW5jdGlvbnMgYWN0cyBhcyBhIG1lYW5zIG9mIG5vcm1hbGl6aW5nIF93aGF0ZXZlcl8gd2UncmUgZ2l2ZW5cbiAqIGluIHRoZSBmdXR1cmUuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGZpbGVuYW1lXG4gKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgYWJzb2x1dGUgcGF0aCB0byB0aGUgZmlsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZml4RmlsZW5hbWUoZmlsZW5hbWUpIHtcbiAgbGV0IGZpbGVOYW1lID0gZmlsZW5hbWU7XG4gIGxldCB3b3Jrc3BhY2UgPSBmaW5kV29ya3NwYWNlUGF0aChmaWxlTmFtZSk7XG4gIGxldCBtb2R1bGVOYW1lID0gcHJvamVjdE5hbWUod29ya3NwYWNlKTtcblxuICAvKipcbiAgICogRm9yIGEgc2ltcGxlIGNhc2UsIHRoZXJlIGFyZSBzb21ldGltZXMgZHVwbGljYXRlIG1vZHVsZSBwYXRocyBpbiB0aGUgZmlsZU5hbWVcbiAgICogbGV0J3MgY29sbGFwc2UgdGhhdCBhbmRcbiAgICovXG4gIGxldCB3cm9uZ01vZHVsZU5hbWUgPSBwYXRoLmJhc2VuYW1lKHdvcmtzcGFjZSk7XG4gIGxldCBkZWR1cGVkID0gZmlsZU5hbWUucmVwbGFjZShcbiAgICBgJHt3cm9uZ01vZHVsZU5hbWV9LyR7bW9kdWxlTmFtZX0vYCxcbiAgICBgJHt3cm9uZ01vZHVsZU5hbWV9L2FwcC9gLFxuICApO1xuXG4gIGlmIChkZWR1cGVkICE9PSBmaWxlTmFtZSkge1xuICAgIHJldHVybiBkZWR1cGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIGVtYmVyLXNvdXJjZSA1Ljg6XG4gICAqIC0gdGhlIGZpbGVuYW1lIGxvb2tzIGxpa2UgYW4gYWJzb2x1dGUgcGF0aCwgYnV0IHN3YXBwZWQgb3V0IHRoZSAnYXBwJyBwYXJ0IG9mIHRoZSBwYXRoXG4gICAqICAgd2l0aCB0aGUgbW9kdWxlIG5hbWUsIHNvIHRoZSBmaWxlIHBhdGhzIG5ldmVyIGV4aXN0IG9uIGRpc2tcbiAgICpcbiAgICogLSBpbiB2aXRlIGFwcHM6XG4gICAqICAgdGhlICdhcHAnIHBhcnQgX21heV8gYmUgYHNyY2AsIHNvIHdlIGFsc28gbmVlZCB0byBlbnN1cmUgdGhhdCBgc3JjYCBpcyBleGNsdWRlZCBhcyB3ZWxsXG4gICAqL1xuICBsZXQgaGFzQXBwRGlyID0gZmlsZU5hbWUuaW5jbHVkZXMocGF0aC5qb2luKHdvcmtzcGFjZSwgJ2FwcCcpKTtcbiAgbGV0IGhhc1NyY0RpciA9IGZpbGVOYW1lLmluY2x1ZGVzKHBhdGguam9pbih3b3Jrc3BhY2UsICdzcmMnKSk7XG5cbiAgaWYgKFxuICAgICEoaGFzQXBwRGlyIHx8IGhhc1NyY0RpcikgJiZcbiAgICAhZmlsZU5hbWUuaW5jbHVkZXMoJy9ub2RlX21vZHVsZXMvLmVtYnJvaWRlci8nKVxuICApIHtcbiAgICBsZXQgbWF5YmVNb2R1bGUgPSBmaWxlTmFtZS5yZXBsYWNlKHdvcmtzcGFjZSwgJycpO1xuICAgIGxldCBbbWF5YmVTY29wZSwgLi4ucmVzdF0gPSBtYXliZU1vZHVsZS5zcGxpdCgnLycpLmZpbHRlcihCb29sZWFuKTtcbiAgICBsZXQgcGFydHMgPSByZXN0O1xuXG4gICAgaWYgKG1heWJlU2NvcGUuc3RhcnRzV2l0aCgnQCcpKSB7XG4gICAgICBsZXQgWywgLi4ucmVzdGVyXSA9IHJlc3Q7XG5cbiAgICAgIHBhcnRzID0gcmVzdGVyO1xuICAgIH1cblxuICAgIGxldCByZWxhdGl2ZSA9IHBhdGguam9pbiguLi5wYXJ0cyk7XG5cbiAgICAvKipcbiAgICAgKiBXZSBkb24ndCBhY3R1YWxseSBrbm93IGlmIHRoaXMgZmlsZSBpcyBhbiBhcHAuXG4gICAgICogaXQgY291bGQgYmUgYW4gYWRkb24gKHYxIG9yIHYyKVxuICAgICAqXG4gICAgICogU28gaGVyZSB3ZSBsb2cgdG8gc2VlIGlmIHdlIGhhdmUgdW5oYW5kbGVkIHNpdHVhdGlvbnMuXG4gICAgICovXG4gICAgbGV0IGNhbmRpZGF0ZVBhdGggPSBwYXRoLmpvaW4od29ya3NwYWNlLCAnYXBwJywgcmVsYXRpdmUpO1xuXG4gICAgcmV0dXJuIGNhbmRpZGF0ZVBhdGg7XG4gIH1cblxuICAvKipcbiAgICogdW5kZXIgZW1icm9pZGVyQDMsIHRoZSBmaWxlTmFtZSB3aWxsIGJlIHRoZSBwYXRoIHRvIHRoZSByZXdyaXR0ZW4gZmlsZS5cbiAgICogd2UgZG9uJ3Qgd2FudCB0aGlzLlxuICAgKiB3ZSB3YW50IHRoZSBwYXRoIHRvIHRoZSBvcmlnaW5hbCBzb3VyY2UuXG4gICAqIFRocm91Z2ggdGhlIHBvd2VycyBvZiBcdTI3MjggY29udmVudGlvbiBcdTI3MjgsIHdlIGNhbiBtYXAgYmFjayB0byBzb3VyY2UuXG4gICAqL1xuICBpZiAoZmlsZU5hbWUuaW5jbHVkZXMoJy9ub2RlX21vZHVsZXMvLmVtYnJvaWRlci9yZXdyaXR0ZW4tYXBwLycpKSB7XG4gICAgbGV0IGNhbmRpZGF0ZVBhdGggPSBmaWxlTmFtZS5yZXBsYWNlKFxuICAgICAgJy9ub2RlX21vZHVsZXMvLmVtYnJvaWRlci9yZXdyaXR0ZW4tYXBwLycsXG4gICAgICAnL2FwcC8nLFxuICAgICk7XG5cbiAgICByZXR1cm4gY2FuZGlkYXRlUGF0aDtcbiAgfVxuXG4gIC8vIFRPRE86IHdoeSBhcmUgd2UgcGFzc2VkIGZpbGVzIHRvIG90aGVyIHByb2plY3RzP1xuICBpZiAoIWZpbGVOYW1lLmluY2x1ZGVzKHdvcmtzcGFjZSkpIHtcbiAgICByZXR1cm4gZmlsZU5hbWU7XG4gIH1cblxuICAvLyBGYWxsYmFjayB0byB3aGF0IHRoZSBwbHVnaW4gc3lzdGVtIGdpdmVzIHVzLlxuICAvLyBUaGlzIG1heSBiZSB3cm9uZywgYW5kIGlmIHdyb25nLCByZXZlYWxzXG4gIC8vIHVuaGFuZGxlZCBzY2VuYXJpb3Mgd2l0aCB0aGUgZmlsZSBuYW1lcyBpbiB0aGUgcGx1Z2luIGluZnJhXG4gIHJldHVybiBmaWxlTmFtZTtcbn1cbiIsICIvKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoJ0BnbGltbWVyL3N5bnRheCcpLkFTVFBsdWdpbn0gQVNUUGx1Z2luXG4gKiBAdHlwZWRlZiB7aW1wb3J0KCdAZ2xpbW1lci9zeW50YXgnKS5BU1RQbHVnaW5FbnZpcm9ubWVudH0gQVNUUGx1Z2luRW52aXJvbm1lbnRcbiAqXG4gKi9cblxuaW1wb3J0IHsgZ2V0Q1NTSW5mbyB9IGZyb20gJy4uL2xpYi9jc3MvdXRpbHMuanMnO1xuaW1wb3J0IHsgZml4RmlsZW5hbWUgfSBmcm9tICcuLi9saWIvcGF0aC90ZW1wbGF0ZS10cmFuc2Zvcm0tcGF0aHMuanMnO1xuaW1wb3J0IHtcbiAgYXBwUGF0aCxcbiAgY3NzUGF0aEZvcixcbiAgaGFzaEZyb21Nb2R1bGVQYXRoLFxuICBpc1JlbGV2YW50RmlsZSxcbn0gZnJvbSAnLi4vbGliL3BhdGgvdXRpbHMuanMnO1xuaW1wb3J0IHsgdGVtcGxhdGVQbHVnaW4gfSBmcm9tICcuLi9saWIvcmV3cml0ZUhicy5qcyc7XG5cbmNvbnN0IG5vb3BQbHVnaW4gPSB7XG4gIG5hbWU6ICdlbWJlci1zY29wZWQtY3NzOm5vb3AnLFxuICB2aXNpdG9yOiB7fSxcbn07XG5cbi8qKlxuICogQHJldHVybnMge0FTVFBsdWdpbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVBsdWdpbihjb25maWcpIHtcbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7QVNUUGx1Z2luRW52aXJvbm1lbnR9IGVudlxuICAgKi9cbiAgcmV0dXJuIGZ1bmN0aW9uIHNjb3BlZENzcyhlbnYpIHtcbiAgICBsZXQgaXNSZWxldmFudCA9IGlzUmVsZXZhbnRGaWxlKGVudi5maWxlbmFtZSwge1xuICAgICAgYWRkaXRpb25hbFJvb3RzOiBjb25maWcuYWRkaXRpb25hbFJvb3RzLFxuICAgICAgY3dkOiBwcm9jZXNzLmN3ZCgpLFxuICAgIH0pO1xuXG4gICAgaWYgKCFpc1JlbGV2YW50KSB7XG4gICAgICByZXR1cm4gbm9vcFBsdWdpbjtcbiAgICB9XG5cbiAgICBsZXQgYWJzb2x1dGVQYXRoID0gZml4RmlsZW5hbWUoZW52LmZpbGVuYW1lKTtcbiAgICBsZXQgbW9kdWxlUGF0aCA9IGFwcFBhdGgoYWJzb2x1dGVQYXRoKTtcblxuICAgIGxldCBjc3NQYXRoID0gY3NzUGF0aEZvcihhYnNvbHV0ZVBhdGgpO1xuICAgIGxldCBpbmZvID0gZ2V0Q1NTSW5mbyhjc3NQYXRoKTtcbiAgICBsZXQgcG9zdGZpeCA9IGhhc2hGcm9tTW9kdWxlUGF0aChtb2R1bGVQYXRoKTtcblxuICAgIGlmICghaW5mbykge1xuICAgICAgcmV0dXJuIG5vb3BQbHVnaW47XG4gICAgfVxuXG4gICAgbGV0IHZpc2l0b3JzID0gdGVtcGxhdGVQbHVnaW4oe1xuICAgICAgY2xhc3NlczogaW5mby5jbGFzc2VzLFxuICAgICAgdGFnczogaW5mby50YWdzLFxuICAgICAgcG9zdGZpeCxcbiAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiAnZW1iZXItc2NvcGVkLWNzczp0ZW1wbGF0ZS1wbHVnaW4nLFxuICAgICAgdmlzaXRvcjoge1xuICAgICAgICAvLyBTdGFjayBNYW5hZ2VyXG4gICAgICAgIC4uLnZpc2l0b3JzLFxuICAgICAgICAvLyBWaXNpdG9ycyBicm9rZW4gb3V0IGxpa2UgdGhpcyBzbyB3ZSBjYW4gY29uZGl0aW9uYWxseVxuICAgICAgICAvLyBkZWJ1ZyBiYXNlZCBvbiBmaWxlIHBhdGguXG4gICAgICAgIEF0dHJOb2RlKC4uLmFyZ3MpIHtcbiAgICAgICAgICByZXR1cm4gdmlzaXRvcnMuQXR0ck5vZGUoLi4uYXJncyk7XG4gICAgICAgIH0sXG4gICAgICAgIEVsZW1lbnROb2RlKC4uLmFyZ3MpIHtcbiAgICAgICAgICByZXR1cm4gdmlzaXRvcnMuRWxlbWVudE5vZGUoLi4uYXJncyk7XG4gICAgICAgIH0sXG4gICAgICAgIE11c3RhY2hlU3RhdGVtZW50KC4uLmFyZ3MpIHtcbiAgICAgICAgICByZXR1cm4gdmlzaXRvcnMuTXVzdGFjaGVTdGF0ZW1lbnQoLi4uYXJncyk7XG4gICAgICAgIH0sXG4gICAgICAgIFN1YkV4cHJlc3Npb24oLi4uYXJncykge1xuICAgICAgICAgIHJldHVybiB2aXNpdG9ycy5TdWJFeHByZXNzaW9uKC4uLmFyZ3MpO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9O1xuICB9O1xufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7OztBQ0FBLCtCQUEyQjtBQUMzQixnQkFBMkI7QUFDM0Isa0JBQXFCOzs7QUNGckIseUJBQW1CO0FBQ25CLHFCQUFtQjtBQUNuQix1QkFBaUI7OztBQ0ZqQix5QkFBZ0I7QUFnQlQsU0FBUyxLQUFLLFlBQVk7QUFDL0IsU0FBTyxVQUFNLG1CQUFBQSxTQUFJLFVBQVUsRUFBRSxVQUFVLEdBQUcsQ0FBQztBQUM3QztBQUdPLElBQU0scUJBQXFCOzs7QUNoQjNCLFNBQVMscUJBQXFCLGNBQWM7QUFNakQsUUFBTSxhQUFhLFFBQVEsWUFBWTtBQUN2QyxRQUFNLFVBQVUsS0FBSyxVQUFVO0FBRS9CLFNBQU87QUFDVDs7O0FGTEEsSUFBTSxnQkFBZ0I7QUFDdEIsSUFBTSxpQ0FBaUMsR0FBRyxhQUFhO0FBQ3ZELElBQU0sbUNBQW1DLEdBQUcsOEJBQThCO0FBQzFFLElBQU0saUNBQWlDLEdBQUcsYUFBYTtBQUN2RCxJQUFNLG1CQUFt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aUJBQWlCLE9BQU87QUFBQSxNQUN4QixLQUFLLFFBQVEsSUFBSTtBQUFBLElBQ25CLENBQUM7QUFFRCxRQUFJLENBQUMsWUFBWTtBQUNmLGFBQU87QUFBQSxJQUNUO0FBRUEsUUFBSSxlQUFlLFlBQVksSUFBSSxRQUFRO0FBQzNDLFFBQUksYUFBYSxRQUFRLFlBQVk7QUFFckMsUUFBSSxVQUFVLFdBQVcsWUFBWTtBQUNyQyxRQUFJLE9BQU8sV0FBVyxPQUFPO0FBQzdCLFFBQUksVUFBVSxtQkFBbUIsVUFBVTtBQUUzQyxRQUFJLENBQUMsTUFBTTtBQUNULGFBQU87QUFBQSxJQUNUO0FBRUEsUUFBSSxXQUFXLGVBQWU7QUFBQSxNQUM1QixTQUFTLEtBQUs7QUFBQSxNQUNkLE1BQU0sS0FBSztBQUFBLE1BQ1g7QUFBQSxJQUNGLENBQUM7QUFFRCxXQUFPO0FBQUEsTUFDTCxNQUFNO0FBQUEsTUFDTixTQUFTO0FBQUE7QUFBQSxRQUVQLEdBQUc7QUFBQTtBQUFBO0FBQUEsUUFHSCxZQUFZLE1BQU07QUFDaEIsaUJBQU8sU0FBUyxTQUFTLEdBQUcsSUFBSTtBQUFBLFFBQ2xDO0FBQUEsUUFDQSxlQUFlLE1BQU07QUFDbkIsaUJBQU8sU0FBUyxZQUFZLEdBQUcsSUFBSTtBQUFBLFFBQ3JDO0FBQUEsUUFDQSxxQkFBcUIsTUFBTTtBQUN6QixpQkFBTyxTQUFTLGtCQUFrQixHQUFHLElBQUk7QUFBQSxRQUMzQztBQUFBLFFBQ0EsaUJBQWlCLE1BQU07QUFDckIsaUJBQU8sU0FBUyxjQUFjLEdBQUcsSUFBSTtBQUFBLFFBQ3ZDO0FBQUEsTUFDRjtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQ0Y7IiwKICAibmFtZXMiOiBbIm1kNSIsICJwYXRoIiwgImFzc2VydCIsICJmc1N5bmMiLCAicGF0aCIsICJub2RlUGF0aCIsICJpbXBvcnRfbm9kZV9mcyIsICJpbXBvcnRfbm9kZV9wYXRoIiwgInBhcnNlciIsICJwb3N0Y3NzIiwgImJhYmVsUGFyc2VyIiwgInJlY2FzdCIsICJwYXRoIiwgImltcG9ydF9wb3N0Y3NzIiwgImltcG9ydF9wb3N0Y3NzX3NlbGVjdG9yX3BhcnNlciIsICJwYXJzZXIiLCAicG9zdGNzcyIsICJyZWNhc3QiLCAibm9kZSIsICJwYXRoIiwgInBhdGgiLCAicHJvY2VzcyIsICJpbXBvcnRfZnMiLCAiaW1wb3J0X25vZGVfcGF0aCIsICJtb2R1bGVOYW1lIiwgInBhdGgiXQp9Cg==
+//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc3JjL2J1aWxkL2luZGV4LmpzIiwgIi4uLy4uL3NyYy9idWlsZC9iYWJlbC1wbHVnaW4uanMiLCAiLi4vLi4vc3JjL2xpYi9wYXRoL3V0aWxzLmpzIiwgIi4uLy4uL3NyYy9saWIvcGF0aC9oYXNoLWZyb20tbW9kdWxlLXBhdGguanMiLCAiLi4vLi4vc3JjL2xpYi9wYXRoL2hhc2gtZnJvbS1hYnNvbHV0ZS1wYXRoLmpzIiwgIi4uLy4uL3NyYy9idWlsZC9zY29wZWQtY3NzLXVucGx1Z2luLmpzIiwgIi4uLy4uL3NyYy9saWIvZ2V0Q2xhc3Nlc1RhZ3NGcm9tQ3NzLmpzIiwgIi4uLy4uL3NyYy9saWIvaXNJbnNpZGVHbG9iYWwuanMiLCAiLi4vLi4vc3JjL2xpYi9yZXBsYWNlSGJzSW5Kcy5qcyIsICIuLi8uLi9zcmMvbGliL3Jld3JpdGVDc3MuanMiLCAiLi4vLi4vc3JjL2xpYi9yZXdyaXRlSGJzLmpzIiwgIi4uLy4uL3NyYy9saWIvcmVuYW1lQ2xhc3MuanMiLCAiLi4vLi4vc3JjL2xpYi9jc3MvdXRpbHMuanMiLCAiLi4vLi4vc3JjL2xpYi9wYXRoL3RlbXBsYXRlLXRyYW5zZm9ybS1wYXRocy5qcyIsICIuLi8uLi9zcmMvYnVpbGQvdGVtcGxhdGUtcGx1Z2luLmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJleHBvcnQgeyBkZWZhdWx0IGFzIGJhYmVsUGx1Z2luIH0gZnJvbSAnLi9iYWJlbC1wbHVnaW4uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBzY29wZWRDc3NVbnBsdWdpbiB9IGZyb20gJy4vc2NvcGVkLWNzcy11bnBsdWdpbi5qcyc7XG5leHBvcnQgeyBjcmVhdGVQbHVnaW4gYXMgdGVtcGxhdGVQbHVnaW4gfSBmcm9tICcuL3RlbXBsYXRlLXBsdWdpbi5qcyc7XG4iLCAiaW1wb3J0IHsgSW1wb3J0VXRpbCB9IGZyb20gJ2JhYmVsLWltcG9ydC11dGlsJztcbmltcG9ydCB7IGV4aXN0c1N5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQgbm9kZVBhdGggZnJvbSAncGF0aCc7XG5cbmltcG9ydCB7IGNzc1BhdGhGb3IsIGlzUmVsZXZhbnRGaWxlIH0gZnJvbSAnLi4vbGliL3BhdGgvdXRpbHMuanMnO1xuXG5mdW5jdGlvbiBfaXNSZWxldmFudEZpbGUoc3RhdGUsIGN3ZCkge1xuICBsZXQgZmlsZU5hbWUgPSBzdGF0ZS5maWxlLm9wdHMuZmlsZW5hbWU7XG4gIGxldCBhZGRpdGlvbmFsUm9vdHMgPSBzdGF0ZS5vcHRzPy5hZGRpdGlvbmFsUm9vdHM7XG5cbiAgcmV0dXJuIGlzUmVsZXZhbnRGaWxlKGZpbGVOYW1lLCB7XG4gICAgYWRkaXRpb25hbFJvb3RzLFxuICAgIGN3ZCxcbiAgfSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHthbnl9IGVudiAtIGJhYmVsIHBsdWdpbiBlbnYsIGVudi50eXBlcyBpcyBtb3N0IGNvbW1vbmx5IHVzZWQgKGVzcCBpbiBUUylcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gdGhlIG9wdGlvbnMgZm9yIHNjb3BlZC1jc3MgLS0gdGhpcyBpcyBhbHNvIGF2YWlsYWJsZSBpbiBlYWNoIHZpc2l0b3IncyBzdGF0ZS5vcHRzXG4gKiBAcGFyYW0ge3N0cmluZ30gd29ya2luZ0RpcmVjdG9yeVxuICovXG5leHBvcnQgZGVmYXVsdCAoZW52LCBvcHRpb25zLCB3b3JraW5nRGlyZWN0b3J5KSA9PiB7XG4gIC8qKlxuICAgKiBUaGlzIGJhYmVsIHBsdWdpbiBkb2VzIHRocmVlIHRoaW5nczpcbiAgICogLSByZW1vdmVzIHRoZSBpbXBvcnQgb2Ygc2NvcGVkQ2xhc3MsIGlmIGl0IGV4aXN0c1xuICAgKiAgIC0gaWYgc2NvcGVkQ2xhc3Mgd2FzIGltcG9ydGVkLCBpdCBpcyByZW1vdmVkIGZyb20gYW55IGNvbXBvbmVudCdzIFwic2NvcGUgYmFnXCJcbiAgICogICAgICh0aGUgc2NvcGUgYmFnIGJlaW5nIGEgbG93LWxldmVsIG9iamVjdCB1c2VkIGZvciBwYXNzaW5nIHdoYXQgaXMgXCJpbiBzY29wZVwiIGZvciBhIGNvbXBvbmVudClcbiAgICogLSBhZGRzIGFuIGltcG9ydCB0byB0aGUgQ1NTIGZpbGUsIGlmIGl0IGV4aXN0c1xuICAgKi9cbiAgcmV0dXJuIHtcbiAgICB2aXNpdG9yOiB7XG4gICAgICBQcm9ncmFtOiB7XG4gICAgICAgIGVudGVyKHBhdGgsIHN0YXRlKSB7XG4gICAgICAgICAgaWYgKCFfaXNSZWxldmFudEZpbGUoc3RhdGUsIHdvcmtpbmdEaXJlY3RvcnkpKSB7XG4gICAgICAgICAgICBzdGF0ZS5jYW5Ta2lwID0gdHJ1ZTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHN0YXRlLmltcG9ydFV0aWwgPSBuZXcgSW1wb3J0VXRpbChlbnYsIHBhdGgpO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIEltcG9ydERlY2xhcmF0aW9uKHBhdGgsIHN0YXRlKSB7XG4gICAgICAgIGlmIChzdGF0ZS5jYW5Ta2lwKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhdGgubm9kZS5zb3VyY2UudmFsdWUgPT09ICdlbWJlci1zY29wZWQtY3NzJykge1xuICAgICAgICAgIGxldCBzcGVjaWZpZXIgPSBwYXRoLm5vZGUuc3BlY2lmaWVycy5maW5kKFxuICAgICAgICAgICAgKHgpID0+IHguaW1wb3J0ZWQubmFtZSA9PT0gJ3Njb3BlZENsYXNzJyxcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgaWYgKHNwZWNpZmllcikge1xuICAgICAgICAgICAgc3RhdGUuZmlsZS5vcHRzLmltcG9ydGVkU2NvcGVkQ2xhc3MgPSBzcGVjaWZpZXIubG9jYWwubmFtZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc3BlY2lmaWVyLmxvY2FsLm5hbWUgIT09ICdzY29wZWRDbGFzcycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgYFRoZSBzY29wZWRDbGFzcyBpbXBvcnQgaXMgYSBwc3VlZG8taGVscGVyLCBhbmQgbWF5IG5vdCBiZSByZW5hbWVkIGFzIGl0IGlzIHJlbW92ZWQgYXQgYnVpbGQgdGltZS5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBwYXRoLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBPbmx5IGluIHN0cmljdCBtb2RlLCBkbyB3ZSBjYXJlIGFib3V0IHJlbW9uaW5nIHRoZSBzY29wZSBiYWcgcmVmZXJlbmNlXG4gICAgICAgKi9cbiAgICAgIE9iamVjdFByb3BlcnR5KHBhdGgsIHN0YXRlKSB7XG4gICAgICAgIGlmICghc3RhdGUuZmlsZS5vcHRzPy5pbXBvcnRlZFNjb3BlZENsYXNzKSByZXR1cm47XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHBhdGgubm9kZS52YWx1ZS50eXBlID09PSAnSWRlbnRpZmllcicgJiZcbiAgICAgICAgICBwYXRoLm5vZGUudmFsdWUubmFtZSA9PT0gc3RhdGUuZmlsZS5vcHRzPy5pbXBvcnRlZFNjb3BlZENsYXNzXG4gICAgICAgICkge1xuICAgICAgICAgIHBhdGgucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIElmIHRoZXJlIGlzIGEgQ1NTIGZpbGUsIEFORCBhIGNvcnJlc3BvbmRpbmcgdGVtcGxhdGUsXG4gICAgICAgKiB3ZSBjYW4gaW1wb3J0IHRoZSBDU1MgdG8gdGhlbiBkZWZlciB0byB0aGUgQ1NTIGxvYWRlclxuICAgICAgICogb3Igb3RoZXIgQ1NTIHByb2Nlc3NpbmcgdG8gaGFuZGxlIHRoZSBwb3N0Zml4aW5nXG4gICAgICAgKi9cbiAgICAgIENhbGxFeHByZXNzaW9uKHBhdGgsIHN0YXRlKSB7XG4gICAgICAgIGlmIChzdGF0ZS5jYW5Ta2lwKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgbm9kZSA9IHBhdGgubm9kZTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgbm9kZS5jYWxsZWUubmFtZSA9PT0gJ3ByZWNvbXBpbGVUZW1wbGF0ZScgfHxcbiAgICAgICAgICBub2RlLmNhbGxlZS5uYW1lID09PSAnaGJzJyB8fFxuICAgICAgICAgIG5vZGUuY2FsbGVlLm5hbWUgPT09ICdjcmVhdGVUZW1wbGF0ZUZhY3RvcnknXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID1cbiAgICAgICAgICAgIHN0YXRlLmZpbGUub3B0cy5zb3VyY2VGaWxlTmFtZSB8fCBzdGF0ZS5maWxlLm9wdHMuZmlsZW5hbWU7XG5cbiAgICAgICAgICBsZXQgY3NzUGF0aCA9IGNzc1BhdGhGb3IoZmlsZU5hbWUpO1xuXG4gICAgICAgICAgaWYgKGV4aXN0c1N5bmMoY3NzUGF0aCkpIHtcbiAgICAgICAgICAgIGxldCBiYXNlQ1NTID0gbm9kZVBhdGguYmFzZW5hbWUoY3NzUGF0aCk7XG5cbiAgICAgICAgICAgIHN0YXRlLmltcG9ydFV0aWwuaW1wb3J0Rm9yU2lkZUVmZmVjdChgLi8ke2Jhc2VDU1N9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0sXG4gIH07XG59O1xuIiwgImltcG9ydCBhc3NlcnQgZnJvbSAnbm9kZTphc3NlcnQnO1xuaW1wb3J0IGZzU3luYyBmcm9tICdub2RlOmZzJztcbmltcG9ydCBwYXRoIGZyb20gJ25vZGU6cGF0aCc7XG5cbmltcG9ydCB7IHBhY2thZ2VVcFN5bmMgfSBmcm9tICdwYWNrYWdlLXVwJztcblxuaW1wb3J0IHsgaGFzaEZyb21BYnNvbHV0ZVBhdGggfSBmcm9tICcuL2hhc2gtZnJvbS1hYnNvbHV0ZS1wYXRoLmpzJztcbmltcG9ydCB7IGhhc2hGcm9tTW9kdWxlUGF0aCB9IGZyb20gJy4vaGFzaC1mcm9tLW1vZHVsZS1wYXRoLmpzJztcblxuZXhwb3J0IHsgaGFzaEZyb21BYnNvbHV0ZVBhdGggfSBmcm9tICcuL2hhc2gtZnJvbS1hYnNvbHV0ZS1wYXRoLmpzJztcbmV4cG9ydCB7IGhhc2hGcm9tTW9kdWxlUGF0aCB9IGZyb20gJy4vaGFzaC1mcm9tLW1vZHVsZS1wYXRoLmpzJztcblxuY29uc3QgRU1CUk9JREVSX0RJUiA9ICdub2RlX21vZHVsZXMvLmVtYnJvaWRlcic7XG5jb25zdCBFTUJST0lERVJfM19SRVdSSVRURU5fQVBQX1BBVEggPSBgJHtFTUJST0lERVJfRElSfS9yZXdyaXR0ZW4tYXBwYDtcbmNvbnN0IEVNQlJPSURFUl8zX1JFV1JJVFRFTl9BUFBfQVNTRVRTID0gYCR7RU1CUk9JREVSXzNfUkVXUklUVEVOX0FQUF9QQVRIfS9hc3NldHNgO1xuY29uc3QgRU1CUk9JREVSXzNfUkVXUklUVEVOX1BBQ0tBR0VTID0gYCR7RU1CUk9JREVSX0RJUn0vcmV3cml0dGVuLXBhY2thZ2VzYDtcbmNvbnN0IElSUkVMRVZBTlRfUEFUSFMgPSBbJ25vZGVfbW9kdWxlcy8ucG5wbSddO1xuY29uc3QgVU5TVVBQT1JURURfRElSRUNUT1JJRVMgPSBuZXcgU2V0KFsndGVzdHMnXSk7XG5cbi8qKlxuICogUmVnYXJkbGVzcyBvZiB3aGF0IHRoZSBmaWxlUGF0aCBmb3JtYXQgaXMsXG4gKiB0aGlzIHdpbGwgdHJ5IHRvIHJldHVybiB0aGUgY29ycmVjdCBwb3N0Zml4LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlUGF0aFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc2hGcm9tKGZpbGVQYXRoKSB7XG4gIGlmIChmaWxlUGF0aC5zdGFydHNXaXRoKCcvJykpIHtcbiAgICByZXR1cm4gaGFzaEZyb21BYnNvbHV0ZVBhdGgoZmlsZVBhdGgpO1xuICB9XG5cbiAgcmV0dXJuIGhhc2hGcm9tTW9kdWxlUGF0aChmaWxlUGF0aCk7XG59XG5cbi8qKlxuICogQmFzZWQgb24gZW1iZXIncyBjb21wb25lbnQgbG9jYXRpb24gY29udmVudGlvbnMsXG4gKiB0aGlzIGZ1bmN0aW9uIHdpbGwgcHJvdmlkZSBhIHBhdGggZm9yIHdoZXJlIHdlXG4gKiBleHBlY3QgdGhlIENTUyB0byBsaXZlLlxuICpcbiAqIEZvciBjby1sb2NhdGVkIHN0cnVjdHVyZTpcbiAqICAgLSBjb21wb25lbnRzL215LWNvbXBvbmVudC5oYnNcbiAqICAgLSBjb21wb25lbnRzL215LWNvbXBvbmVudC5jc3NcbiAqXG4gKiBGb3IgbmVzdGVkIGNvLWxvY2F0ZWQgc3RydWN0dXJlXG4gKiAgIC0gY29tcG9uZW50cy9teS1jb21wb25lbnQvZm9vLmhic1xuICogICAtIGNvbXBvbmVudHMvbXktY29tcG9uZW50L2Zvby5jc3NcbiAqXG4gKiBGb3IgUG9kcyByb3V0ZXMgc3RydWN0dXJlXG4gKiAgIC0gcm91dGVzL215LXJvdXRlL3RlbXBsYXRlLntoYnMsanN9XG4gKiAgIC0gcm91dGVzL215LXJvdXRlL3N0eWxlcy5jc3NcbiAqXG4gKiBEZWxpYmVyYXRlbHkgbm90IHN1cHBvcnRlZDpcbiAqICAgLSBjb21wb25lbnRzIHcvIHBvZHMgLS0gdGhpcyBpcyBkZXByZWNhdGVkIGluIDUuMTBcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZU5hbWUgLSB0aGUgaGJzLCBqcywgZ2pzLCBndHMgb3Igd2hhdGV2ZXIgY28tbG9jYXRlZCBwYXRoLlxuICogQHJldHVybnMge3N0cmluZ30gLSBleHBlY3RlZCBjc3MgcGF0aFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3NzUGF0aEZvcihmaWxlTmFtZSkge1xuICBsZXQgd2l0aG91dEV4dCA9IHdpdGhvdXRFeHRlbnNpb24oZmlsZU5hbWUpO1xuICBsZXQgY3NzUGF0aCA9IHdpdGhvdXRFeHQgKyAnLmNzcyc7XG5cbiAgaWYgKGlzUG9kKGZpbGVOYW1lKSkge1xuICAgIGNzc1BhdGggPSBmaWxlTmFtZVxuICAgICAgLnJlcGxhY2UoL3RlbXBsYXRlXFwuanMkLywgJ3N0eWxlcy5jc3MnKVxuICAgICAgLnJlcGxhY2UoL3RlbXBsYXRlXFwuaGJzLywgJ3N0eWxlcy5jc3MnKTtcbiAgfVxuXG4gIHJldHVybiBjc3NQYXRoO1xufVxuXG4vKipcbiAqIE5vdGUgdGhhdCBjb21wb25lbnRzIGluIHRoZSBcInBvZHNcIiBjb252ZW50aW9uIHdpbGxcbiAqIG5ldmVyIGJlIHN1cHBvcnRlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZVBhdGhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUG9kVGVtcGxhdGUoZmlsZVBhdGgpIHtcbiAgaWYgKGZpbGVQYXRoLmluY2x1ZGVzKCcvY29tcG9uZW50cy8nKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBmaWxlUGF0aC5lbmRzV2l0aCgndGVtcGxhdGUuanMnKSB8fCBmaWxlUGF0aC5lbmRzV2l0aCgndGVtcGxhdGUuaGJzJyk7XG59XG5cbi8qKlxuICogTm90ZSB0aGF0IGNvbXBvbmVudHMgaW4gdGhlIFwicG9kc1wiIGNvbnZlbnRpb24gd2lsbFxuICogbmV2ZXIgYmUgc3VwcG9ydGVkLlxuICpcbiAqIENoZWNrcyBpZiBhIGZpbGUgZW5kcyB3aXRoXG4gKiAtIHRlbXBsYXRlLmpzXG4gKiAtIHRlbXBsYXRlLmhic1xuICogLSBzdHlsZXMuY3NzXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGZpbGVQYXRoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BvZChmaWxlUGF0aCkge1xuICBpZiAoZmlsZVBhdGguaW5jbHVkZXMoJy9jb21wb25lbnRzLycpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKGlzUG9kVGVtcGxhdGUoZmlsZVBhdGgpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gZmlsZVBhdGguZW5kc1dpdGgoJ3N0eWxlcy5jc3MnKTtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGZpbGVQYXRoXG4gKiBAcmV0dXJucyB0aGUgc2FtZSBwYXRoLCBidXQgd2l0aG91dCB0aGUgZXh0ZW5zaW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRob3V0RXh0ZW5zaW9uKGZpbGVQYXRoKSB7XG4gIGxldCBwYXJzZWQgPSBwYXRoLnBhcnNlKGZpbGVQYXRoKTtcblxuICByZXR1cm4gcGF0aC5qb2luKHBhcnNlZC5kaXIsIHBhcnNlZC5uYW1lKTtcbn1cblxuLyoqXG4gKiBFeGFtcGxlcyBmb3IgZmlsZU5hbWVcbiAqIC0gYWJzb2x1dGUgb24tZGlzayBwYXRoXG4gKiAtIGluIHdlYnBhY2tcbiAqICAgLSBVUkwtYWJzb2x1dGUgcGF0aCwgc3RhcnRpbmcgd2l0aCAvXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGZpbGVOYW1lXG4gKiBAcGFyYW0ge3sgYWRkaXRpb25hbFJvb3RzPzogc3RyaW5nW107IGN3ZDogc3RyaW5nIH19IG9wdGlvbnNcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1JlbGV2YW50RmlsZShmaWxlTmFtZSwgeyBhZGRpdGlvbmFsUm9vdHMsIGN3ZCB9KSB7XG4gIGlmIChmaWxlTmFtZS5zdGFydHNXaXRoKCcvQGVtYnJvaWRlcicpKSByZXR1cm4gZmFsc2U7XG4gIGlmIChJUlJFTEVWQU5UX1BBVEhTLnNvbWUoKGkpID0+IGZpbGVOYW1lLmluY2x1ZGVzKGkpKSkgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChmaWxlTmFtZS5pbmNsdWRlcygnL25vZGVfbW9kdWxlcy8nKSkge1xuICAgIC8vIGlmIGEgZmlsZSBpcyBub3QgdGhlIGVtYnJvaWRlciBjYWNoZSBkaXJlY3RvcnlcbiAgICAvLyBhbmQgaXMgaW4gbm9kZV9tb2R1bGVzLCBza2lwIGl0LlxuICAgIGlmICghZmlsZU5hbWUuaW5jbHVkZXMoRU1CUk9JREVSX0RJUikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyByZXdyaXR0ZW4gcGFja2FnZXMgc2hvdWxkIGhhdmUgYWxyZWFkeSBiZWVuIHByb2Nlc3NlZCBhdCB0aGVpciBvd25cbiAgICAvLyBwdWJsaXNoIHRpbWVcbiAgICBpZiAoZmlsZU5hbWUuaW5jbHVkZXMoRU1CUk9JREVSXzNfUkVXUklUVEVOX1BBQ0tBR0VTKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFRoZXNlIGFyZSBhbHJlYWR5IHRoZSBidW5kbGVkIGZpbGVzLlxuICAgIGlmIChmaWxlTmFtZS5pbmNsdWRlcyhFTUJST0lERVJfM19SRVdSSVRURU5fQVBQX0FTU0VUUykpIHtcbiAgICAgIC8vIG5vdCBzdXBwb3J0ZWQsIG5ldmVyIHdpbGwgYmVcbiAgICAgIGlmIChmaWxlTmFtZS5lbmRzV2l0aChgJHtFTUJST0lERVJfM19SRVdSSVRURU5fQVBQX0FTU0VUU30vdGVzdHMuanNgKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIElkZWFsbHksIHdlIG5ldmVyIGdldCBoZXJlIC0tIGluZGljYXRlcyB3ZSdyZSBub3QgZmlsdGVyaW5nIGVmZmVjdGl2ZWx5IGluIGJhYmVsXG4gICAgICAvLyBOT1RFOiBpZiB3ZSBnZXQgaGVyZSwgd2UncmUgdHJ5aW5nIHRvIG9wZXJhdGUgb24gYSBmaWxlIHRvbyBsYXRlLlxuICAgICAgLy8gICAgICAgd2UgbmVlZCBTY29wZWRDU1MgdG8gb3BlcmF0ZSBhcyBjbG9zZSB0byBvcmlnaW5hbCBzb3VyY2UgYXMgcG9zc2libGUgLS0gbm90IG91dHB1dCBmaWxlcy5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBsZXQgd29ya3NwYWNlID0gZmluZFdvcmtzcGFjZVBhdGgoZmlsZU5hbWUpO1xuXG4gIGFzc2VydChjd2QsIGBjd2Qgd2FzIG5vdCBwYXNzZWQgdG8gaXNSZWxldmFudEZpbGVgKTtcblxuICBsZXQgb3VyV29ya3NwYWNlID0gZmluZFdvcmtzcGFjZVBhdGgoY3dkKTtcblxuICBpZiAod29ya3NwYWNlICE9PSBvdXJXb3Jrc3BhY2UpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBsZXQgbG9jYWwgPSBmaWxlTmFtZS5yZXBsYWNlKHdvcmtzcGFjZSwgJycpO1xuICBsZXQgWywgLi4ucGFydHNdID0gbG9jYWwuc3BsaXQoJy8nKS5maWx0ZXIoQm9vbGVhbik7XG5cbiAgaWYgKFVOU1VQUE9SVEVEX0RJUkVDVE9SSUVTLmhhcyhwYXJ0c1swXSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogTW9zdGx5IHBvZHMgc3VwcG9ydC5cbiAgICogZm9sa3MgbmVlZCB0byBvcHQgaW4gdG8gcG9kcyAocm91dGVzKSwgYmVjYXVzZSBldmVyeSBwb2RzIGFwcCBjYW4gYmUgY29uZmlndXJlZCBkaWZmZXJlbnRseVxuICAgKi9cbiAgbGV0IHJvb3RzID0gWycvY29tcG9uZW50cy8nLCAnL3RlbXBsYXRlcy8nLCAuLi4oYWRkaXRpb25hbFJvb3RzIHx8IFtdKV07XG5cbiAgaWYgKCFyb290cy5zb21lKChyb290KSA9PiBmaWxlTmFtZS5pbmNsdWRlcyhyb290KSkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhY2thZ2VTY29wZWRQYXRoVG9Nb2R1bGVQYXRoKHBhY2thZ2VTY29wZWRQYXRoKSB7XG4gIC8qKlxuICAgKiAqQnkgY29udmVudGlvbiosIGBzcmNgIGlzIG9taXR0ZWQgZnJvbSBjb21wb25lbnQgcGF0aHMuXG4gICAqIFdlIGNhbiByZWZsZWN0IHRoZSBzYW1lIGJlaGF2aW9yIGJ5IHJlcGxhY2luZyBzcmMvXG4gICAqIHdpdGggYW4gZW1wdHkgc3RyaW5nLlxuICAgKlxuICAgKiBDU1MgaXNuJ3QgZW1pdHRlZCBhcyBhIGNvLWxvY2F0ZWQgbW9kdWxlLCBidXRcbiAgICogdG8ga2VlcCBjb252ZW50aW9ucyBjb25zaXN0ZW50IGFjcm9zcyBsYW5ndWFnZXMsXG4gICAqIHdlIGNhbiBwcmV0ZW5kIGl0IGlzLlxuICAgKlxuICAgKiBBbnkgY3VzdG9taXphdGlvbiBiZXlvbmQgcmVtb3ZpbmcgYHNyY2AgYW5kIGBhcHBgIGlzIHBvdGVudGlhbGx5IGNvbmZ1c2luZy5cbiAgICogSWYgd2UgbmVlZCBmdXJ0aGVyIGN1c3RvbWl6YXRpb25zLCB3ZSdsbCB3YW50IHRvIG1hdGNoIG9uIGBleHBvcnRzYCBpbiB0aGVcbiAgICogY29ycmVzcG9uZGluZyBwYWNrYWdlLmpzb25cbiAgICovXG4gIGxldCBwYWNrYWdlUmVsYXRpdmUgPSBwYWNrYWdlU2NvcGVkUGF0aC5yZXBsYWNlKC9eXFwvc3JjXFwvLywgJy8nKTtcblxuICBsZXQgcGFyc2VkID0gcGF0aC5wYXJzZShwYWNrYWdlUmVsYXRpdmUpO1xuXG4gIGlmIChpc1BvZChwYWNrYWdlUmVsYXRpdmUpKSB7XG4gICAgLyoqXG4gICAgICogRm9yIHBvZHMsIHdlIGNob3Agb2ZmIHRoZSB3aG9sZSBmaWxlLCBhbmQgdXNlIHRoZSBkaXIgbmFtZSBhcyB0aGUgXCJtb2R1bGVQYXRoXCJcbiAgICAgKi9cbiAgICByZXR1cm4gcGFyc2VkLmRpcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiBhbiBleHRlbnNpb24gaXMgcGFzc2VkLCByZW1vdmUgaXQuXG4gICAqIFdoZW4gdXNpbmcgcGFja2FnZXJzLCBmb2xrcyBhcmUgdXNlZCB0byBub3QgaGF2aW5nIHRvIHNwZWNpZnkgZXh0ZW5zaW9ucyBmb3IgZmlsZXMuXG4gICAqIFNpbmNlIHdlIGRvbid0IGV2ZW4gZW1pdCBjc3MgZmlsZXMgY28tbG9jYXRlZCB0byBlYWNoIG1vZHVsZSxcbiAgICogdGhpcyBoZWxwcyB1cyBub3QgY29udmV5IGEgbGllIHRoYXQgYSBmaWxlIG1heSBleGlzdCBpbiBhdCBydW50aW1lLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSBgPG1vZHVsZS1uYW1lPi9jb21wb25lbnRzL2J1dHRvbmAuXG4gICAqIEl0IGRvZXNuJ3QgbWF0dGVyIHdoYXQgdGhlIGV4dGVuc2lvbiBpcywgYmVjYXVzZSB5b3UgY2FuIG9ubHkgaGF2ZSBvbmUgY3NzIGZpbGVcbiAgICogZm9yIHRoZSBidXR0b24gbW9kdWxlIGFueXdheS5cbiAgICovXG4gIGxldCBsb2NhbFBhY2thZ2VyU3R5bGVQYXRoID0gcGF0aC5qb2luKHBhcnNlZC5kaXIsIHBhcnNlZC5uYW1lKTtcblxuICByZXR1cm4gbG9jYWxQYWNrYWdlclN0eWxlUGF0aDtcbn1cblxuLyoqXG4gKiByZXR1cm5zIHRoZSBhcHAtbW9kdWxlIHBhdGggb2YgdGhlIHNvdXJjZSBmaWxlXG4gKlxuICogVGhpcyBhc3N1bWVzIG5vcm1hbCBlbWJlciBhcHAgY29udmVudGlvbnNcbiAqXG4gKiB3aGljaCBpcyBgPHBhY2thZ2UuanNvbiNuYW1lPi9wYXRoLXRvLWZpbGVgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBQYXRoKHNvdXJjZVBhdGgpIHtcbiAgbGV0IHdvcmtzcGFjZVBhdGggPSBmaW5kV29ya3NwYWNlUGF0aChzb3VyY2VQYXRoKTtcbiAgbGV0IG5hbWUgPSBtb2R1bGVOYW1lKHNvdXJjZVBhdGgpO1xuXG4gIC8qKlxuICAgKiAgVW5kZXIgZW1icm9pZGVyIGJ1aWxkcywgdGhlIHNwZWMtY29tcGxpYW50IHZlcnNpb24gb2YgdGhlIGFwcFxuICAgKiBoYXMgYWxsIHRoZSBmaWxlcyB1bmRlciBhIGZvbGRlciB3aGljaCByZXByZXNlbnRzIHRoZSBwYWNrYWdlIG5hbWUsXG4gICAqIHJhdGhlciB0aGFuIFwiYXBwXCIuXG4gICAqL1xuICBsZXQgcGFja2FnZVJlbGF0aXZlID0gc291cmNlUGF0aC5yZXBsYWNlKHdvcmtzcGFjZVBhdGgsICcnKTtcblxuICAvKipcbiAgICogQnV0IHdlIGFsc28gZG9uJ3Qgd2FudCAnYXBwJyAtLSB3aGljaCBpcyBwcmVzZW50IGluIHRoZSB2MSBhZGRvbiBwaXBlbGluZVxuICAgKi9cbiAgcGFja2FnZVJlbGF0aXZlID0gcGFja2FnZVJlbGF0aXZlLnJlcGxhY2UoYC9hcHAvYCwgYC9gKTtcblxuICAvKipcbiAgICogYWxzbyBhbHNvLCB3ZSBrbm93IHRoYXQgdGhlIHJlLXdyaXR0ZW4gYXBwIHN0cnVjdHVyZSBpbiBlbWJyb2lkZXJAdjNcbiAgICogaXMgZXh0cmFuZW91cywgYW5kIHdlIGNhbiBjb2xsYXBzZSBpdFxuICAgKi9cbiAgcGFja2FnZVJlbGF0aXZlID0gcGFja2FnZVJlbGF0aXZlLnJlcGxhY2UoXG4gICAgYCR7RU1CUk9JREVSXzNfUkVXUklUVEVOX0FQUF9QQVRIfS9gLFxuICAgICcvJyxcbiAgKTtcblxuICBsZXQgbG9jYWxQYWNrYWdlclN0eWxlUGF0aCA9IHBhY2thZ2VTY29wZWRQYXRoVG9Nb2R1bGVQYXRoKHBhY2thZ2VSZWxhdGl2ZSk7XG5cbiAgcmV0dXJuIGAke25hbWV9JHtsb2NhbFBhY2thZ2VyU3R5bGVQYXRofWA7XG59XG5cbi8qKlxuICogVG8gYXZvaWQgaGl0dGluZyB0aGUgZmlsZXN5c2V0bSwgd2UnbGwgc3RvcmUgYWxsIGZvdW5kXG4gKiBwcm9qZWN0IHBhdGhzIGJlcmUsIHNvIHdlIGNhbiwgaW4gbWVtb3J5LFxuICogZ2V0IHRoZSBmb2xkZXIgd2hlcmUgYSBwYWNrYWdlLmpzb24gZXhpc3RzLCByYXRoZXIgdGhhblxuICogaGl0IHRoZSBmaWxlIHN5c3RlbSBldmVyeSB0aW1lLlxuICovXG5jb25zdCBTRUVOID0gbmV3IFNldCgpO1xuXG5mdW5jdGlvbiBnZXRTZWVuKHNvdXJjZVBhdGgpIHtcbiAgaWYgKFNFRU4uaGFzKHNvdXJjZVBhdGgpKSByZXR1cm4gc291cmNlUGF0aDtcblxuICBsZXQgcGFydHMgPSBzb3VyY2VQYXRoLnNwbGl0KCcvJyk7XG5cbiAgZm9yIChsZXQgaSA9IHBhcnRzLmxlbmd0aCAtIDE7IGkgPiAxOyBpLS0pIHtcbiAgICBsZXQgdG9DaGVjayA9IHBhcnRzLnNsaWNlKDAsIGkpLmpvaW4oJy8nKTtcblxuICAgIGxldCBzZWVuID0gU0VFTi5oYXModG9DaGVjayk7XG5cbiAgICBpZiAoc2Vlbikge1xuICAgICAgcmV0dXJuIHRvQ2hlY2s7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kV29ya3NwYWNlUGF0aChzb3VyY2VQYXRoKSB7XG4gIGlmIChzb3VyY2VQYXRoLmluY2x1ZGVzKEVNQlJPSURFUl8zX1JFV1JJVFRFTl9BUFBfUEFUSCkpIHtcbiAgICBzb3VyY2VQYXRoID0gc291cmNlUGF0aC5zcGxpdChFTUJST0lERVJfM19SRVdSSVRURU5fQVBQX1BBVEgpWzBdO1xuICB9XG5cbiAgaWYgKHNvdXJjZVBhdGguZW5kc1dpdGgoJy8nKSkge1xuICAgIHNvdXJjZVBhdGggPSBzb3VyY2VQYXRoLnJlcGxhY2UoL1xcLyQvLCAnJyk7XG4gIH1cblxuICBsZXQgc2VlbiA9IGdldFNlZW4oc291cmNlUGF0aCk7XG5cbiAgaWYgKHNlZW4pIHtcbiAgICByZXR1cm4gc2VlbjtcbiAgfVxuXG4gIGxldCBjYW5kaWRhdGVQYXRoID0gcGF0aC5qb2luKHNvdXJjZVBhdGgsICdwYWNrYWdlLmpzb24nKTtcblxuICBjb25zdCBpc1dvcmtzcGFjZSA9IGZzU3luYy5leGlzdHNTeW5jKGNhbmRpZGF0ZVBhdGgpO1xuXG4gIGlmIChpc1dvcmtzcGFjZSkge1xuICAgIHJldHVybiBzb3VyY2VQYXRoO1xuICB9XG5cbiAgY29uc3QgcGFja2FnZUpzb25QYXRoID0gcGFja2FnZVVwU3luYyh7Y3dkOiBzb3VyY2VQYXRofSk7XG5cbiAgaWYgKCFwYWNrYWdlSnNvblBhdGgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBkZXRlcm1pbmUgcHJvamVjdCBmb3IgJHtzb3VyY2VQYXRofWApO1xuICB9XG5cbiAgY29uc3Qgd29ya3NwYWNlUGF0aCA9IHBhdGguZGlybmFtZShwYWNrYWdlSnNvblBhdGgpO1xuXG4gIFNFRU4uYWRkKHdvcmtzcGFjZVBhdGgpO1xuXG4gIHJldHVybiB3b3Jrc3BhY2VQYXRoO1xufVxuXG5jb25zdCBNQU5JRkVTVF9DQUNIRSA9IG5ldyBNYXAoKTtcblxuLyoqXG4gKiBXaWxsIHJldHVybiB0aGUgcGFja2FnZS5qc29uI25hbWUsIG9yIGNvbmZpZy9lbnZpcm9ubWVudCNtb3VkbGVQcmVmaXggKGlmIHYxIGFwcClcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc291cmNlUGF0aFxuICovXG5leHBvcnQgZnVuY3Rpb24gbW9kdWxlTmFtZShzb3VyY2VQYXRoKSB7XG4gIGNvbnN0IHdvcmtzcGFjZSA9IGZpbmRXb3Jrc3BhY2VQYXRoKHNvdXJjZVBhdGgpO1xuICBjb25zdCBtYW5pZmVzdCA9IGdldE1hbmlmZXN0KHdvcmtzcGFjZSk7XG5cbiAgaWYgKG1hbmlmZXN0WydlbWJlci1hZGRvbiddKSB7XG4gICAgLyoqXG4gICAgICogTGlicmFyaWVzIGFyZSBub3QgYWxsb3dlZCB0byBjdXN0b21pemUgdGhlaXIgbW9kdWxlIG5hbWVcbiAgICAgKiB0byBiZSBkaWZmZXJlbnQgZnJvbSB0aGVpciBwYWNrYWdlIG5hbWUuXG4gICAgICpcbiAgICAgKiAoSXQncyBhbHNvIGJvbmtlcnMgdGhhdCB0aGlzIGlzIGFsbG93ZWQgZm9yIHYxIGFwcHMpXG4gICAgICovXG4gICAgcmV0dXJuIG1hbmlmZXN0Lm5hbWU7XG4gIH1cblxuICAvKipcbiAgICogRm9yIHYxIGFwcHMsIHdlIG5lZWQgdG8gcmVmZXJlbmNlIHRoZSBjb25maWcvZW52aXJvbm1lbnQuanMgZmlsZVxuICAgKiB0byBzZWUgaWYgdGhlIG1vZHVsZVByZWZpeCBzZXR0aW5nIGRpZmZlcnMgZnJvbSBtYW5pZmVzdC5uYW1lO1xuICAgKi9cbiAgbGV0IGVudmlyb25tZW50SlMgPSBwYXRoLmpvaW4od29ya3NwYWNlLCAnY29uZmlnL2Vudmlyb25tZW50LmpzJyk7XG5cbiAgLyoqXG4gICAqIE5PVEU6IHRoZSBlbnZpcm9ubWVudC5qcyBpcyBhIGNvbW1vbkpTIGZpbGUsIHNvIHdlIGNhbiBzeW5jaHJvbm91c2x5IHJlcXVpcmUgaXRcbiAgICpcbiAgICogVE9ETzogaWYgd2UgaGF2ZSBpc3N1ZXMgd2l0aCBsb2FkaW5nIHRoaXMgZmlsZSBsYXRlciB3ZSBzaG91bGQgcHJvYmFibHkganVzdCBydW4ganNjb2Rlc2hpZnQgb24gaXRcbiAgICogICAgICAgYnV0IHRoYXQgY291bGQgYWxsb3cgdXMgdG8gYmUgYnJpdHRsZSBpbiBkaWZmZXJlbnQgd2F5cywgbGlrZSBpZiBmb2xrcyBzdHJheSBmcm9tIHRoZSB3YXkgdGhlXG4gICAqICAgICAgIGZpbGUgaXMgbGFpZCBvdXQgZnJvbSB0aGUgYmx1ZXByaW50IGRlZmF1bHRzLlxuICAgKi9cbiAgaWYgKGZzU3luYy5leGlzdHNTeW5jKGVudmlyb25tZW50SlMpKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmIC0tIHRoaXMgZXhpc3RzXG4gICAgY29uc3QgZW52Rm4gPSByZXF1aXJlKGVudmlyb25tZW50SlMpO1xuICAgIGNvbnN0IGVudiA9IGVudkZuKCdlbWJlci1zY29wZWQtY3NzJyk7XG5cbiAgICByZXR1cm4gZW52Lm1vZHVsZVByZWZpeCB8fCBtYW5pZmVzdC5uYW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIEZhbGxiYWNrIHRvIHRoZSB0cnVlXHUyMTIyIG1vZHVsZVx1MjEyMiBuYW1lLlxuICAgKi9cbiAgcmV0dXJuIG1hbmlmZXN0Lm5hbWU7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHdvcmtzcGFjZVxuICovXG5mdW5jdGlvbiBnZXRNYW5pZmVzdCh3b3Jrc3BhY2UpIHtcbiAgbGV0IGV4aXN0aW5nID0gTUFOSUZFU1RfQ0FDSEUuZ2V0KHdvcmtzcGFjZSk7XG5cbiAgaWYgKGV4aXN0aW5nKSB7XG4gICAgcmV0dXJuIGV4aXN0aW5nO1xuICB9XG5cbiAgbGV0IGJ1ZmZlciA9IGZzU3luYy5yZWFkRmlsZVN5bmMocGF0aC5qb2luKHdvcmtzcGFjZSwgJ3BhY2thZ2UuanNvbicpKTtcbiAgbGV0IGNvbnRlbnQgPSBidWZmZXIudG9TdHJpbmcoKTtcbiAgbGV0IGpzb24gPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuXG4gIE1BTklGRVNUX0NBQ0hFLnNldCh3b3Jrc3BhY2UsIGpzb24pO1xuXG4gIHJldHVybiBqc29uO1xufVxuIiwgImltcG9ydCBtZDUgZnJvbSAnYmx1ZWltcC1tZDUnO1xuXG4vKipcbiAqIFRoZSBpbnRlbnQgb2YgdGhpcyBmdW5jdGlvbiBpcyB0byBnZW5lcmF0ZSB0aGUgc3VmZml4L3Bvc3RmaXggZm9yIHRoZVxuICogY3NzIGNsYXNzZXMsIGJhc2VkIG9uIHRoZSBtb2R1bGUtc2NvcGVkIHBhdGggbmFtZS5cbiAqXG4gKiBmb3IgZXhhbXBsZSxcbiAqICAgIGhhc2goJ215LWFwcC9jb21wb25lbnRzL2ZvbycpXG4gKiAgaW5zdGVhZCBvZlxuICogICAgaGFzaCgnYXBwL2NvbXBvbmVudHMvZm9vJylcbiAqXG4gKiAgKHVubGVzcyB5b3VyIGFwcCBuYW1lIGlzICdhcHAnKVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtb2R1bGVQYXRoXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzaChtb2R1bGVQYXRoKSB7XG4gIHJldHVybiAnZScgKyBtZDUobW9kdWxlUGF0aCkuc3Vic3RyaW5nKDAsIDgpO1xufVxuXG5cbmV4cG9ydCBjb25zdCBoYXNoRnJvbU1vZHVsZVBhdGggPSBoYXNoO1xuIiwgImltcG9ydCB7IGhhc2ggfSBmcm9tICcuL2hhc2gtZnJvbS1tb2R1bGUtcGF0aC5qcyc7XG5pbXBvcnQgeyBhcHBQYXRoIH0gZnJvbSAnLi91dGlscy5qcyc7XG5cbmV4cG9ydCB7IGhhc2ggfSBmcm9tICcuL2hhc2gtZnJvbS1tb2R1bGUtcGF0aC5qcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNoRnJvbUFic29sdXRlUGF0aChhYnNvbHV0ZVBhdGgpIHtcbiAgLyoqXG4gICAqIFRoZSB3aG9sZSBvZiBgYXBwUGF0aGAgdWx0aW1hdGVseSB0cmFuc2Zvcm1zIHRoZSBgYWJzb2x1dGVQYXRoYFxuICAgKiBpbnRvIHRoZSBleGFjdCBzdHJpbmcgdGhhdCBmb2xrcyB3aWxsIHBhc3MgdG8gYHJlbGF0aXZlUGF0aGBcbiAgICogYXQgcnVudGltZS5cbiAgICovXG4gIGNvbnN0IG1vZHVsZVBhdGggPSBhcHBQYXRoKGFic29sdXRlUGF0aCk7XG4gIGNvbnN0IHBvc3RmaXggPSBoYXNoKG1vZHVsZVBhdGgpO1xuXG4gIHJldHVybiBwb3N0Zml4O1xufVxuIiwgImltcG9ydCB7IGV4aXN0c1N5bmMgfSBmcm9tICdub2RlOmZzJztcbmltcG9ydCB7IHJlYWRGaWxlIH0gZnJvbSAnbm9kZTpmcy9wcm9taXNlcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdub2RlOnBhdGgnO1xuaW1wb3J0IHByb2Nlc3MgZnJvbSAnbm9kZTpwcm9jZXNzJztcblxuaW1wb3J0IHsgY3JlYXRlVW5wbHVnaW4gfSBmcm9tICd1bnBsdWdpbic7XG5cbmltcG9ydCBnZXRDbGFzc2VzVGFnc0Zyb21Dc3MgZnJvbSAnLi4vbGliL2dldENsYXNzZXNUYWdzRnJvbUNzcy5qcyc7XG5pbXBvcnQgeyBoYXNoRnJvbUFic29sdXRlUGF0aCB9IGZyb20gJy4uL2xpYi9wYXRoL3V0aWxzLmpzJztcbmltcG9ydCByZXBsYWNlSGJzSW5KcyBmcm9tICcuLi9saWIvcmVwbGFjZUhic0luSnMuanMnO1xuaW1wb3J0IHJld3JpdGVDc3MgZnJvbSAnLi4vbGliL3Jld3JpdGVDc3MuanMnO1xuaW1wb3J0IHJld3JpdGVIYnMgZnJvbSAnLi4vbGliL3Jld3JpdGVIYnMuanMnO1xuXG5mdW5jdGlvbiBpc0pzRmlsZShpZCkge1xuICByZXR1cm4gKFxuICAgIGlkLmVuZHNXaXRoKCcuanMnKSB8fFxuICAgIGlkLmVuZHNXaXRoKCcudHMnKSB8fFxuICAgIGlkLmVuZHNXaXRoKCcuZ2pzJykgfHxcbiAgICBpZC5lbmRzV2l0aCgnLmd0cycpXG4gICk7XG59XG5cbmZ1bmN0aW9uIGlzSGJzRmlsZShpZCkge1xuICByZXR1cm4gaWQuZW5kc1dpdGgoJy5oYnMnKTtcbn1cblxuZnVuY3Rpb24gaXNDc3NGaWxlKGlkKSB7XG4gIHJldHVybiBpZC5lbmRzV2l0aCgnLmNzcycpO1xufVxuXG5hc3luYyBmdW5jdGlvbiB0cmFuc2Zvcm1Kc0ZpbGUoY29kZSwgaWQpIHtcbiAgY29uc3QgY3NzUGF0aCA9IGlkLmVuZHNXaXRoKCcuaGJzJylcbiAgICA/IGlkLnJlcGxhY2UoL1xcLmhicyQvLCAnLmNzcycpXG4gICAgOiBpZC5yZXBsYWNlKC8oXFwuaGJzKT9cXC4oanN8dHN8Z2pzfGd0cykkLywgJy5jc3MnKTtcbiAgY29uc3QgY3NzRmlsZU5hbWUgPSBwYXRoLmJhc2VuYW1lKGNzc1BhdGgpO1xuXG4gIGNvbnN0IGNzc0V4aXN0cyA9IGV4aXN0c1N5bmMoY3NzUGF0aCk7XG4gIGxldCBjc3M7XG5cbiAgaWYgKGNzc0V4aXN0cykge1xuICAgIGNzcyA9IGF3YWl0IHJlYWRGaWxlKGNzc1BhdGgsICd1dGY4Jyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvZGUsXG4gICAgICBtYXA6IG51bGwsXG4gICAgfTtcbiAgfVxuXG4gIC8vIGFkZCBjc3MgaW1wb3J0IGZvciBqcyBhbmQgZ2pzIGZpbGVzXG4gIGNvZGUgPSBgaW1wb3J0ICcuLyR7Y3NzRmlsZU5hbWV9JztcXG5cXG4ke2NvZGV9YDtcblxuICAvLyByZXdyaXRlIGhicyBpbiBqcyBpbiBjYXNlIGl0IGlzIGdqcyBmaWxlIChmb3IgZ2pzIGZpbGVzIGhicyBpcyBhbHJlYWR5IGluIGpzIGZpbGUpXG5cbiAgY29uc3QgcmV3cml0dGVuQ29kZSA9IHJlcGxhY2VIYnNJbkpzKGNvZGUsIChoYnMsIHNjb3BlZENsYXNzKSA9PiB7XG4gICAgY29uc3QgeyBjbGFzc2VzLCB0YWdzIH0gPSBnZXRDbGFzc2VzVGFnc0Zyb21Dc3MoY3NzKTtcbiAgICBjb25zdCBwb3N0Zml4ID0gaGFzaEZyb21BYnNvbHV0ZVBhdGgoY3NzUGF0aCk7XG4gICAgY29uc3QgcmV3cml0dGVuID0gcmV3cml0ZUhicyhoYnMsIGNsYXNzZXMsIHRhZ3MsIHBvc3RmaXgsIHNjb3BlZENsYXNzKTtcblxuICAgIHJldHVybiByZXdyaXR0ZW47XG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgY29kZTogcmV3cml0dGVuQ29kZSxcbiAgICBtYXA6IG51bGwsXG4gIH07XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybUNzc0ZpbGUoY29kZSwgaWQsIGxheWVyTmFtZSkge1xuICBjb25zdCBqc1BhdGggPSBpZC5yZXBsYWNlKC9cXC5jc3MkLywgJy5nanMnKTtcbiAgY29uc3QgZ3RzUGF0aCA9IGlkLnJlcGxhY2UoL1xcLmNzcyQvLCAnLmd0cycpO1xuICBjb25zdCBoYnNQYXRoID0gaWQucmVwbGFjZSgvXFwuY3NzJC8sICcuaGJzJyk7XG5cbiAgY29uc3QganNFeGlzdHMgPSBleGlzdHNTeW5jKGpzUGF0aCk7XG4gIGNvbnN0IGd0c0V4aXN0cyA9IGV4aXN0c1N5bmMoZ3RzUGF0aCk7XG4gIGNvbnN0IGhic0V4aXN0cyA9IGV4aXN0c1N5bmMoaGJzUGF0aCk7XG5cbiAgaWYgKGpzRXhpc3RzIHx8IGhic0V4aXN0cyB8fCBndHNFeGlzdHMpIHtcbiAgICBjb25zdCBwb3N0Zml4ID0gaGFzaEZyb21BYnNvbHV0ZVBhdGgoaWQpO1xuXG4gICAgY29kZSA9IHJld3JpdGVDc3MoY29kZSwgcG9zdGZpeCwgcGF0aC5iYXNlbmFtZShpZCksIGxheWVyTmFtZSk7XG4gIH1cblxuICByZXR1cm4gY29kZTtcbn1cblxuZnVuY3Rpb24gZ2F0aGVyQ1NTRmlsZXMoYnVuZGxlKSB7XG4gIGxldCBjc3NGaWxlcyA9IFtdO1xuXG4gIGZvciAobGV0IGFzc2V0IGluIGJ1bmRsZSkge1xuICAgIGNvbnN0IGNzc0Fzc2V0ID0gYXNzZXQucmVwbGFjZSgnanMnLCAnY3NzJyk7XG5cbiAgICBpZiAoIWFzc2V0LmVuZHNXaXRoKCdqcycpIHx8ICFidW5kbGVbY3NzQXNzZXRdKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuZW52aXJvbm1lbnQgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgIGNzc0ZpbGVzLnB1c2goYnVuZGxlW2Nzc0Fzc2V0XS5zb3VyY2UpO1xuICAgICAgZGVsZXRlIGJ1bmRsZVtjc3NBc3NldF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNzc0ltcG9ydCA9IHBhdGguYmFzZW5hbWUoYXNzZXQucmVwbGFjZSgnLmpzJywgJy5jc3MnKSk7XG4gICAgICBjb25zdCBpbXBvcnRMaW5lID0gYGltcG9ydCAnLi8ke2Nzc0ltcG9ydH0nO2A7XG5cbiAgICAgIGNvbnN0IGNvZGUgPSBidW5kbGVbYXNzZXRdLmNvZGU7XG5cbiAgICAgIC8vIGFkZCBpbXBvcnQgdG8ganMgZmlsZXNcbiAgICAgIGlmIChjb2RlICYmIGNvZGUuaW5kZXhPZihpbXBvcnRMaW5lKSA8IDApIHtcbiAgICAgICAgYnVuZGxlW2Fzc2V0XS5jb2RlID0gYCR7aW1wb3J0TGluZX1cXG5gICsgY29kZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gY3NzRmlsZXM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVVucGx1Z2luKFxuICAvKipcbiAgICogQHR5cGVkZWYge29iamVjdH0gT3B0aW9uc1xuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2xheWVyTmFtZV0gdGhlIG5hbWUgb2YgdGhlIGxheWVyIHRvIHBsYWNlIHRoZSBnZW5lcmF0ZWQgY3NzLiBEZWZhdWx0cyB0byBcImNvbXBvbmVudHNcIlxuICAgKlxuICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRpb25zXVxuICAgKi9cbiAgKG9wdGlvbnMpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogJ2VtYmVyLXNjb3BlZC1jc3MtdW5wbHVnaW4nLFxuXG4gICAgICBnZW5lcmF0ZUJ1bmRsZShfLCBidW5kbGUpIHtcbiAgICAgICAgbGV0IGNzc0ZpbGVzID0gZ2F0aGVyQ1NTRmlsZXMoYnVuZGxlKTtcblxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuZW52aXJvbm1lbnQgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgICB0aGlzLmVtaXRGaWxlKHtcbiAgICAgICAgICAgIHR5cGU6ICdhc3NldCcsXG4gICAgICAgICAgICBmaWxlTmFtZTogJ3Njb3BlZC5jc3MnLFxuICAgICAgICAgICAgc291cmNlOiBjc3NGaWxlcy5qb2luKCdcXG4nKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHZpdGU6IHtcbiAgICAgICAgZ2VuZXJhdGVCdW5kbGUoKSB7XG4gICAgICAgICAgLyogZGVsaWJlcmF0ZWx5IGRvIG5vdGhpbmcgKi9cbiAgICAgICAgfSxcbiAgICAgICAgdHJhbnNmb3JtKGNvZGUsIGpzUGF0aCkge1xuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEhCUyBmaWxlcyBhcmUgYWN0dWFsbHkgSlMgZmlsZXMgd2l0aCBhIGNhbGwgdG8gcHJlY29tcGlsZVRlbXBsYXRlXG4gICAgICAgICAgICovXG4gICAgICAgICAgaWYgKGlzSGJzRmlsZShqc1BhdGgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtSnNGaWxlKGNvZGUsIGpzUGF0aCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc0pzRmlsZShqc1BhdGgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtSnNGaWxlKGNvZGUsIGpzUGF0aCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc0Nzc0ZpbGUoanNQYXRoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUNzc0ZpbGUoY29kZSwganNQYXRoLCBvcHRpb25zPy5sYXllck5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgIH0sXG5cbiAgICAgIHRyYW5zZm9ybShjb2RlLCBqc1BhdGgpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhCUyBmaWxlcyBhcmUgYWN0dWFsbHkgSlMgZmlsZXMgd2l0aCBhIGNhbGwgdG8gcHJlY29tcGlsZVRlbXBsYXRlXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoaXNIYnNGaWxlKGpzUGF0aCkpIHtcbiAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtSnNGaWxlKGNvZGUsIGpzUGF0aCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNKc0ZpbGUoanNQYXRoKSkge1xuICAgICAgICAgIHJldHVybiB0cmFuc2Zvcm1Kc0ZpbGUoY29kZSwganNQYXRoKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc0Nzc0ZpbGUoanNQYXRoKSkge1xuICAgICAgICAgIGxldCBjc3MgPSB0cmFuc2Zvcm1Dc3NGaWxlKGNvZGUsIGpzUGF0aCwgb3B0aW9ucz8ubGF5ZXJOYW1lKTtcblxuICAgICAgICAgIGNvbnN0IGVtaXR0ZWRGaWxlTmFtZSA9IGpzUGF0aC5yZXBsYWNlKFxuICAgICAgICAgICAgcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdzcmMvJyksXG4gICAgICAgICAgICAnJyxcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgdGhpcy5lbWl0RmlsZSh7XG4gICAgICAgICAgICB0eXBlOiAnYXNzZXQnLFxuICAgICAgICAgICAgZmlsZU5hbWU6IGVtaXR0ZWRGaWxlTmFtZSxcbiAgICAgICAgICAgIHNvdXJjZTogY3NzLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH07XG4gIH0sXG4pO1xuIiwgImltcG9ydCBwb3N0Y3NzIGZyb20gJ3Bvc3Rjc3MnO1xuaW1wb3J0IHBhcnNlciBmcm9tICdwb3N0Y3NzLXNlbGVjdG9yLXBhcnNlcic7XG5cbmltcG9ydCBpc0luc2lkZUdsb2JhbCBmcm9tICcuL2lzSW5zaWRlR2xvYmFsLmpzJztcblxuZnVuY3Rpb24gZ2V0Q2xhc3Nlc0FuZFRhZ3Moc2VsLCBjbGFzc2VzLCB0YWdzKSB7XG4gIGNvbnN0IHRyYW5zZm9ybSA9IChzbHMpID0+IHtcbiAgICBzbHMud2Fsaygoc2VsZWN0b3IpID0+IHtcbiAgICAgIGlmIChzZWxlY3Rvci50eXBlID09PSAnY2xhc3MnICYmICFpc0luc2lkZUdsb2JhbChzZWxlY3RvcikpIHtcbiAgICAgICAgY2xhc3Nlcy5hZGQoc2VsZWN0b3IudmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChzZWxlY3Rvci50eXBlID09PSAndGFnJyAmJiAhaXNJbnNpZGVHbG9iYWwoc2VsZWN0b3IpKSB7XG4gICAgICAgIHRhZ3MuYWRkKHNlbGVjdG9yLnZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBwYXJzZXIodHJhbnNmb3JtKS5wcm9jZXNzU3luYyhzZWwpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRDbGFzc2VzVGFnc0Zyb21Dc3MoY3NzKSB7XG4gIGNvbnN0IGNsYXNzZXMgPSBuZXcgU2V0KCk7XG4gIGNvbnN0IHRhZ3MgPSBuZXcgU2V0KCk7XG5cbiAgY29uc3QgYXN0ID0gcG9zdGNzcy5wYXJzZShjc3MpO1xuXG4gIGFzdC53YWxrKChub2RlKSA9PiB7XG4gICAgaWYgKG5vZGUudHlwZSA9PT0gJ3J1bGUnKSB7XG4gICAgICBnZXRDbGFzc2VzQW5kVGFncyhub2RlLnNlbGVjdG9yLCBjbGFzc2VzLCB0YWdzKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiB7IGNsYXNzZXMsIHRhZ3MgfTtcbn1cblxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzSW5zaWRlR2xvYmFsKG5vZGUsIGZ1bmMpIHtcbiAgY29uc3QgcGFyZW50ID0gbm9kZS5wYXJlbnQ7XG5cbiAgaWYgKCFwYXJlbnQpIHJldHVybiBmYWxzZTtcbiAgaWYgKHBhcmVudC50eXBlID09PSAncHNldWRvJyAmJiBwYXJlbnQudmFsdWUgPT09ICc6Z2xvYmFsJykgcmV0dXJuIHRydWU7XG5cbiAgcmV0dXJuIGlzSW5zaWRlR2xvYmFsKHBhcmVudCwgZnVuYyk7XG59XG4iLCAiaW1wb3J0IGJhYmVsUGFyc2VyIGZyb20gJ0BiYWJlbC9wYXJzZXInO1xuaW1wb3J0IHJlY2FzdCBmcm9tICdyZWNhc3QnO1xuXG5jb25zdCBwYXJzZU9wdGlvbnMgPSB7XG4gIHBhcnNlcjoge1xuICAgIHBhcnNlKHNvdXJjZSkge1xuICAgICAgcmV0dXJuIGJhYmVsUGFyc2VyLnBhcnNlKHNvdXJjZSwge1xuICAgICAgICBzb3VyY2VUeXBlOiAnbW9kdWxlJyxcbiAgICAgICAgYWxsb3dJbXBvcnRFeHBvcnRFdmVyeXdoZXJlOiB0cnVlLFxuICAgICAgICB0b2tlbnM6IHRydWUsXG4gICAgICB9KTtcbiAgICB9LFxuICB9LFxufTtcblxuZnVuY3Rpb24gcmVtb3ZlU2NvcGVCYWdSZWZlcmVuY2UoYXN0LCBzY29wZWRDbGFzcykge1xuICBpZiAoIXNjb3BlZENsYXNzKSByZXR1cm47XG5cbiAgcmVjYXN0LnZpc2l0KGFzdCwge1xuICAgIHZpc2l0T2JqZWN0UHJvcGVydHkocGF0aCkge1xuICAgICAgaWYgKFxuICAgICAgICBwYXRoLm5vZGUudmFsdWUudHlwZSA9PT0gJ0lkZW50aWZpZXInICYmXG4gICAgICAgIHBhdGgubm9kZS52YWx1ZS5uYW1lID09PSBzY29wZWRDbGFzc1xuICAgICAgKSB7XG4gICAgICAgIHBhdGgucHJ1bmUoKTtcblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHRoaXMudHJhdmVyc2UocGF0aCk7XG4gICAgfSxcbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChzY3JpcHQsIHJlcGxhY2VGdW5jdGlvbikge1xuICBjb25zdCBhc3QgPSByZWNhc3QucGFyc2Uoc2NyaXB0LCBwYXJzZU9wdGlvbnMpO1xuICBsZXQgaW1wb3J0ZWRTY29wZWRDbGFzcztcblxuICByZWNhc3QudmlzaXQoYXN0LCB7XG4gICAgdmlzaXRJbXBvcnREZWNsYXJhdGlvbihwYXRoKSB7XG4gICAgICBpZiAocGF0aC5ub2RlLnNvdXJjZS52YWx1ZSA9PT0gJ2VtYmVyLXNjb3BlZC1jc3MnKSB7XG4gICAgICAgIGxldCBzcGVjaWZpZXIgPSBwYXRoLm5vZGUuc3BlY2lmaWVycy5maW5kKFxuICAgICAgICAgICh4KSA9PiB4LmltcG9ydGVkLm5hbWUgPT09ICdzY29wZWRDbGFzcycsXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKHNwZWNpZmllcikge1xuICAgICAgICAgIGltcG9ydGVkU2NvcGVkQ2xhc3MgPSBzcGVjaWZpZXIubG9jYWwubmFtZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhdGgucHJ1bmUoKTtcblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHRoaXMudHJhdmVyc2UocGF0aCk7XG4gICAgfSxcbiAgICB2aXNpdENhbGxFeHByZXNzaW9uKHBhdGgpIHtcbiAgICAgIGNvbnN0IG5vZGUgPSBwYXRoLm5vZGU7XG5cbiAgICAgIGNvbnN0IHNjb3BlZENsYXNzID0gaW1wb3J0ZWRTY29wZWRDbGFzcyA/PyAnc2NvcGVkLWNsYXNzJztcblxuICAgICAgLyoqXG4gICAgICAgKiBfX0dMSU1NRVJfVEVNUExBVEUgaXMgZm9yIHVzZSB3aXRoXG4gICAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vTnVsbFZveFBvcHVsaS9yb2xsdXAtcGx1Z2luLWdsaW1tZXItdGVtcGxhdGUtdGFnL1xuICAgICAgICogd2hpY2ggdXNlc1xuICAgICAgICogaHR0cHM6Ly9naXRodWIuY29tL2VtYmVyLXRlbXBsYXRlLWltcG9ydHMvZW1iZXItdGVtcGxhdGUtaW1wb3J0cy9cbiAgICAgICAqIEB2Mywgd2hpY2ggaXMga25vd24gdG8gaGF2ZSBhIGxvdCBvZiBwYXJzZXIgYnVncy5cbiAgICAgICAqXG4gICAgICAgKiBpbiBAZW1icm9pZGVyL2FkZG9uLWRldkB2NCwgd2UgaGF2ZSBuYXRpdmUgR0pTIHN1cHBvcnRcbiAgICAgICAqIGFuZCB3ZSBkb24ndCBpbmxpbmUgY28tbG9jYXRlZCBoYnMgYW5kIEpTIChvciByYXRoZXIsIGEgcm9sbHVwIG9wdGltaXphdGlvbiBsYXRlciBkb2VzIGl0IGZvciB1cykuXG4gICAgICAgKiBJbnN0ZWFkLCB3ZSBpbXBvcnQsIHdoaWNoIGxvb2tzIGxpa2UgdGhpczpcbiAgICAgICAqIGBgYFxuICAgICAgICogaW1wb3J0IFRFTVBMQVRFIGZyb20gJy4vdGhlLWZpbGUuaGJzJztcbiAgICAgICAqXG4gICAgICAgKiAuLi5cbiAgICAgICAqXG4gICAgICAgKiBzZXRDb21wb25lbnRUZW1wbGF0ZShURU1QTEFURSwgWCk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqIEFuZCB3ZSBkb24ndCB3YW50IHRvIGVudGVyIHRoaXMgY29kZXBhdGggKG9yIHJhdGhlciwgaXQgbm8tb3BzKS5cbiAgICAgICAqIF9CVVRfLCBiZWNhdXNlIHRoaXMgZmlsZSBpbXBvcnRzIHRoZSBoYnMgZmlsZSwgd2UnbGwgZW5kIHVwIGhlcmUgbGF0ZXJcbiAgICAgICAqIGFuZCByZWFkeSB0byBoaXQgdGhlIGBwcmVjb21waWxlVGVtcGxhdGVgIGNvZGVwYXRoLlxuICAgICAgICovXG4gICAgICBpZiAoXG4gICAgICAgIG5vZGUuY2FsbGVlLm5hbWUgPT09ICdfX0dMSU1NRVJfVEVNUExBVEUnIHx8XG4gICAgICAgIG5vZGUuY2FsbGVlLm5hbWUgPT09ICdwcmVjb21waWxlVGVtcGxhdGUnXG4gICAgICApIHtcbiAgICAgICAgaWYgKG5vZGUuYXJndW1lbnRzWzBdLnR5cGUgPT09ICdUZW1wbGF0ZUxpdGVyYWwnKSB7XG4gICAgICAgICAgbm9kZS5hcmd1bWVudHNbMF0ucXVhc2lzWzBdLnZhbHVlLnJhdyA9IHJlcGxhY2VGdW5jdGlvbihcbiAgICAgICAgICAgIG5vZGUuYXJndW1lbnRzWzBdLnF1YXNpc1swXS52YWx1ZS5yYXcsXG4gICAgICAgICAgICBzY29wZWRDbGFzcyxcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIG5vZGUuYXJndW1lbnRzWzBdLnR5cGUgPT09ICdTdHJpbmdMaXRlcmFsJyB8fFxuICAgICAgICAgIG5vZGUuYXJndW1lbnRzWzBdLnR5cGUgPT09ICdMaXRlcmFsJ1xuICAgICAgICApIHtcbiAgICAgICAgICBub2RlLmFyZ3VtZW50c1swXS52YWx1ZSA9IHJlcGxhY2VGdW5jdGlvbihcbiAgICAgICAgICAgIG5vZGUuYXJndW1lbnRzWzBdLnZhbHVlLFxuICAgICAgICAgICAgc2NvcGVkQ2xhc3MsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbXBvcnRlZFNjb3BlZENsYXNzKSB7XG4gICAgICAgICAgcmVtb3ZlU2NvcGVCYWdSZWZlcmVuY2UocGF0aCwgc2NvcGVkQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMudHJhdmVyc2UocGF0aCk7XG4gICAgfSxcbiAgfSk7XG5cbiAgcmV0dXJuIHJlY2FzdC5wcmludChhc3QpLmNvZGU7XG59XG4iLCAiaW1wb3J0IHBvc3Rjc3MgZnJvbSAncG9zdGNzcyc7XG5pbXBvcnQgcGFyc2VyIGZyb20gJ3Bvc3Rjc3Mtc2VsZWN0b3ItcGFyc2VyJztcblxuaW1wb3J0IGlzSW5zaWRlR2xvYmFsIGZyb20gJy4vaXNJbnNpZGVHbG9iYWwuanMnO1xuXG5mdW5jdGlvbiByZXdyaXRlU2VsZWN0b3Ioc2VsLCBwb3N0Zml4KSB7XG4gIGNvbnN0IHRyYW5zZm9ybSA9IChzZWxlY3RvcnMpID0+IHtcbiAgICBzZWxlY3RvcnMud2Fsaygoc2VsZWN0b3IpID0+IHtcbiAgICAgIGlmIChzZWxlY3Rvci50eXBlID09PSAnY2xhc3MnICYmICFpc0luc2lkZUdsb2JhbChzZWxlY3RvcikpIHtcbiAgICAgICAgc2VsZWN0b3IudmFsdWUgKz0gJ18nICsgcG9zdGZpeDtcbiAgICAgIH0gZWxzZSBpZiAoc2VsZWN0b3IudHlwZSA9PT0gJ3RhZycgJiYgIWlzSW5zaWRlR2xvYmFsKHNlbGVjdG9yKSkge1xuICAgICAgICBzZWxlY3Rvci5yZXBsYWNlV2l0aChcbiAgICAgICAgICBwYXJzZXIudGFnKHsgdmFsdWU6IHNlbGVjdG9yLnZhbHVlIH0pLFxuICAgICAgICAgIHBhcnNlci5jbGFzc05hbWUoeyB2YWx1ZTogcG9zdGZpeCB9KSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIHJlbW92ZSA6Z2xvYmFsXG4gICAgc2VsZWN0b3JzLndhbGsoKHNlbGVjdG9yKSA9PiB7XG4gICAgICBpZiAoc2VsZWN0b3IudHlwZSA9PT0gJ3BzZXVkbycgJiYgc2VsZWN0b3IudmFsdWUgPT09ICc6Z2xvYmFsJykge1xuICAgICAgICBzZWxlY3Rvci5yZXBsYWNlV2l0aCguLi5zZWxlY3Rvci5ub2Rlcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IHRyYW5zZm9ybWVkID0gcGFyc2VyKHRyYW5zZm9ybSkucHJvY2Vzc1N5bmMoc2VsKTtcblxuICByZXR1cm4gdHJhbnNmb3JtZWQ7XG59XG5cbmZ1bmN0aW9uIGlzSW5zaWRlS2V5ZnJhbWVzKG5vZGUpIHtcbiAgY29uc3QgcGFyZW50ID0gbm9kZS5wYXJlbnQ7XG5cbiAgaWYgKCFwYXJlbnQpIHJldHVybiBmYWxzZTtcbiAgaWYgKHBhcmVudC50eXBlID09PSAnYXRydWxlJyAmJiBwYXJlbnQubmFtZSA9PT0gJ2tleWZyYW1lcycpIHJldHVybiB0cnVlO1xuXG4gIHJldHVybiBpc0luc2lkZUtleWZyYW1lcyhwYXJlbnQpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZXdyaXRlQ3NzKGNzcywgcG9zdGZpeCwgZmlsZU5hbWUsIGxheWVyTmFtZSkge1xuICBjb25zdCBsYXllck5hbWVXaXRoRGVmYXVsdCA9IGxheWVyTmFtZSA/PyAnY29tcG9uZW50cyc7XG4gIGNvbnN0IGFzdCA9IHBvc3Rjc3MucGFyc2UoY3NzKTtcblxuICBhc3Qud2Fsaygobm9kZSkgPT4ge1xuICAgIGlmIChub2RlLnR5cGUgPT09ICdydWxlJyAmJiAhaXNJbnNpZGVLZXlmcmFtZXMobm9kZSkpIHtcbiAgICAgIG5vZGUuc2VsZWN0b3IgPSByZXdyaXRlU2VsZWN0b3Iobm9kZS5zZWxlY3RvciwgcG9zdGZpeCk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCByZXdyaXR0ZW5Dc3MgPSBhc3QudG9TdHJpbmcoKTtcblxuICBpZiAoIWxheWVyTmFtZVdpdGhEZWZhdWx0KSB7XG4gICAgcmV0dXJuIGAvKiAke2ZpbGVOYW1lfSAqL1xcbiR7cmV3cml0dGVuQ3NzfVxcbmA7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIGAvKiAke2ZpbGVOYW1lfSAqL1xcbkBsYXllciAke2xheWVyTmFtZVdpdGhEZWZhdWx0fSB7XFxuXFxuYCArXG4gICAgcmV3cml0dGVuQ3NzICtcbiAgICAnXFxufVxcbidcbiAgKTtcbn1cblxuIiwgImltcG9ydCByZWNhc3QgZnJvbSAnZW1iZXItdGVtcGxhdGUtcmVjYXN0JztcblxuaW1wb3J0IHsgcmVuYW1lQ2xhc3MgfSBmcm9tICcuL3JlbmFtZUNsYXNzLmpzJztcblxuZXhwb3J0IGZ1bmN0aW9uIHRlbXBsYXRlUGx1Z2luKHsgY2xhc3NlcywgdGFncywgcG9zdGZpeCB9KSB7XG4gIGxldCBzdGFjayA9IFtdO1xuICAvLyBzY29wZWQtY2xhc3MgaXMgYSBnbG9iYWwgd2UgYWxsb3cgaW4gaGJzXG4gIC8vIHNjb3BlZENsYXNzIGlzIGltcG9ydGFibGUsIGFuZCB3ZSdsbCBlcnJvciBpZiBzb21lb25lIHRyaWVzIHRvIHJlbmFtZSBpdFxuICBsZXQgc2NvcGVkQ2xhc3NDYW5kaWRhdGVzID0gWydzY29wZWQtY2xhc3MnLCAnc2NvcGVkQ2xhc3MnXTtcblxuICBmdW5jdGlvbiBpc1Njb3BlZENsYXNzKHN0cikge1xuICAgIGlmICghc3RyKSByZXR1cm4gZmFsc2U7XG5cbiAgICByZXR1cm4gc2NvcGVkQ2xhc3NDYW5kaWRhdGVzLnNvbWUoKGNhbmRpZGF0ZSkgPT4gY2FuZGlkYXRlID09PSBzdHIpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBBdHRyTm9kZShub2RlKSB7XG4gICAgICBpZiAobm9kZS5uYW1lID09PSAnY2xhc3MnKSB7XG4gICAgICAgIGlmIChub2RlLnZhbHVlLnR5cGUgPT09ICdUZXh0Tm9kZScgJiYgbm9kZS52YWx1ZS5jaGFycykge1xuICAgICAgICAgIGNvbnN0IHJlbmFtZWRDbGFzcyA9IHJlbmFtZUNsYXNzKG5vZGUudmFsdWUuY2hhcnMsIHBvc3RmaXgsIGNsYXNzZXMpO1xuXG4gICAgICAgICAgbm9kZS52YWx1ZS5jaGFycyA9IHJlbmFtZWRDbGFzcztcbiAgICAgICAgfSBlbHNlIGlmIChub2RlLnZhbHVlLnR5cGUgPT09ICdDb25jYXRTdGF0ZW1lbnQnKSB7XG4gICAgICAgICAgZm9yIChsZXQgcGFydCBvZiBub2RlLnZhbHVlLnBhcnRzKSB7XG4gICAgICAgICAgICBpZiAocGFydC50eXBlID09PSAnVGV4dE5vZGUnICYmIHBhcnQuY2hhcnMpIHtcbiAgICAgICAgICAgICAgY29uc3QgcmVuYW1lZENsYXNzID0gcmVuYW1lQ2xhc3MocGFydC5jaGFycywgcG9zdGZpeCwgY2xhc3Nlcyk7XG5cbiAgICAgICAgICAgICAgcGFydC5jaGFycyA9IHJlbmFtZWRDbGFzcztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFydC50eXBlID09PSAnTXVzdGFjaGVTdGF0ZW1lbnQnKSB7XG4gICAgICAgICAgICAgIHJlY2FzdC50cmF2ZXJzZShwYXJ0LCB7XG4gICAgICAgICAgICAgICAgU3RyaW5nTGl0ZXJhbChub2RlKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCByZW5hbWVkQ2xhc3MgPSByZW5hbWVDbGFzcyhcbiAgICAgICAgICAgICAgICAgICAgbm9kZS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgcG9zdGZpeCxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NlcyxcbiAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgIG5vZGUudmFsdWUgPSByZW5hbWVkQ2xhc3M7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIEVsZW1lbnROb2RlKG5vZGUpIHtcbiAgICAgIGlmICh0YWdzLmhhcyhub2RlLnRhZykpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgY2xhc3MgYXR0cmlidXRlIGFscmVhZHkgZXhpc3RzXG4gICAgICAgIGNvbnN0IGNsYXNzQXR0ciA9IG5vZGUuYXR0cmlidXRlcy5maW5kKChhdHRyKSA9PiBhdHRyLm5hbWUgPT09ICdjbGFzcycpO1xuXG4gICAgICAgIGlmIChjbGFzc0F0dHIpIHtcbiAgICAgICAgICBjbGFzc0F0dHIudmFsdWUuY2hhcnMgKz0gJyAnICsgcG9zdGZpeDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBwdXNoIGNsYXNzIGF0dHJpYnV0ZVxuICAgICAgICAgIG5vZGUuYXR0cmlidXRlcy5wdXNoKFxuICAgICAgICAgICAgcmVjYXN0LmJ1aWxkZXJzLmF0dHIoJ2NsYXNzJywgcmVjYXN0LmJ1aWxkZXJzLnRleHQocG9zdGZpeCkpLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgQWxsOiB7XG4gICAgICBlbnRlcihub2RlKSB7XG4gICAgICAgIHN0YWNrLnB1c2gobm9kZSk7XG4gICAgICB9LFxuICAgICAgZXhpdCgpIHtcbiAgICAgICAgc3RhY2sucG9wKCk7XG4gICAgICB9LFxuICAgIH0sXG5cbiAgICBNdXN0YWNoZVN0YXRlbWVudChub2RlKSB7XG4gICAgICBsZXQgY3NzQ2xhc3M7XG5cbiAgICAgIGlmIChcbiAgICAgICAgaXNTY29wZWRDbGFzcyhnZXRWYWx1ZShub2RlLnBhdGgpKSAmJlxuICAgICAgICBub2RlLnBhcmFtcz8ubGVuZ3RoID09PSAxICYmXG4gICAgICAgIG5vZGUucGFyYW1zWzBdLnR5cGUgPT09ICdTdHJpbmdMaXRlcmFsJ1xuICAgICAgKSB7XG4gICAgICAgIGNzc0NsYXNzID0gbm9kZS5wYXJhbXNbMF0udmFsdWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgaXNTY29wZWRDbGFzcyhnZXRWYWx1ZShub2RlLnBhdGg/LnBhdGgpKSAmJlxuICAgICAgICBub2RlLnBhdGg/LnBhcmFtcz8ubGVuZ3RoID09PSAxICYmXG4gICAgICAgIG5vZGUucGF0aD8ucGFyYW1zWzBdLnR5cGUgPT09ICdTdHJpbmdMaXRlcmFsJ1xuICAgICAgKSB7XG4gICAgICAgIGNzc0NsYXNzID0gbm9kZS5wYXRoLnBhcmFtc1swXS52YWx1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNzc0NsYXNzKSB7XG4gICAgICAgIGNvbnN0IHRleHROb2RlID0gcmVjYXN0LmJ1aWxkZXJzLnRleHQocmVuYW1lQ2xhc3MoY3NzQ2xhc3MsIHBvc3RmaXgpKTtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG5cbiAgICAgICAgaWYgKHBhcmVudC50eXBlID09PSAnQXR0ck5vZGUnKSB7XG4gICAgICAgICAgcGFyZW50LnF1b3RlVHlwZSA9ICdcIic7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGV4dE5vZGU7XG4gICAgICB9XG4gICAgfSxcblxuICAgIFN1YkV4cHJlc3Npb24obm9kZSkge1xuICAgICAgaWYgKFxuICAgICAgICBpc1Njb3BlZENsYXNzKGdldFZhbHVlKG5vZGUucGF0aCkpICYmXG4gICAgICAgIG5vZGUucGFyYW1zPy5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgbm9kZS5wYXJhbXNbMF0udHlwZSA9PT0gJ1N0cmluZ0xpdGVyYWwnXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgY3NzQ2xhc3MgPSBub2RlLnBhcmFtc1swXS52YWx1ZTtcbiAgICAgICAgY29uc3QgdGV4dE5vZGUgPSByZWNhc3QuYnVpbGRlcnMubGl0ZXJhbChcbiAgICAgICAgICAnU3RyaW5nTGl0ZXJhbCcsXG4gICAgICAgICAgcmVuYW1lQ2xhc3MoY3NzQ2xhc3MsIHBvc3RmaXgpLFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB0ZXh0Tm9kZTtcbiAgICAgIH1cbiAgICB9LFxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRWYWx1ZShwYXRoKSB7XG4gIGlmICghcGF0aCkgcmV0dXJuO1xuXG4gIGlmICgndmFsdWUnIGluIHBhdGgpIHtcbiAgICByZXR1cm4gcGF0aC52YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXByZWNhdGVkIGluIGVtYmVyIDUuOStcbiAgICogKHNvIHdlIHVzZSB0aGUgYWJvdmUgZm9yIG5ld2VyIGVtYmVycylcbiAgICovXG4gIHJldHVybiBwYXRoLm9yaWdpbmFsO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZXdyaXRlSGJzKGhicywgY2xhc3NlcywgdGFncywgcG9zdGZpeCkge1xuICBsZXQgYXN0ID0gcmVjYXN0LnBhcnNlKGhicyk7XG5cbiAgcmVjYXN0LnRyYXZlcnNlKGFzdCwgdGVtcGxhdGVQbHVnaW4oeyBjbGFzc2VzLCB0YWdzLCBwb3N0Zml4IH0pKTtcblxuICBsZXQgcmVzdWx0ID0gcmVjYXN0LnByaW50KGFzdCk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbiIsICIvKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gcG9zdGZpeFxuICogQHBhcmFtIHtTZXQ8c3RyaW5nPn0gW2NsYXNzZXNJbkNzc11cbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW5hbWVDbGFzcyhjbGFzc05hbWUsIHBvc3RmaXgsIGNsYXNzZXNJbkNzcykge1xuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lLnNwbGl0KC9cXHMrLyk7XG4gIGNvbnN0IHJlbmFtZWRDbGFzc2VzID0gY2xhc3Nlc1xuICAgIC5maWx0ZXIoKGMpID0+IGMpXG4gICAgLm1hcCgoYykgPT4gYy50cmltKCkpXG4gICAgLm1hcCgoYykgPT4ge1xuICAgICAgaWYgKCFjbGFzc2VzSW5Dc3MgfHwgY2xhc3Nlc0luQ3NzLmhhcyhjKSkge1xuICAgICAgICBpZiAoYy5lbmRzV2l0aChwb3N0Zml4KSkgcmV0dXJuIGM7XG5cbiAgICAgICAgcmV0dXJuIGMgKyAnXycgKyBwb3N0Zml4O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYztcbiAgICB9KVxuICAgIC5qb2luKCcgJyk7XG5cbiAgY29uc3QgcmVuYW1lZFdpdGhQcmVzZXJ2ZWRTcGFjZXMgPSBjbGFzc05hbWUucmVwbGFjZShcbiAgICBjbGFzc05hbWUudHJpbVN0YXJ0KCkudHJpbUVuZCgpLFxuICAgIHJlbmFtZWRDbGFzc2VzLFxuICApO1xuXG4gIHJldHVybiByZW5hbWVkV2l0aFByZXNlcnZlZFNwYWNlcztcbn1cbiIsICJpbXBvcnQgeyBleGlzdHNTeW5jLCByZWFkRmlsZVN5bmMgfSBmcm9tICdmcyc7XG5cbmltcG9ydCBnZXRDbGFzc2VzVGFnc0Zyb21Dc3MgZnJvbSAnLi4vZ2V0Q2xhc3Nlc1RhZ3NGcm9tQ3NzLmpzJztcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gY3NzUGF0aCBwYXRoIHRvIGEgQ1NTIGZpbGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENTU0luZm8oY3NzUGF0aCkge1xuICBpZiAoIWV4aXN0c1N5bmMoY3NzUGF0aCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGxldCBjc3MgPSByZWFkRmlsZVN5bmMoY3NzUGF0aCwgJ3V0ZjgnKTtcbiAgbGV0IHJlc3VsdCA9IGdldENsYXNzZXNUYWdzRnJvbUNzcyhjc3MpO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG4iLCAiaW1wb3J0IHBhdGggZnJvbSAnbm9kZTpwYXRoJztcblxuaW1wb3J0IHsgZmluZFdvcmtzcGFjZVBhdGgsIG1vZHVsZU5hbWUgYXMgcHJvamVjdE5hbWUgfSBmcm9tICcuL3V0aWxzLmpzJztcblxuLyoqXG4gKiB0ZW1wbGF0ZSBwbHVnaW5zIGRvIG5vdCBoYW5kIHVzIHRoZSBjb3JyZWN0IGZpbGUgcGF0aC5cbiAqIGFkZGl0aW9uYWxseSwgd2UgbWF5IG5vdCBiZSBhYmxlIHRvIHJlbHkgb24gdGhpcyBkYXRhIGluIHRoZSBmdXR1cmUsXG4gKiBzbyB0aGlzIGZ1bmN0aW9ucyBhY3RzIGFzIGEgbWVhbnMgb2Ygbm9ybWFsaXppbmcgX3doYXRldmVyXyB3ZSdyZSBnaXZlblxuICogaW4gdGhlIGZ1dHVyZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZW5hbWVcbiAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBhYnNvbHV0ZSBwYXRoIHRvIHRoZSBmaWxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaXhGaWxlbmFtZShmaWxlbmFtZSkge1xuICBsZXQgZmlsZU5hbWUgPSBmaWxlbmFtZTtcbiAgbGV0IHdvcmtzcGFjZSA9IGZpbmRXb3Jrc3BhY2VQYXRoKGZpbGVOYW1lKTtcbiAgbGV0IG1vZHVsZU5hbWUgPSBwcm9qZWN0TmFtZSh3b3Jrc3BhY2UpO1xuXG4gIC8qKlxuICAgKiBGb3IgYSBzaW1wbGUgY2FzZSwgdGhlcmUgYXJlIHNvbWV0aW1lcyBkdXBsaWNhdGUgbW9kdWxlIHBhdGhzIGluIHRoZSBmaWxlTmFtZVxuICAgKiBsZXQncyBjb2xsYXBzZSB0aGF0IGFuZFxuICAgKi9cbiAgbGV0IHdyb25nTW9kdWxlTmFtZSA9IHBhdGguYmFzZW5hbWUod29ya3NwYWNlKTtcbiAgbGV0IGRlZHVwZWQgPSBmaWxlTmFtZS5yZXBsYWNlKFxuICAgIGAke3dyb25nTW9kdWxlTmFtZX0vJHttb2R1bGVOYW1lfS9gLFxuICAgIGAke3dyb25nTW9kdWxlTmFtZX0vYXBwL2AsXG4gICk7XG5cbiAgaWYgKGRlZHVwZWQgIT09IGZpbGVOYW1lKSB7XG4gICAgcmV0dXJuIGRlZHVwZWQ7XG4gIH1cblxuICAvKipcbiAgICogZW1iZXItc291cmNlIDUuODpcbiAgICogLSB0aGUgZmlsZW5hbWUgbG9va3MgbGlrZSBhbiBhYnNvbHV0ZSBwYXRoLCBidXQgc3dhcHBlZCBvdXQgdGhlICdhcHAnIHBhcnQgb2YgdGhlIHBhdGhcbiAgICogICB3aXRoIHRoZSBtb2R1bGUgbmFtZSwgc28gdGhlIGZpbGUgcGF0aHMgbmV2ZXIgZXhpc3Qgb24gZGlza1xuICAgKlxuICAgKiAtIGluIHZpdGUgYXBwczpcbiAgICogICB0aGUgJ2FwcCcgcGFydCBfbWF5XyBiZSBgc3JjYCwgc28gd2UgYWxzbyBuZWVkIHRvIGVuc3VyZSB0aGF0IGBzcmNgIGlzIGV4Y2x1ZGVkIGFzIHdlbGxcbiAgICovXG4gIGxldCBoYXNBcHBEaXIgPSBmaWxlTmFtZS5pbmNsdWRlcyhwYXRoLmpvaW4od29ya3NwYWNlLCAnYXBwJykpO1xuICBsZXQgaGFzU3JjRGlyID0gZmlsZU5hbWUuaW5jbHVkZXMocGF0aC5qb2luKHdvcmtzcGFjZSwgJ3NyYycpKTtcblxuICBpZiAoXG4gICAgIShoYXNBcHBEaXIgfHwgaGFzU3JjRGlyKSAmJlxuICAgICFmaWxlTmFtZS5pbmNsdWRlcygnL25vZGVfbW9kdWxlcy8uZW1icm9pZGVyLycpXG4gICkge1xuICAgIGxldCBtYXliZU1vZHVsZSA9IGZpbGVOYW1lLnJlcGxhY2Uod29ya3NwYWNlLCAnJyk7XG4gICAgbGV0IFttYXliZVNjb3BlLCAuLi5yZXN0XSA9IG1heWJlTW9kdWxlLnNwbGl0KCcvJykuZmlsdGVyKEJvb2xlYW4pO1xuICAgIGxldCBwYXJ0cyA9IHJlc3Q7XG5cbiAgICBpZiAobWF5YmVTY29wZS5zdGFydHNXaXRoKCdAJykpIHtcbiAgICAgIGxldCBbLCAuLi5yZXN0ZXJdID0gcmVzdDtcblxuICAgICAgcGFydHMgPSByZXN0ZXI7XG4gICAgfVxuXG4gICAgbGV0IHJlbGF0aXZlID0gcGF0aC5qb2luKC4uLnBhcnRzKTtcblxuICAgIC8qKlxuICAgICAqIFdlIGRvbid0IGFjdHVhbGx5IGtub3cgaWYgdGhpcyBmaWxlIGlzIGFuIGFwcC5cbiAgICAgKiBpdCBjb3VsZCBiZSBhbiBhZGRvbiAodjEgb3IgdjIpXG4gICAgICpcbiAgICAgKiBTbyBoZXJlIHdlIGxvZyB0byBzZWUgaWYgd2UgaGF2ZSB1bmhhbmRsZWQgc2l0dWF0aW9ucy5cbiAgICAgKi9cbiAgICBsZXQgY2FuZGlkYXRlUGF0aCA9IHBhdGguam9pbih3b3Jrc3BhY2UsICdhcHAnLCByZWxhdGl2ZSk7XG5cbiAgICByZXR1cm4gY2FuZGlkYXRlUGF0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiB1bmRlciBlbWJyb2lkZXJAMywgdGhlIGZpbGVOYW1lIHdpbGwgYmUgdGhlIHBhdGggdG8gdGhlIHJld3JpdHRlbiBmaWxlLlxuICAgKiB3ZSBkb24ndCB3YW50IHRoaXMuXG4gICAqIHdlIHdhbnQgdGhlIHBhdGggdG8gdGhlIG9yaWdpbmFsIHNvdXJjZS5cbiAgICogVGhyb3VnaCB0aGUgcG93ZXJzIG9mIFx1MjcyOCBjb252ZW50aW9uIFx1MjcyOCwgd2UgY2FuIG1hcCBiYWNrIHRvIHNvdXJjZS5cbiAgICovXG4gIGlmIChmaWxlTmFtZS5pbmNsdWRlcygnL25vZGVfbW9kdWxlcy8uZW1icm9pZGVyL3Jld3JpdHRlbi1hcHAvJykpIHtcbiAgICBsZXQgY2FuZGlkYXRlUGF0aCA9IGZpbGVOYW1lLnJlcGxhY2UoXG4gICAgICAnL25vZGVfbW9kdWxlcy8uZW1icm9pZGVyL3Jld3JpdHRlbi1hcHAvJyxcbiAgICAgICcvYXBwLycsXG4gICAgKTtcblxuICAgIHJldHVybiBjYW5kaWRhdGVQYXRoO1xuICB9XG5cbiAgLy8gVE9ETzogd2h5IGFyZSB3ZSBwYXNzZWQgZmlsZXMgdG8gb3RoZXIgcHJvamVjdHM/XG4gIGlmICghZmlsZU5hbWUuaW5jbHVkZXMod29ya3NwYWNlKSkge1xuICAgIHJldHVybiBmaWxlTmFtZTtcbiAgfVxuXG4gIC8vIEZhbGxiYWNrIHRvIHdoYXQgdGhlIHBsdWdpbiBzeXN0ZW0gZ2l2ZXMgdXMuXG4gIC8vIFRoaXMgbWF5IGJlIHdyb25nLCBhbmQgaWYgd3JvbmcsIHJldmVhbHNcbiAgLy8gdW5oYW5kbGVkIHNjZW5hcmlvcyB3aXRoIHRoZSBmaWxlIG5hbWVzIGluIHRoZSBwbHVnaW4gaW5mcmFcbiAgcmV0dXJuIGZpbGVOYW1lO1xufVxuIiwgIi8qKlxuICogQHR5cGVkZWYge2ltcG9ydCgnQGdsaW1tZXIvc3ludGF4JykuQVNUUGx1Z2lufSBBU1RQbHVnaW5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoJ0BnbGltbWVyL3N5bnRheCcpLkFTVFBsdWdpbkVudmlyb25tZW50fSBBU1RQbHVnaW5FbnZpcm9ubWVudFxuICpcbiAqL1xuXG5pbXBvcnQgeyBnZXRDU1NJbmZvIH0gZnJvbSAnLi4vbGliL2Nzcy91dGlscy5qcyc7XG5pbXBvcnQgeyBmaXhGaWxlbmFtZSB9IGZyb20gJy4uL2xpYi9wYXRoL3RlbXBsYXRlLXRyYW5zZm9ybS1wYXRocy5qcyc7XG5pbXBvcnQge1xuICBhcHBQYXRoLFxuICBjc3NQYXRoRm9yLFxuICBoYXNoRnJvbU1vZHVsZVBhdGgsXG4gIGlzUmVsZXZhbnRGaWxlLFxufSBmcm9tICcuLi9saWIvcGF0aC91dGlscy5qcyc7XG5pbXBvcnQgeyB0ZW1wbGF0ZVBsdWdpbiB9IGZyb20gJy4uL2xpYi9yZXdyaXRlSGJzLmpzJztcblxuY29uc3Qgbm9vcFBsdWdpbiA9IHtcbiAgbmFtZTogJ2VtYmVyLXNjb3BlZC1jc3M6bm9vcCcsXG4gIHZpc2l0b3I6IHt9LFxufTtcblxuLyoqXG4gKiBAcmV0dXJucyB7QVNUUGx1Z2lufVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUGx1Z2luKGNvbmZpZykge1xuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtBU1RQbHVnaW5FbnZpcm9ubWVudH0gZW52XG4gICAqL1xuICByZXR1cm4gZnVuY3Rpb24gc2NvcGVkQ3NzKGVudikge1xuICAgIGxldCBpc1JlbGV2YW50ID0gaXNSZWxldmFudEZpbGUoZW52LmZpbGVuYW1lLCB7XG4gICAgICBhZGRpdGlvbmFsUm9vdHM6IGNvbmZpZy5hZGRpdGlvbmFsUm9vdHMsXG4gICAgICBjd2Q6IHByb2Nlc3MuY3dkKCksXG4gICAgfSk7XG5cbiAgICBpZiAoIWlzUmVsZXZhbnQpIHtcbiAgICAgIHJldHVybiBub29wUGx1Z2luO1xuICAgIH1cblxuICAgIGxldCBhYnNvbHV0ZVBhdGggPSBmaXhGaWxlbmFtZShlbnYuZmlsZW5hbWUpO1xuICAgIGxldCBtb2R1bGVQYXRoID0gYXBwUGF0aChhYnNvbHV0ZVBhdGgpO1xuXG4gICAgbGV0IGNzc1BhdGggPSBjc3NQYXRoRm9yKGFic29sdXRlUGF0aCk7XG4gICAgbGV0IGluZm8gPSBnZXRDU1NJbmZvKGNzc1BhdGgpO1xuICAgIGxldCBwb3N0Zml4ID0gaGFzaEZyb21Nb2R1bGVQYXRoKG1vZHVsZVBhdGgpO1xuXG4gICAgaWYgKCFpbmZvKSB7XG4gICAgICByZXR1cm4gbm9vcFBsdWdpbjtcbiAgICB9XG5cbiAgICBsZXQgdmlzaXRvcnMgPSB0ZW1wbGF0ZVBsdWdpbih7XG4gICAgICBjbGFzc2VzOiBpbmZvLmNsYXNzZXMsXG4gICAgICB0YWdzOiBpbmZvLnRhZ3MsXG4gICAgICBwb3N0Zml4LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6ICdlbWJlci1zY29wZWQtY3NzOnRlbXBsYXRlLXBsdWdpbicsXG4gICAgICB2aXNpdG9yOiB7XG4gICAgICAgIC8vIFN0YWNrIE1hbmFnZXJcbiAgICAgICAgLi4udmlzaXRvcnMsXG4gICAgICAgIC8vIFZpc2l0b3JzIGJyb2tlbiBvdXQgbGlrZSB0aGlzIHNvIHdlIGNhbiBjb25kaXRpb25hbGx5XG4gICAgICAgIC8vIGRlYnVnIGJhc2VkIG9uIGZpbGUgcGF0aC5cbiAgICAgICAgQXR0ck5vZGUoLi4uYXJncykge1xuICAgICAgICAgIHJldHVybiB2aXNpdG9ycy5BdHRyTm9kZSguLi5hcmdzKTtcbiAgICAgICAgfSxcbiAgICAgICAgRWxlbWVudE5vZGUoLi4uYXJncykge1xuICAgICAgICAgIHJldHVybiB2aXNpdG9ycy5FbGVtZW50Tm9kZSguLi5hcmdzKTtcbiAgICAgICAgfSxcbiAgICAgICAgTXVzdGFjaGVTdGF0ZW1lbnQoLi4uYXJncykge1xuICAgICAgICAgIHJldHVybiB2aXNpdG9ycy5NdXN0YWNoZVN0YXRlbWVudCguLi5hcmdzKTtcbiAgICAgICAgfSxcbiAgICAgICAgU3ViRXhwcmVzc2lvbiguLi5hcmdzKSB7XG4gICAgICAgICAgcmV0dXJuIHZpc2l0b3JzLlN1YkV4cHJlc3Npb24oLi4uYXJncyk7XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH07XG4gIH07XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7O0FDQUEsK0JBQTJCO0FBQzNCLGdCQUEyQjtBQUMzQixrQkFBcUI7OztBQ0ZyQix5QkFBbUI7QUFDbkIscUJBQW1CO0FBQ25C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LFlBQVk7QUFDZixhQUFPO0FBQUEsSUFDVDtBQUVBLFFBQUksZUFBZSxZQUFZLElBQUksUUFBUTtBQUMzQyxRQUFJLGFBQWEsUUFBUSxZQUFZO0FBRXJDLFFBQUksVUFBVSxXQUFXLFlBQVk7QUFDckMsUUFBSSxPQUFPLFdBQVcsT0FBTztBQUM3QixRQUFJLFVBQVUsbUJBQW1CLFVBQVU7QUFFM0MsUUFBSSxDQUFDLE1BQU07QUFDVCxhQUFPO0FBQUEsSUFDVDtBQUVBLFFBQUksV0FBVyxlQUFlO0FBQUEsTUFDNUIsU0FBUyxLQUFLO0FBQUEsTUFDZCxNQUFNLEtBQUs7QUFBQSxNQUNYO0FBQUEsSUFDRixDQUFDO0FBRUQsV0FBTztBQUFBLE1BQ0wsTUFBTTtBQUFBLE1BQ04sU0FBUztBQUFBO0FBQUEsUUFFUCxHQUFHO0FBQUE7QUFBQTtBQUFBLFFBR0gsWUFBWSxNQUFNO0FBQ2hCLGlCQUFPLFNBQVMsU0FBUyxHQUFHLElBQUk7QUFBQSxRQUNsQztBQUFBLFFBQ0EsZUFBZSxNQUFNO0FBQ25CLGlCQUFPLFNBQVMsWUFBWSxHQUFHLElBQUk7QUFBQSxRQUNyQztBQUFBLFFBQ0EscUJBQXFCLE1BQU07QUFDekIsaUJBQU8sU0FBUyxrQkFBa0IsR0FBRyxJQUFJO0FBQUEsUUFDM0M7QUFBQSxRQUNBLGlCQUFpQixNQUFNO0FBQ3JCLGlCQUFPLFNBQVMsY0FBYyxHQUFHLElBQUk7QUFBQSxRQUN2QztBQUFBLE1BQ0Y7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUNGOyIsCiAgIm5hbWVzIjogWyJtZDUiLCAicGF0aCIsICJhc3NlcnQiLCAiZnNTeW5jIiwgInBhdGgiLCAibm9kZVBhdGgiLCAiaW1wb3J0X25vZGVfZnMiLCAiaW1wb3J0X25vZGVfcGF0aCIsICJwYXJzZXIiLCAicG9zdGNzcyIsICJiYWJlbFBhcnNlciIsICJyZWNhc3QiLCAicGF0aCIsICJpbXBvcnRfcG9zdGNzcyIsICJpbXBvcnRfcG9zdGNzc19zZWxlY3Rvcl9wYXJzZXIiLCAicGFyc2VyIiwgInBvc3Rjc3MiLCAicmVjYXN0IiwgIm5vZGUiLCAicGF0aCIsICJwYXRoIiwgInByb2Nlc3MiLCAiaW1wb3J0X2ZzIiwgImltcG9ydF9ub2RlX3BhdGgiLCAibW9kdWxlTmFtZSIsICJwYXRoIl0KfQo=
diff --git a/package.json b/package.json
index 7632122072cc5153005a8ee01f02adf880a2af9c..bfa83cede22587318935d74a550a45a9f29c3168 100644
--- a/package.json
+++ b/package.json
@@ -69,6 +69,7 @@
     "@babel/parser": "^7.26.9",
     "@embroider/addon-shim": "^1.9.0",
     "acorn": "^8.14.1",
+    "package-up": "5.0.0",
     "babel-import-util": "^3.0.1",
     "blueimp-md5": "^2.19.0",
     "broccoli-concat": "^4.2.5",
diff --git a/src/lib/replaceHbsInJs.js b/src/lib/replaceHbsInJs.js
index c9fd2cf32e179ad1cd99205701cc1adc575d4aa0..9fe53fa7126b578acf5c9a8ba0004aa6296b7053 100644
--- a/src/lib/replaceHbsInJs.js
+++ b/src/lib/replaceHbsInJs.js
@@ -8,6 +8,9 @@ const parseOptions = {
         sourceType: 'module',
         allowImportExportEverywhere: true,
         tokens: true,
+        plugins: [
+          "decorators",
+        ],
       });
     },
   },
